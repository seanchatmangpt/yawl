<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
         http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>org.yawlfoundation</groupId>
    <artifactId>yawl-parent</artifactId>

    <version>6.0.0-GA</version>
    <packaging>pom</packaging>

    <name>YAWL Parent</name>
    <description>Parent POM for YAWL - Yet Another Workflow Language multi-module build</description>

    <developers>
        <developer>
            <id>schatman</id>
            <name>Sean Chatman</name>
            <roles>
                <role>Library Modernization Lead</role>
                <role>Architecture Consultant</role>
            </roles>
        </developer>
        <developer>
            <id>claude-code-team</id>
            <name>Claude Code Agent Team</name>
            <organization>Anthropic</organization>
            <roles>
                <role>AI-Assisted Development</role>
                <role>Code Quality Automation</role>
            </roles>
        </developer>
    </developers>

    <contributors>
        <contributor>
            <name>YAWL Foundation Team</name>
            <organization>YAWL Foundation</organization>
            <roles>
                <role>Original Authors</role>
            </roles>
        </contributor>
    </contributors>

    <!-- DISTRIBUTION MANAGEMENT
         For deploying releases and snapshots to Maven Central via Sonatype OSSRH.
         Usage: mvn deploy -P release -->
    <distributionManagement>
        <snapshotRepository>
            <id>ossrh</id>
            <url>https://s01.oss.sonatype.org/content/repositories/snapshots</url>
        </snapshotRepository>
        <repository>
            <id>ossrh</id>
            <url>https://s01.oss.sonatype.org/service/local/staging/deploy/maven2/</url>
        </repository>
    </distributionManagement>

    <modules>
        <!-- Layer 0: Foundation (no YAWL deps, build in parallel) -->
        <module>yawl-utilities</module>
        <module>yawl-security</module>
        <module>yawl-graalpy</module>
        <module>yawl-benchmark</module>
        <module>yawl-graaljs</module>

        <!-- Layer 1: First consumers (build in parallel) -->
        <module>yawl-elements</module>
        <module>yawl-ggen</module>
        <module>yawl-graalwasm</module>
        <module>yawl-dmn</module>
        <module>yawl-data-modelling</module>

        <!-- Layer 2: Core engine -->
        <module>yawl-engine</module>

        <!-- Layer 3: Engine extension -->
        <module>yawl-stateless</module>

        <!-- Layer 4: Services (build in parallel after stateless) -->
        <module>yawl-authentication</module>
        <module>yawl-scheduling</module>
        <module>yawl-monitoring</module>
        <module>yawl-worklet</module>
        <module>yawl-control-panel</module>
        <module>yawl-integration</module>
        <module>yawl-webapps</module>

        <!-- Layer 5: Advanced services (build in parallel) -->
        <module>yawl-pi</module>
        <module>yawl-resourcing</module>

        <!-- Layer 6: Top-level application -->
        <module>yawl-mcp-a2a-app</module>
    </modules>

    <!-- PROPERTIES - single source of truth for all dependency versions.
         All child modules inherit these; never redeclare versions in children. -->
    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>
        <maven.compiler.release>25</maven.compiler.release>
        <!-- Skip tests by default for offline builds. Enable with -Dmaven.test.skip=false -->
        <maven.test.skip>true</maven.test.skip>
        <!-- Enable virtual threads and compact object headers -->
        <argLine>-XX:+UseCompactObjectHeaders -XX:+UseZGC</argLine>

        <!-- BOM versions - used as type=pom/scope=import in dependencyManagement -->
        <spring-boot.version>3.5.11</spring-boot.version>
        <jakarta-ee.version>10.0.0</jakarta-ee.version>
        <opentelemetry.version>1.59.0</opentelemetry.version>
        <opentelemetry-instrumentation.version>2.25.0</opentelemetry-instrumentation.version>
        <grpc.version>1.66.0</grpc.version>
        <resilience4j.version>2.3.0</resilience4j.version>
        <testcontainers.version>1.21.4</testcontainers.version>
        <jackson.version>2.19.4</jackson.version>

        <!-- Jakarta EE standalone artifacts (not covered by Jakarta EE BOM)   -->
        <jakarta.servlet.version>6.1.0</jakarta.servlet.version>
        <jakarta.annotation.version>3.0.0</jakarta.annotation.version>
        <jakarta.persistence.version>3.2.0</jakarta.persistence.version>
        <jakarta.xml.bind.version>4.0.5</jakarta.xml.bind.version>
        <jakarta.mail.version>2.1.5</jakarta.mail.version>
        <angus.mail.version>2.0.5</angus.mail.version>
        <jakarta.activation.version>2.1.4</jakarta.activation.version>
        <angus.activation.version>2.0.3</angus.activation.version>
        <kotlin.version>1.9.20</kotlin.version>
        <jakarta.faces.version>4.1.6</jakarta.faces.version>
        <jakarta.cdi.version>4.1.0</jakarta.cdi.version>
        <jakarta.ws.rs.version>4.0.0</jakarta.ws.rs.version>
        <jakarta.validation.version>3.1.1</jakarta.validation.version>
        <resilience4j.version>2.3.0</resilience4j.version>

        <!-- ORM                                                                -->
        <hibernate.version>6.6.43.Final</hibernate.version>

        <!-- Apache Commons                                                     -->
        <commons.lang3.version>3.20.0</commons.lang3.version>
        <commons.io.version>2.21.0</commons.io.version>
        <commons.codec.version>1.21.0</commons.codec.version>
        <commons.vfs2.version>2.10.0</commons.vfs2.version>
        <commons.collections4.version>4.5.0</commons.collections4.version>
        <commons.dbcp2.version>2.14.0</commons.dbcp2.version>
        <commons.fileupload.version>1.6.0</commons.fileupload.version>
        <commons.pool2.version>2.13.1</commons.pool2.version>
        <commons.text.version>1.15.0</commons.text.version>
        <commons.beanutils.version>1.11.0</commons.beanutils.version>

        <!-- Database drivers                                                   -->
        <h2.version>2.4.240</h2.version>
        <postgresql.version>42.7.10</postgresql.version>
        <mysql.version>9.6.0</mysql.version>
        <derby.version>10.17.1.0</derby.version>
        <hsqldb.version>2.7.4</hsqldb.version>
        <hikaricp.version>7.0.2</hikaricp.version>

        <!-- Logging                                                            -->
        <log4j.version>2.25.3</log4j.version>
        <slf4j.version>2.0.17</slf4j.version>
        <jboss.logging.version>3.6.2.Final</jboss.logging.version>

        <!-- JSON / serialisation                                               -->
        <gson.version>2.13.2</gson.version>
        <networknt.json.schema.validator.version>1.5.7</networknt.json.schema.validator.version>

        <!-- XML processing                                                     -->
        <jdom.version>2.0.6.1</jdom.version>
        <jaxen.version>1.2.0</jaxen.version>
        <saxon.version>12.9</saxon.version>
        <saaj.api.version>1.4.0</saaj.api.version>
        <saaj.impl.version>3.0.4</saaj.impl.version>

        <!-- HTTP clients                                                       -->
        <okhttp.version>5.3.2</okhttp.version>

        <!-- MCP / A2A integration SDKs                                        -->
        <mcp.version>1.0.0</mcp.version>
        <a2a.version>1.0.0.Alpha2</a2a.version>

        <!-- Security / auth                                                    -->
        <jjwt.version>0.13.0</jjwt.version>
        <microsoft.graph.version>6.62.0</microsoft.graph.version>
        <azure.identity.version>1.18.2</azure.identity.version>

        <!-- REST                                                               -->
        <jersey.version>4.0.2</jersey.version>

        <!-- Observability / metrics                                            -->
        <!-- Pinned at 1.15.9: Spring Boot 3.5.x BOM resolves this version;
             upgrading to 1.16.x requires Spring Boot 3.6.x. Update both together. -->
        <micrometer.version>1.15.9</micrometer.version>
        <opentelemetry.semconv.version>1.40.0</opentelemetry.semconv.version>

        <!-- GraalVM Polyglot / GraalPy                                         -->
        <graalvm.version>24.1.2</graalvm.version>

        <!-- Misc runtime support                                               -->
        <jspecify.version>1.0.0</jspecify.version>
        <jandex.version>3.5.3</jandex.version>
        <byte.buddy.version>1.15.11</byte.buddy.version>
        <classmate.version>1.7.3</classmate.version>
        <istack.version>4.2.0</istack.version>
        <jung.version>2.1.1</jung.version>
        <ant.version>1.10.15</ant.version>
        <simple-java-mail.version>8.12.6</simple-java-mail.version>

        <!-- Testing                                                            -->
        <junit.version>4.13.2</junit.version>
        <junit.jupiter.version>5.12.0</junit.jupiter.version>
        <junit.platform.version>1.12.0</junit.platform.version>
        <hamcrest.version>3.0</hamcrest.version>
        <quartz.version>2.5.2</quartz.version>
        <xmlunit.version>1.6</xmlunit.version>
        <jmh.version>1.37</jmh.version>

        <!-- Build plugins (pinned for reproducibility)                        -->
        <maven.compiler.plugin.version>3.14.0</maven.compiler.plugin.version>
        <maven.surefire.plugin.version>3.5.4</maven.surefire.plugin.version>
        <maven.failsafe.plugin.version>3.5.4</maven.failsafe.plugin.version>
        <maven.jar.plugin.version>3.5.0</maven.jar.plugin.version>
        <maven.war.plugin.version>3.4.0</maven.war.plugin.version>
        <maven.clean.plugin.version>3.2.0</maven.clean.plugin.version>
        <maven.resources.plugin.version>3.3.1</maven.resources.plugin.version>
        <maven.install.plugin.version>3.1.4</maven.install.plugin.version>
        <maven.deploy.plugin.version>3.1.5</maven.deploy.plugin.version>
        <maven.dependency.plugin.version>3.9.0</maven.dependency.plugin.version>
        <maven.enforcer.plugin.version>3.6.1</maven.enforcer.plugin.version>
        <versions.maven.plugin.version>2.18.0</versions.maven.plugin.version>
        <jacoco.plugin.version>0.8.14</jacoco.plugin.version>
        <jacoco.version>0.8.14</jacoco.version>
        <jacoco.skip>false</jacoco.skip>
        <jacoco.line.coverage>0.80</jacoco.line.coverage>
        <jacoco.branch.coverage>0.70</jacoco.branch.coverage>
        <maven.javadoc.version>3.11.1</maven.javadoc.version>
        <spotless.version>2.44.4</spotless.version>
        <spotbugs.plugin.version>4.9.3.2</spotbugs.plugin.version>
        <checkstyle.plugin.version>3.6.0</checkstyle.plugin.version>
        <pmd.plugin.version>3.26.0</pmd.plugin.version>
        <sonar.plugin.version>5.1.0.4882</sonar.plugin.version>
        <owasp.dependency.check.version>12.2.0</owasp.dependency.check.version>
        <cyclonedx.plugin.version>2.9.1</cyclonedx.plugin.version>
        <flyway.version>10.22.1</flyway.version>
        <nexus.staging.plugin.version>1.7.0</nexus.staging.plugin.version>
        <maven.source.plugin.version>3.3.1</maven.source.plugin.version>
        <maven.gpg.plugin.version>3.2.7</maven.gpg.plugin.version>
        <!-- Number of forked JVMs launched in parallel during surefire test runs.
             1.5C means 1.5 x CPU cores; balances JVM startup cost against
             parallelism gains. Each forked JVM runs tests concurrently via
             JUnit Platform parallel execution (see junit-platform.properties).
             Override per-environment: -Dsurefire.forkCount=2 -->
        <surefire.forkCount>1.5C</surefire.forkCount>
        <!-- threadCount is kept for legacy Surefire parallel mode fallback.
             JUnit 5 parallel execution is controlled by junit-platform.properties. -->
        <surefire.threadCount>4</surefire.threadCount>
        <!-- Failsafe (integration tests) runs sequentially by default for safety.
             Override with -P integration-parallel for forkCount=2C, reuseForks=false. -->
        <failsafe.forkCount>1</failsafe.forkCount>
        <failsafe.reuseForks>true</failsafe.reuseForks>
        <failsafe.threadCount>4</failsafe.threadCount>

        <!-- Cryptography (BouncyCastle)                                       -->
        <bouncycastle.version>1.81</bouncycastle.version>

        <!-- Static Analysis - Error Prone                                     -->
        <error.prone.version>2.38.0</error.prone.version>

        <!-- Static Analysis - NullAway with JSpecify                          -->
        <nullaway.version>0.12.3</nullaway.version>
    </properties>

    <repositories>
        <repository>
            <id>central</id>
            <url>https://repo.maven.apache.org/maven2</url>
            <releases>
                <enabled>true</enabled>
            </releases>
            <snapshots>
                <enabled>false</enabled>
            </snapshots>
        </repository>
    </repositories>

    <!-- DEPENDENCY MANAGEMENT
         Order of sections:
           1.  Jakarta EE
           2.  ORM
           3.  Apache Commons
           4.  Database drivers
           5.  Logging
           6.  JSON / serialisation
           7.  XML processing
           8.  HTTP clients
           9.  MCP / A2A
          10.  Security / auth
          11.  REST
          12.  Observability
          13.  Graph algorithms
          14.  Support libraries
          15.  Testing (always test scope)

         BOM STRATEGY NOTE:
           Six upstream BOMs exist for this project and would normally be
           imported here as type=pom/scope=import entries:
             - org.springframework.boot:spring-boot-dependencies
             - io.opentelemetry:opentelemetry-bom
             - io.opentelemetry.instrumentation:opentelemetry-instrumentation-bom-alpha
             - io.github.resilience4j:resilience4j-bom
             - org.testcontainers:testcontainers-bom
             - com.fasterxml.jackson:jackson-bom

           These BOM imports are defined in the 'online' build profile below.
           The default build uses explicit version pins (this section) for
           offline/air-gapped compatibility. When network is available, activate
           the online profile: mvn -P online clean compile
           The BOMs then take precedence and reduce duplication. -->
    <dependencyManagement>
        <dependencies>

            <!-- 0. YAWL INTERNAL MODULES                                      -->
            <dependency>
                <groupId>org.yawlfoundation</groupId>
                <artifactId>yawl-utilities</artifactId>
                <version>${project.version}</version>
            </dependency>
            <dependency>
                <groupId>org.yawlfoundation</groupId>
                <artifactId>yawl-elements</artifactId>
                <version>${project.version}</version>
            </dependency>
            <dependency>
                <groupId>org.yawlfoundation</groupId>
                <artifactId>yawl-engine</artifactId>
                <version>${project.version}</version>
            </dependency>
            <dependency>
                <groupId>org.yawlfoundation</groupId>
                <artifactId>yawl-authentication</artifactId>
                <version>${project.version}</version>
            </dependency>
            <dependency>
                <groupId>org.yawlfoundation</groupId>
                <artifactId>yawl-stateless</artifactId>
                <version>${project.version}</version>
            </dependency>
            <dependency>
                <groupId>org.yawlfoundation</groupId>
                <artifactId>yawl-resourcing</artifactId>
                <version>${project.version}</version>
            </dependency>
            <dependency>
                <groupId>org.yawlfoundation</groupId>
                <artifactId>yawl-worklet</artifactId>
                <version>${project.version}</version>
            </dependency>
            <dependency>
                <groupId>org.yawlfoundation</groupId>
                <artifactId>yawl-scheduling</artifactId>
                <version>${project.version}</version>
            </dependency>
            <dependency>
                <groupId>org.yawlfoundation</groupId>
                <artifactId>yawl-security</artifactId>
                <version>${project.version}</version>
            </dependency>
            <dependency>
                <groupId>org.yawlfoundation</groupId>
                <artifactId>yawl-integration</artifactId>
                <version>${project.version}</version>
            </dependency>
            <dependency>
                <groupId>org.yawlfoundation</groupId>
                <artifactId>yawl-ggen</artifactId>
                <version>${project.version}</version>
            </dependency>
            <dependency>
                <groupId>org.yawlfoundation</groupId>
                <artifactId>yawl-pi</artifactId>
                <version>${project.version}</version>
            </dependency>
            <dependency>
                <groupId>org.yawlfoundation</groupId>
                <artifactId>yawl-monitoring</artifactId>
                <version>${project.version}</version>
            </dependency>
            <dependency>
                <groupId>org.yawlfoundation</groupId>
                <artifactId>yawl-mcp-a2a-app</artifactId>
                <version>${project.version}</version>
            </dependency>
            <dependency>
                <groupId>org.yawlfoundation</groupId>
                <artifactId>yawl-graaljs</artifactId>
                <version>${project.version}</version>
            </dependency>
            <dependency>
                <groupId>org.yawlfoundation</groupId>
                <artifactId>yawl-graalwasm</artifactId>
                <version>${project.version}</version>
            </dependency>
            <dependency>
                <groupId>org.yawlfoundation</groupId>
                <artifactId>yawl-dmn</artifactId>
                <version>${project.version}</version>
            </dependency>
            <dependency>
                <groupId>org.yawlfoundation</groupId>
                <artifactId>yawl-data-modelling</artifactId>
                <version>${project.version}</version>
            </dependency>

            <!-- 0. SPRING BOOT STARTERS                                       -->
            <!--    Explicit entries provide offline fallback when the Spring   -->
            <!--    Boot BOM (online profile) is not active.                   -->

            <dependency>
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-starter</artifactId>
                <version>${spring-boot.version}</version>
            </dependency>
            <dependency>
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-starter-web</artifactId>
                <version>${spring-boot.version}</version>
            </dependency>
            <dependency>
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-starter-actuator</artifactId>
                <version>${spring-boot.version}</version>
            </dependency>
            <dependency>
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-starter-test</artifactId>
                <version>${spring-boot.version}</version>
                <scope>test</scope>
            </dependency>
            <dependency>
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-autoconfigure</artifactId>
                <version>${spring-boot.version}</version>
            </dependency>
            <dependency>
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-starter-validation</artifactId>
                <version>${spring-boot.version}</version>
            </dependency>
            <dependency>
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-starter-aop</artifactId>
                <version>${spring-boot.version}</version>
            </dependency>
            <dependency>
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-configuration-processor</artifactId>
                <version>${spring-boot.version}</version>
                <optional>true</optional>
            </dependency>

            <!-- 1. JAKARTA EE                                                  -->

            <dependency>
                <groupId>jakarta.servlet</groupId>
                <artifactId>jakarta.servlet-api</artifactId>
                <version>${jakarta.servlet.version}</version>
                <scope>provided</scope>
            </dependency>
            <dependency>
                <groupId>jakarta.annotation</groupId>
                <artifactId>jakarta.annotation-api</artifactId>
                <version>${jakarta.annotation.version}</version>
            </dependency>
            <dependency>
                <groupId>jakarta.persistence</groupId>
                <artifactId>jakarta.persistence-api</artifactId>
                <version>${jakarta.persistence.version}</version>
            </dependency>
            <dependency>
                <groupId>jakarta.xml.bind</groupId>
                <artifactId>jakarta.xml.bind-api</artifactId>
                <version>${jakarta.xml.bind.version}</version>
            </dependency>
            <dependency>
                <groupId>com.sun.xml.bind</groupId>
                <artifactId>jaxb-impl</artifactId>
                <version>${jakarta.xml.bind.version}</version>
            </dependency>
            <dependency>
                <groupId>jakarta.mail</groupId>
                <artifactId>jakarta.mail-api</artifactId>
                <version>${jakarta.mail.version}</version>
            </dependency>
            <dependency>
                <groupId>org.eclipse.angus</groupId>
                <artifactId>angus-mail</artifactId>
                <version>${angus.mail.version}</version>
            </dependency>
            <dependency>
                <groupId>jakarta.activation</groupId>
                <artifactId>jakarta.activation-api</artifactId>
                <version>${jakarta.activation.version}</version>
            </dependency>
            <dependency>
                <groupId>org.eclipse.angus</groupId>
                <artifactId>angus-activation</artifactId>
                <version>${angus.activation.version}</version>
            </dependency>
            <dependency>
                <groupId>jakarta.faces</groupId>
                <artifactId>jakarta.faces-api</artifactId>
                <version>${jakarta.faces.version}</version>
            </dependency>
            <dependency>
                <groupId>org.jetbrains.kotlin</groupId>
                <artifactId>kotlin-stdlib</artifactId>
                <version>${kotlin.version}</version>
            </dependency>
            <dependency>
                <groupId>org.jetbrains.kotlin</groupId>
                <artifactId>kotlin-stdlib-jdk7</artifactId>
                <version>${kotlin.version}</version>
            </dependency>
            <dependency>
                <groupId>org.jetbrains.kotlin</groupId>
                <artifactId>kotlin-stdlib-jdk8</artifactId>
                <version>${kotlin.version}</version>
            </dependency>
            <dependency>
                <groupId>org.jetbrains.kotlin</groupId>
                <artifactId>kotlin-stdlib-common</artifactId>
                <version>${kotlin.version}</version>
            </dependency>
            <dependency>
                <groupId>org.glassfish</groupId>
                <artifactId>jakarta.faces</artifactId>
                <version>${jakarta.faces.version}</version>
            </dependency>
            <dependency>
                <groupId>jakarta.enterprise</groupId>
                <artifactId>jakarta.enterprise.cdi-api</artifactId>
                <version>${jakarta.cdi.version}</version>
            </dependency>
            <dependency>
                <groupId>jakarta.validation</groupId>
                <artifactId>jakarta.validation-api</artifactId>
                <version>${jakarta.validation.version}</version>
            </dependency>
            <dependency>
                <groupId>jakarta.ws.rs</groupId>
                <artifactId>jakarta.ws.rs-api</artifactId>
                <version>${jakarta.ws.rs.version}</version>
                <scope>provided</scope>
            </dependency>

            <!-- 3. ORM                                                         -->

            <dependency>
                <groupId>org.hibernate.orm</groupId>
                <artifactId>hibernate-core</artifactId>
                <version>${hibernate.version}</version>
            </dependency>
            <dependency>
                <groupId>org.hibernate.orm</groupId>
                <artifactId>hibernate-hikaricp</artifactId>
                <version>${hibernate.version}</version>
            </dependency>
            <dependency>
                <groupId>org.hibernate.orm</groupId>
                <artifactId>hibernate-jcache</artifactId>
                <version>${hibernate.version}</version>
            </dependency>

            <!-- 4. APACHE COMMONS                                              -->

            <!-- commons-lang3 uses org.apache.commons groupId -->
            <dependency>
                <groupId>org.apache.commons</groupId>
                <artifactId>commons-lang3</artifactId>
                <version>${commons.lang3.version}</version>
            </dependency>
            <!-- commons-io: legacy groupId still used by many transitive deps -->
            <dependency>
                <groupId>commons-io</groupId>
                <artifactId>commons-io</artifactId>
                <version>${commons.io.version}</version>
            </dependency>
            <!-- commons-codec: legacy groupId still used by many transitive deps -->
            <dependency>
                <groupId>commons-codec</groupId>
                <artifactId>commons-codec</artifactId>
                <version>${commons.codec.version}</version>
            </dependency>
            <dependency>
                <groupId>org.apache.commons</groupId>
                <artifactId>commons-codec</artifactId>
                <version>${commons.codec.version}</version>
            </dependency>
            <dependency>
                <groupId>org.apache.commons</groupId>
                <artifactId>commons-vfs2</artifactId>
                <version>${commons.vfs2.version}</version>
            </dependency>
            <dependency>
                <groupId>org.apache.commons</groupId>
                <artifactId>commons-collections4</artifactId>
                <version>${commons.collections4.version}</version>
            </dependency>
            <dependency>
                <groupId>org.apache.commons</groupId>
                <artifactId>commons-dbcp2</artifactId>
                <version>${commons.dbcp2.version}</version>
            </dependency>
            <dependency>
                <groupId>commons-fileupload</groupId>
                <artifactId>commons-fileupload</artifactId>
                <version>${commons.fileupload.version}</version>
            </dependency>
            <dependency>
                <groupId>org.apache.commons</groupId>
                <artifactId>commons-pool2</artifactId>
                <version>${commons.pool2.version}</version>
            </dependency>
            <dependency>
                <groupId>org.apache.commons</groupId>
                <artifactId>commons-text</artifactId>
                <version>${commons.text.version}</version>
            </dependency>
            <dependency>
                <groupId>commons-beanutils</groupId>
                <artifactId>commons-beanutils</artifactId>
                <version>${commons.beanutils.version}</version>
            </dependency>

            <!-- 5. DATABASE DRIVERS                                            -->

            <dependency>
                <groupId>com.h2database</groupId>
                <artifactId>h2</artifactId>
                <version>${h2.version}</version>
            </dependency>
            <dependency>
                <groupId>org.postgresql</groupId>
                <artifactId>postgresql</artifactId>
                <version>${postgresql.version}</version>
            </dependency>
            <dependency>
                <groupId>com.mysql</groupId>
                <artifactId>mysql-connector-j</artifactId>
                <version>${mysql.version}</version>
            </dependency>
            <dependency>
                <groupId>org.apache.derby</groupId>
                <artifactId>derbyclient</artifactId>
                <version>${derby.version}</version>
            </dependency>
            <dependency>
                <groupId>org.hsqldb</groupId>
                <artifactId>hsqldb</artifactId>
                <version>${hsqldb.version}</version>
            </dependency>
            <dependency>
                <groupId>com.zaxxer</groupId>
                <artifactId>HikariCP</artifactId>
                <version>${hikaricp.version}</version>
            </dependency>

            <!-- 6. LOGGING                                                     -->

            <dependency>
                <groupId>org.apache.logging.log4j</groupId>
                <artifactId>log4j-api</artifactId>
                <version>${log4j.version}</version>
            </dependency>
            <dependency>
                <groupId>org.apache.logging.log4j</groupId>
                <artifactId>log4j-core</artifactId>
                <version>${log4j.version}</version>
            </dependency>
            <dependency>
                <groupId>org.apache.logging.log4j</groupId>
                <artifactId>log4j-slf4j2-impl</artifactId>
                <version>${log4j.version}</version>
            </dependency>
            <!-- Exclude log4j-to-slf4j when it appears as a transitive dep
                 (Spring Boot pulls it in; it conflicts with log4j-slf4j2-impl).
                 Each module that needs this exclusion should declare it on the
                 offending transitive dependency. The version entry here ensures
                 the enforcer's requireUpperBoundDeps rule is satisfied. -->
            <dependency>
                <groupId>org.apache.logging.log4j</groupId>
                <artifactId>log4j-to-slf4j</artifactId>
                <version>${log4j.version}</version>
            </dependency>
            <dependency>
                <groupId>org.slf4j</groupId>
                <artifactId>slf4j-api</artifactId>
                <version>${slf4j.version}</version>
            </dependency>
            <dependency>
                <groupId>org.jboss.logging</groupId>
                <artifactId>jboss-logging</artifactId>
                <version>${jboss.logging.version}</version>
            </dependency>


            <!-- ============================================================== -->
            <!-- 7. JSON / SERIALISATION                                        -->
            <!--    Explicit entries provide offline fallback when the Jackson  -->
            <!--    BOM (online profile) is not active.                        -->

            <dependency>
                <groupId>com.fasterxml.jackson.core</groupId>
                <artifactId>jackson-databind</artifactId>
                <version>${jackson.version}</version>
            </dependency>
            <dependency>
                <groupId>com.fasterxml.jackson.core</groupId>
                <artifactId>jackson-core</artifactId>
                <version>${jackson.version}</version>
            </dependency>
            <dependency>
                <groupId>com.fasterxml.jackson.core</groupId>
                <artifactId>jackson-annotations</artifactId>
                <version>${jackson.version}</version>
            </dependency>
            <dependency>
                <groupId>com.fasterxml.jackson.datatype</groupId>
                <artifactId>jackson-datatype-jdk8</artifactId>
                <version>${jackson.version}</version>
            </dependency>
            <dependency>
                <groupId>com.fasterxml.jackson.datatype</groupId>
                <artifactId>jackson-datatype-jsr310</artifactId>
                <version>${jackson.version}</version>
            </dependency>
            <dependency>
                <groupId>com.fasterxml.jackson.module</groupId>
                <artifactId>jackson-module-parameter-names</artifactId>
                <version>${jackson.version}</version>
            </dependency>
            <dependency>
                <groupId>com.fasterxml.jackson.dataformat</groupId>
                <artifactId>jackson-dataformat-yaml</artifactId>
                <version>${jackson.version}</version>
            </dependency>
            <dependency>
                <groupId>com.google.code.gson</groupId>
                <artifactId>gson</artifactId>
                <version>${gson.version}</version>
            </dependency>

            <!-- JSON Schema Validator - NetworkNT (recommended for Java 8+) -->
            <dependency>
                <groupId>com.networknt</groupId>
                <artifactId>json-schema-validator</artifactId>
                <version>${networknt.json.schema.validator.version}</version>
            </dependency>

            <!-- 8. XML PROCESSING                                              -->

            <dependency>
                <groupId>org.jdom</groupId>
                <artifactId>jdom2</artifactId>
                <version>${jdom.version}</version>
            </dependency>
            <dependency>
                <groupId>jaxen</groupId>
                <artifactId>jaxen</artifactId>
                <version>${jaxen.version}</version>
            </dependency>
            <dependency>
                <groupId>net.sf.saxon</groupId>
                <artifactId>Saxon-HE</artifactId>
                <version>${saxon.version}</version>
            </dependency>
            <!-- SOAP API - javax namespace retained for backwards compatibility -->
            <dependency>
                <groupId>javax.xml.soap</groupId>
                <artifactId>javax.xml.soap-api</artifactId>
                <version>${saaj.api.version}</version>
            </dependency>
            <dependency>
                <groupId>com.sun.xml.messaging.saaj</groupId>
                <artifactId>saaj-impl</artifactId>
                <version>${saaj.impl.version}</version>
            </dependency>

            <!-- 9. HTTP CLIENTS                                                -->

            <dependency>
                <groupId>com.squareup.okhttp3</groupId>
                <artifactId>okhttp</artifactId>
                <version>${okhttp.version}</version>
            </dependency>

            <!-- 10. MCP / A2A INTEGRATION SDKs                                -->
            <!--     Both SDKs are installed from local JARs (not Maven         -->
            <!--     Central). Versions are pinned here so child modules do     -->
            <!--     not repeat them.                                           -->

            <dependency>
                <groupId>io.modelcontextprotocol.sdk</groupId>
                <artifactId>mcp</artifactId>
                <version>${mcp.version}</version>
            </dependency>
            <dependency>
                <groupId>io.modelcontextprotocol.sdk</groupId>
                <artifactId>mcp-core</artifactId>
                <version>${mcp.version}</version>
            </dependency>
            <dependency>
                <groupId>io.modelcontextprotocol.sdk</groupId>
                <artifactId>mcp-json-jackson2</artifactId>
                <version>${mcp.version}</version>
            </dependency>
            <!-- Spring adapters max out at 0.18.1 on Maven Central; no 1.0.0 release -->
            <dependency>
                <groupId>io.modelcontextprotocol.sdk</groupId>
                <artifactId>mcp-spring-webmvc</artifactId>
                <version>0.18.1</version>
            </dependency>
            <dependency>
                <groupId>io.modelcontextprotocol.sdk</groupId>
                <artifactId>mcp-spring-webflux</artifactId>
                <version>0.18.1</version>
            </dependency>
            <dependency>
                <groupId>io.github.a2asdk</groupId>
                <artifactId>a2a-java-sdk-spec</artifactId>
                <version>${a2a.version}</version>
            </dependency>
            <dependency>
                <groupId>io.github.a2asdk</groupId>
                <artifactId>a2a-java-sdk-common</artifactId>
                <version>${a2a.version}</version>
            </dependency>
            <dependency>
                <groupId>io.github.a2asdk</groupId>
                <artifactId>a2a-java-sdk-server-common</artifactId>
                <version>${a2a.version}</version>
            </dependency>
            <dependency>
                <groupId>io.github.a2asdk</groupId>
                <artifactId>a2a-java-sdk-transport-rest</artifactId>
                <version>${a2a.version}</version>
            </dependency>
            <dependency>
                <groupId>io.github.a2asdk</groupId>
                <artifactId>a2a-java-sdk-http-client</artifactId>
                <version>${a2a.version}</version>
            </dependency>
            <dependency>
                <groupId>io.github.a2asdk</groupId>
                <artifactId>a2a-java-sdk-client</artifactId>
                <version>${a2a.version}</version>
            </dependency>
            <dependency>
                <groupId>io.github.a2asdk</groupId>
                <artifactId>a2a-java-sdk-client-transport-jsonrpc</artifactId>
                <version>${a2a.version}</version>
            </dependency>
            <dependency>
                <groupId>io.github.a2asdk</groupId>
                <artifactId>a2a-java-sdk-client-transport-rest</artifactId>
                <version>${a2a.version}</version>
            </dependency>
            <dependency>
                <groupId>io.github.a2asdk</groupId>
                <artifactId>a2a-java-sdk-client-transport-grpc</artifactId>
                <version>${a2a.version}</version>
            </dependency>
            <dependency>
                <groupId>io.github.a2asdk</groupId>
                <artifactId>a2a-java-sdk-client-transport-spi</artifactId>
                <version>${a2a.version}</version>
            </dependency>
            <dependency>
                <groupId>io.github.a2asdk</groupId>
                <artifactId>a2a-java-sdk-jsonrpc-common</artifactId>
                <version>${a2a.version}</version>
            </dependency>
            <dependency>
                <groupId>io.github.a2asdk</groupId>
                <artifactId>a2a-java-sdk-transport-jsonrpc</artifactId>
                <version>${a2a.version}</version>
            </dependency>

            <!-- 11. SECURITY / AUTH                                            -->

            <dependency>
                <groupId>io.jsonwebtoken</groupId>
                <artifactId>jjwt-api</artifactId>
                <version>${jjwt.version}</version>
            </dependency>
            <dependency>
                <groupId>io.jsonwebtoken</groupId>
                <artifactId>jjwt-impl</artifactId>
                <version>${jjwt.version}</version>
                <scope>runtime</scope>
            </dependency>
            <dependency>
                <groupId>io.jsonwebtoken</groupId>
                <artifactId>jjwt-jackson</artifactId>
                <version>${jjwt.version}</version>
                <scope>runtime</scope>
            </dependency>
            <dependency>
                <groupId>com.microsoft.graph</groupId>
                <artifactId>microsoft-graph</artifactId>
                <version>${microsoft.graph.version}</version>
            </dependency>
            <dependency>
                <groupId>com.azure</groupId>
                <artifactId>azure-identity</artifactId>
                <version>${azure.identity.version}</version>
            </dependency>

            <!-- BouncyCastle cryptography (PKI, digital signatures) -->
            <dependency>
                <groupId>org.bouncycastle</groupId>
                <artifactId>bcprov-jdk18on</artifactId>
                <version>${bouncycastle.version}</version>
            </dependency>
            <dependency>
                <groupId>org.bouncycastle</groupId>
                <artifactId>bcmail-jdk18on</artifactId>
                <version>${bouncycastle.version}</version>
            </dependency>
            <dependency>
                <groupId>org.bouncycastle</groupId>
                <artifactId>bcpkix-jdk18on</artifactId>
                <version>${bouncycastle.version}</version>
            </dependency>

            <!-- 12. REST                                                       -->

            <dependency>
                <groupId>org.glassfish.jersey.core</groupId>
                <artifactId>jersey-server</artifactId>
                <version>${jersey.version}</version>
            </dependency>
            <dependency>
                <groupId>org.glassfish.jersey.core</groupId>
                <artifactId>jersey-client</artifactId>
                <version>${jersey.version}</version>
            </dependency>
            <dependency>
                <groupId>org.glassfish.jersey.containers</groupId>
                <artifactId>jersey-container-servlet</artifactId>
                <version>${jersey.version}</version>
            </dependency>
            <dependency>
                <groupId>org.glassfish.jersey.inject</groupId>
                <artifactId>jersey-hk2</artifactId>
                <version>${jersey.version}</version>
            </dependency>

            <!-- 13. OBSERVABILITY / METRICS                                    -->
            <!--     OTel artifacts version-managed by opentelemetry-bom above. -->
            <!--     Semconv and Micrometer are not in that BOM.               -->

            <!-- OpenTelemetry Core - explicit versions for offline builds -->
            <dependency>
                <groupId>io.opentelemetry</groupId>
                <artifactId>opentelemetry-api</artifactId>
                <version>${opentelemetry.version}</version>
            </dependency>
            <dependency>
                <groupId>io.opentelemetry</groupId>
                <artifactId>opentelemetry-sdk</artifactId>
                <version>${opentelemetry.version}</version>
            </dependency>
            <dependency>
                <groupId>io.opentelemetry</groupId>
                <artifactId>opentelemetry-sdk-trace</artifactId>
                <version>${opentelemetry.version}</version>
            </dependency>
            <dependency>
                <groupId>io.opentelemetry</groupId>
                <artifactId>opentelemetry-exporter-otlp</artifactId>
                <version>${opentelemetry.version}</version>
            </dependency>
            <dependency>
                <groupId>io.opentelemetry</groupId>
                <artifactId>opentelemetry-exporter-logging</artifactId>
                <version>${opentelemetry.version}</version>
            </dependency>
            <dependency>
                <groupId>io.opentelemetry.instrumentation</groupId>
                <artifactId>opentelemetry-instrumentation-api</artifactId>
                <version>${opentelemetry-instrumentation.version}</version>
            </dependency>

            <dependency>
                <groupId>io.opentelemetry.semconv</groupId>
                <artifactId>opentelemetry-semconv</artifactId>
                <version>${opentelemetry.semconv.version}</version>
            </dependency>
            <dependency>
                <groupId>io.opentelemetry.semconv</groupId>
                <artifactId>opentelemetry-semconv-incubating</artifactId>
                <version>${opentelemetry.semconv.version}-alpha</version>
            </dependency>
            <dependency>
                <groupId>io.opentelemetry</groupId>
                <artifactId>opentelemetry-exporter-prometheus</artifactId>
                <version>${opentelemetry.version}-alpha</version>
            </dependency>
            <dependency>
                <groupId>io.micrometer</groupId>
                <artifactId>micrometer-core</artifactId>
                <version>${micrometer.version}</version>
            </dependency>
            <dependency>
                <groupId>io.micrometer</groupId>
                <artifactId>micrometer-registry-prometheus</artifactId>
                <version>${micrometer.version}</version>
            </dependency>

            <!-- Resilience4j modules for retry and circuit breaker -->
            <dependency>
                <groupId>io.github.resilience4j</groupId>
                <artifactId>resilience4j-retry</artifactId>
                <version>${resilience4j.version}</version>
                <exclusions>
                    <!-- Exclude old SLF4J versions to prevent conflicts -->
                    <exclusion>
                        <groupId>org.slf4j</groupId>
                        <artifactId>slf4j-api</artifactId>
                    </exclusion>
                </exclusions>
            </dependency>
            <dependency>
                <groupId>io.github.resilience4j</groupId>
                <artifactId>resilience4j-circuitbreaker</artifactId>
                <version>${resilience4j.version}</version>
                <exclusions>
                    <!-- Exclude old SLF4J versions to prevent conflicts -->
                    <exclusion>
                        <groupId>org.slf4j</groupId>
                        <artifactId>slf4j-api</artifactId>
                    </exclusion>
                </exclusions>
            </dependency>
            <dependency>
                <groupId>io.github.resilience4j</groupId>
                <artifactId>resilience4j-core</artifactId>
                <version>${resilience4j.version}</version>
                <exclusions>
                    <!-- Exclude old SLF4J versions to prevent conflicts -->
                    <exclusion>
                        <groupId>org.slf4j</groupId>
                        <artifactId>slf4j-api</artifactId>
                    </exclusion>
                </exclusions>
            </dependency>
            <dependency>
                <groupId>io.github.resilience4j</groupId>
                <artifactId>resilience4j-micrometer</artifactId>
                <version>${resilience4j.version}</version>
                <exclusions>
                    <!-- Exclude old SLF4J versions to prevent conflicts -->
                    <exclusion>
                        <groupId>org.slf4j</groupId>
                        <artifactId>slf4j-api</artifactId>
                    </exclusion>
                </exclusions>
            </dependency>
            <dependency>
                <groupId>io.github.resilience4j</groupId>
                <artifactId>resilience4j-bulkhead</artifactId>
                <version>${resilience4j.version}</version>
                <exclusions>
                    <!-- Exclude old SLF4J versions to prevent conflicts -->
                    <exclusion>
                        <groupId>org.slf4j</groupId>
                        <artifactId>slf4j-api</artifactId>
                    </exclusion>
                </exclusions>
            </dependency>
            <dependency>
                <groupId>io.github.resilience4j</groupId>
                <artifactId>resilience4j-ratelimiter</artifactId>
                <version>${resilience4j.version}</version>
                <exclusions>
                    <!-- Exclude old SLF4J versions to prevent conflicts -->
                    <exclusion>
                        <groupId>org.slf4j</groupId>
                        <artifactId>slf4j-api</artifactId>
                    </exclusion>
                </exclusions>
            </dependency>

            <!-- 14. GRAPH ALGORITHMS                                           -->

            <dependency>
                <groupId>net.sf.jung</groupId>
                <artifactId>jung-api</artifactId>
                <version>${jung.version}</version>
            </dependency>
            <dependency>
                <groupId>net.sf.jung</groupId>
                <artifactId>jung-graph-impl</artifactId>
                <version>${jung.version}</version>
            </dependency>
            <dependency>
                <groupId>net.sf.jung</groupId>
                <artifactId>jung-algorithms</artifactId>
                <version>${jung.version}</version>
            </dependency>

            <!-- 15. SUPPORT LIBRARIES                                          -->

            <dependency>
                <groupId>org.jspecify</groupId>
                <artifactId>jspecify</artifactId>
                <version>${jspecify.version}</version>
            </dependency>
            <dependency>
                <groupId>io.smallrye</groupId>
                <artifactId>jandex</artifactId>
                <version>${jandex.version}</version>
            </dependency>
            <dependency>
                <groupId>net.bytebuddy</groupId>
                <artifactId>byte-buddy</artifactId>
                <version>${byte.buddy.version}</version>
            </dependency>
            <dependency>
                <groupId>com.fasterxml</groupId>
                <artifactId>classmate</artifactId>
                <version>${classmate.version}</version>
            </dependency>
            <dependency>
                <groupId>com.sun.istack</groupId>
                <artifactId>istack-commons-runtime</artifactId>
                <version>${istack.version}</version>
            </dependency>
            <dependency>
                <groupId>org.simplejavamail</groupId>
                <artifactId>simple-java-mail</artifactId>
                <version>${simple-java-mail.version}</version>
            </dependency>
            <dependency>
                <groupId>org.apache.ant</groupId>
                <artifactId>ant</artifactId>
                <version>${ant.version}</version>
            </dependency>

            <!-- 16. TESTING  (all test-scoped by default)                     -->

            <!-- JUnit 4 - legacy tests (still widely used in the codebase) -->
            <dependency>
                <groupId>junit</groupId>
                <artifactId>junit</artifactId>
                <version>${junit.version}</version>
                <scope>test</scope>
            </dependency>

            <!-- JUnit 5 Jupiter -->
            <dependency>
                <groupId>org.junit.jupiter</groupId>
                <artifactId>junit-jupiter-api</artifactId>
                <version>${junit.jupiter.version}</version>
                <scope>test</scope>
            </dependency>
            <dependency>
                <groupId>org.junit.jupiter</groupId>
                <artifactId>junit-jupiter-engine</artifactId>
                <version>${junit.jupiter.version}</version>
                <scope>test</scope>
            </dependency>
            <dependency>
                <groupId>org.junit.jupiter</groupId>
                <artifactId>junit-jupiter-params</artifactId>
                <version>${junit.jupiter.version}</version>
                <scope>test</scope>
            </dependency>

            <!-- JUnit Platform -->
            <dependency>
                <groupId>org.junit.platform</groupId>
                <artifactId>junit-platform-suite</artifactId>
                <version>${junit.platform.version}</version>
                <scope>test</scope>
            </dependency>
            <dependency>
                <groupId>org.junit.platform</groupId>
                <artifactId>junit-platform-suite-api</artifactId>
                <version>${junit.platform.version}</version>
                <scope>test</scope>
            </dependency>
            <dependency>
                <groupId>org.junit.platform</groupId>
                <artifactId>junit-platform-suite-engine</artifactId>
                <version>${junit.platform.version}</version>
                <scope>test</scope>
            </dependency>
            <dependency>
                <groupId>org.junit.platform</groupId>
                <artifactId>junit-platform-launcher</artifactId>
                <version>${junit.platform.version}</version>
                <scope>test</scope>
            </dependency>
            <dependency>
                <groupId>org.junit.vintage</groupId>
                <artifactId>junit-vintage-engine</artifactId>
                <version>${junit.jupiter.version}</version>
                <scope>test</scope>
            </dependency>

            <!-- Hamcrest matchers -->
            <dependency>
                <groupId>org.hamcrest</groupId>
                <artifactId>hamcrest-core</artifactId>
                <version>${hamcrest.version}</version>
                <scope>test</scope>
            </dependency>

            <!-- Quartz Scheduler -->
            <dependency>
                <groupId>org.quartz-scheduler</groupId>
                <artifactId>quartz</artifactId>
                <version>${quartz.version}</version>
            </dependency>

            <!-- XMLUnit for XML comparison in tests -->
            <dependency>
                <groupId>xmlunit</groupId>
                <artifactId>xmlunit</artifactId>
                <version>${xmlunit.version}</version>
                <scope>test</scope>
            </dependency>

            <!-- JMH microbenchmarks -->
            <dependency>
                <groupId>org.openjdk.jmh</groupId>
                <artifactId>jmh-core</artifactId>
                <version>${jmh.version}</version>
                <scope>test</scope>
            </dependency>
            <dependency>
                <groupId>org.openjdk.jmh</groupId>
                <artifactId>jmh-generator-annprocess</artifactId>
                <version>${jmh.version}</version>
                <scope>test</scope>
            </dependency>

            <!-- Testcontainers explicit versions (BOM import moved to docker profile
                 to avoid offline resolution failures; these pins are sufficient) -->
            <dependency>
                <groupId>org.testcontainers</groupId>
                <artifactId>testcontainers</artifactId>
                <version>${testcontainers.version}</version>
                <scope>test</scope>
            </dependency>
            <dependency>
                <groupId>org.testcontainers</groupId>
                <artifactId>junit-jupiter</artifactId>
                <version>${testcontainers.version}</version>
                <scope>test</scope>
            </dependency>
            <dependency>
                <groupId>org.testcontainers</groupId>
                <artifactId>postgresql</artifactId>
                <version>${testcontainers.version}</version>
                <scope>test</scope>
            </dependency>
            <dependency>
                <groupId>org.testcontainers</groupId>
                <artifactId>mysql</artifactId>
                <version>${testcontainers.version}</version>
                <scope>test</scope>
            </dependency>

            <!-- GraalVM Polyglot API - compile-time API for multi-language execution -->
            <!-- GraalPy runtime requires GraalVM JDK or standalone launcher at runtime -->
            <dependency>
                <groupId>org.graalvm.polyglot</groupId>
                <artifactId>polyglot</artifactId>
                <version>${graalvm.version}</version>
            </dependency>
            <dependency>
                <groupId>org.graalvm.sdk</groupId>
                <artifactId>nativeimage</artifactId>
                <version>${graalvm.version}</version>
            </dependency>
            <!-- GraalJS language implementation - pulls JS runtime JARs -->
            <dependency>
                <groupId>org.graalvm.polyglot</groupId>
                <artifactId>js</artifactId>
                <version>${graalvm.version}</version>
                <type>pom</type>
            </dependency>
            <!-- GraalWasm language implementation - pulls Wasm runtime JARs -->
            <dependency>
                <groupId>org.graalvm.polyglot</groupId>
                <artifactId>wasm</artifactId>
                <version>${graalvm.version}</version>
                <type>pom</type>
            </dependency>

        </dependencies>
    </dependencyManagement>

    <!-- DIRECT DEPENDENCIES
         The parent POM does NOT declare direct compile-scope dependencies.
         Each child module declares exactly what it needs; this avoids
         putting every library on every module's classpath and keeps
         dependency graphs clean and auditable.

         The only direct parent-level dependencies are universal concerns
         that literally every module requires: compilation annotations and
         logging API. -->
    <dependencies>
        <!-- SLF4J API - logging facade required by every module -->
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>${slf4j.version}</version>
        </dependency>

        <!-- JSpecify null-safety annotations - compile-time only, zero runtime cost -->
        <dependency>
            <groupId>org.jspecify</groupId>
            <artifactId>jspecify</artifactId>
            <version>${jspecify.version}</version>
        </dependency>

        <!-- OpenTelemetry API for observability classes in src/ -->
        <dependency>
            <groupId>io.opentelemetry</groupId>
            <artifactId>opentelemetry-api</artifactId>
        </dependency>

        <!-- Resilience4j for resilience patterns -->
        <dependency>
            <groupId>io.github.resilience4j</groupId>
            <artifactId>resilience4j-circuitbreaker</artifactId>
            <exclusions>
                <!-- Exclude old SLF4J versions to prevent conflicts -->
                <exclusion>
                    <groupId>org.slf4j</groupId>
                    <artifactId>slf4j-api</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>io.github.resilience4j</groupId>
            <artifactId>resilience4j-retry</artifactId>
            <exclusions>
                <!-- Exclude old SLF4J versions to prevent conflicts -->
                <exclusion>
                    <groupId>org.slf4j</groupId>
                    <artifactId>slf4j-api</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>io.github.resilience4j</groupId>
            <artifactId>resilience4j-bulkhead</artifactId>
            <exclusions>
                <!-- Exclude old SLF4J versions to prevent conflicts -->
                <exclusion>
                    <groupId>org.slf4j</groupId>
                    <artifactId>slf4j-api</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>io.github.resilience4j</groupId>
            <artifactId>resilience4j-ratelimiter</artifactId>
            <exclusions>
                <!-- Exclude old SLF4J versions to prevent conflicts -->
                <exclusion>
                    <groupId>org.slf4j</groupId>
                    <artifactId>slf4j-api</artifactId>
                </exclusion>
            </exclusions>
        </dependency>

        <!-- Gson - JSON serialisation used by ggen BuildReceipt and JSONL receipt chain -->
        <dependency>
            <groupId>com.google.code.gson</groupId>
            <artifactId>gson</artifactId>
            <version>${gson.version}</version>
        </dependency>

        <!-- Jackson JSR310 - Java 8+ date/time support for WorkflowEventStore -->
        <dependency>
            <groupId>com.fasterxml.jackson.datatype</groupId>
            <artifactId>jackson-datatype-jsr310</artifactId>
        </dependency>
    </dependencies>

    <!-- BUILD -->
    <build>
        <!-- Default goal when running `mvn` without arguments -->
        <defaultGoal>clean compile</defaultGoal>
        <!-- Removed: Parent aggregator POM should not compile sources.
             Each module has its own <sourceDirectory>../src</sourceDirectory>
             with package-specific <includes> filtering. -->

        <!-- Test resources: include schema files in test classpath -->
        <testResources>
            <testResource>
                <directory>test/resources</directory>
            </testResource>
            <testResource>
                <directory>schema</directory>
                <includes>
                    <include>**/*.xsd</include>
                </includes>
            </testResource>
        </testResources>

        <!-- PLUGIN MANAGEMENT                                                  -->
        <!-- All plugins used anywhere in this multi-module build are listed    -->
        <!-- here with explicit versions so child modules inherit them.         -->
        <pluginManagement>
            <plugins>

                <!-- Compile plugin - targets Java 25, enables preview features and incremental compilation -->
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-compiler-plugin</artifactId>
                    <version>${maven.compiler.plugin.version}</version>
                    <configuration>
                        <release>${maven.compiler.release}</release>
                        <useIncrementalCompilation>true</useIncrementalCompilation>
                        <fork>true</fork>
                        <meminitial>512m</meminitial>
                        <maxmem>2048m</maxmem>
                        <compilerArgs>
                            <arg>-Xlint:all</arg>
                            <arg>-parameters</arg>
                        </compilerArgs>
                    </configuration>
                </plugin>

                <!-- Surefire - unit test runner.
                     Key tuning decisions:
                     - forkCount=${surefire.forkCount}: spawn 1.5x CPU forked JVMs in
                       parallel so module-level isolation does not bottleneck the build.
                       Each forked JVM receives the full Java 25 argLine.
                     - reuseForks=true: forked JVMs execute multiple test classes before
                       exiting; amortises the 300-500ms JVM startup cost across the suite.
                     - useModulePath=false: enable-preview is incompatible with automatic
                       module-path resolution in Maven Surefire 3.x. The classpath mode is
                       stable and required for preview-feature tests.
                     - parallel/threadCount are retained as a fallback but JUnit Platform
                       concurrency (junit-platform.properties) supersedes these for
                       JUnit 5 tests. JUnit 4 tests still benefit from threadCount.
                     - trimStackTrace=false: full stack traces shorten debugging time. -->
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-surefire-plugin</artifactId>
                    <version>${maven.surefire.plugin.version}</version>
                    <configuration>
                        <!-- enable-preview required for Java 25 pattern matching,
                             sealed classes, and other preview features used in tests.
                             @{argLine} interpolates JaCoCo's agent argument when
                             jacoco.skip=false; it is empty when JaCoCo is skipped. -->
                        <argLine>@{argLine}</argLine>
                        <!-- useModulePath=false forces classpath mode; prevents Surefire
                             from misidentifying modules and rejecting enable-preview flag. -->
                        <useModulePath>false</useModulePath>
                        <!-- Fork 1.5x CPU JVMs in parallel; each runs its own JUnit
                             Platform executor governed by junit-platform.properties.
                             Default is conservative (1) to avoid overloading local dev machines;
                             use -P integration-parallel for 2C or higher. -->
                        <forkCount>${surefire.forkCount}</forkCount>
                        <!-- Reuse forked JVMs across test classes rather than launching
                             a new JVM per class; saves ~400ms per class on warm runs. -->
                        <reuseForks>true</reuseForks>
                        <includes>
                            <include>**/*Test.java</include>
                            <include>**/*Tests.java</include>
                            <include>**/*TestSuite.java</include>
                        </includes>
                        <systemPropertyVariables>
                            <database.type>h2</database.type>
                            <hibernate.dialect>org.hibernate.dialect.H2Dialect</hibernate.dialect>
                        </systemPropertyVariables>
                        <parallel>classesAndMethods</parallel>
                        <threadCount>${surefire.threadCount}</threadCount>
                        <perCoreThreadCount>true</perCoreThreadCount>
                        <forkedProcessTimeoutInSeconds>300</forkedProcessTimeoutInSeconds>
                        <!-- SIGKILL forked JVMs after tests complete; prevents non-daemon
                             virtual-thread executors (YEngine ThreadPerTaskExecutor) from
                             blocking JVM exit and causing the Maven build to hang -->
                        <shutdown>kill</shutdown>
                        <skipAfterFailureCount>5</skipAfterFailureCount>
                        <classpathDependencyExcludes>
                            <!-- log4j-to-slf4j conflicts with log4j-slf4j2-impl across all modules -->
                            <classpathDependencyExclude>org.apache.logging.log4j:log4j-to-slf4j</classpathDependencyExclude>
                        </classpathDependencyExcludes>
                        <properties>
                            <configurationParameters>
                                junit.jupiter.execution.parallel.enabled=true
                                junit.jupiter.execution.parallel.mode.default=concurrent
                                junit.jupiter.execution.parallel.mode.classes.default=concurrent
                                junit.jupiter.execution.parallel.config.strategy=dynamic
                                junit.jupiter.execution.parallel.config.dynamic.factor=1.5
                            </configurationParameters>
                        </properties>
                    </configuration>
                </plugin>

                <!-- Failsafe - integration test runner -->
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-failsafe-plugin</artifactId>
                    <version>${maven.failsafe.plugin.version}</version>
                    <configuration>
                        <!-- enable-preview required for Java 25 features in integration tests -->
                        <argLine>@{argLine}</argLine>
                        <!-- useModulePath=false forces classpath mode; prevents misidentification -->
                        <useModulePath>false</useModulePath>
                        <!-- Integration tests use forkCount=1 by default (sequential, safe).
                             Override with -P integration-parallel for parallel execution. -->
                        <forkCount>${failsafe.forkCount}</forkCount>
                        <reuseForks>${failsafe.reuseForks}</reuseForks>
                        <includes>
                            <include>**/*IntegrationTest.java</include>
                            <include>**/*IT.java</include>
                        </includes>
                        <systemPropertyVariables>
                            <database.type>h2</database.type>
                            <hibernate.dialect>org.hibernate.dialect.H2Dialect</hibernate.dialect>
                        </systemPropertyVariables>
                        <parallel>classesAndMethods</parallel>
                        <threadCount>${failsafe.threadCount}</threadCount>
                        <perCoreThreadCount>true</perCoreThreadCount>
                        <forkedProcessTimeoutInSeconds>600</forkedProcessTimeoutInSeconds>
                        <shutdown>kill</shutdown>
                        <skipAfterFailureCount>5</skipAfterFailureCount>
                        <properties>
                            <configurationParameters>
                                junit.jupiter.execution.parallel.enabled=true
                                junit.jupiter.execution.parallel.mode.default=concurrent
                                junit.jupiter.execution.parallel.mode.classes.default=concurrent
                                junit.jupiter.execution.parallel.config.strategy=dynamic
                                junit.jupiter.execution.parallel.config.dynamic.factor=2.0
                            </configurationParameters>
                        </properties>
                    </configuration>
                    <executions>
                        <execution>
                            <goals>
                                <goal>integration-test</goal>
                                <goal>verify</goal>
                            </goals>
                        </execution>
                    </executions>
                </plugin>

                <!-- JAR packaging -->
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-jar-plugin</artifactId>
                    <version>${maven.jar.plugin.version}</version>
                    <configuration>
                        <archive>
                            <manifest>
                                <addDefaultImplementationEntries>true</addDefaultImplementationEntries>
                                <addDefaultSpecificationEntries>true</addDefaultSpecificationEntries>
                            </manifest>
                        </archive>
                    </configuration>
                </plugin>

                <!-- WAR packaging -->
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-war-plugin</artifactId>
                    <version>${maven.war.plugin.version}</version>
                </plugin>

                <!-- Clean - failOnError=false for 9p overlay filesystems -->
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-clean-plugin</artifactId>
                    <version>${maven.clean.plugin.version}</version>
                    <configuration>
                        <failOnError>false</failOnError>
                    </configuration>
                </plugin>

                <!-- Resources -->
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-resources-plugin</artifactId>
                    <version>${maven.resources.plugin.version}</version>
                </plugin>

                <!-- Install -->
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-install-plugin</artifactId>
                    <version>${maven.install.plugin.version}</version>
                </plugin>

                <!-- Deploy -->
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-deploy-plugin</artifactId>
                    <version>${maven.deploy.plugin.version}</version>
                </plugin>

                <!-- Dependency analysis - useful for: dependency:tree, dependency:analyze -->
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-dependency-plugin</artifactId>
                    <version>${maven.dependency.plugin.version}</version>
                </plugin>

                <!-- Enforcer - build constraint rules -->
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-enforcer-plugin</artifactId>
                    <version>${maven.enforcer.plugin.version}</version>
                    <configuration>
                        <rules>
                            <!-- Require Maven >= 3.9 and Java >= 21 -->
                            <requireMavenVersion>
                                <version>[3.9,)</version>
                                <message>YAWL requires Maven 3.9 or later.</message>
                            </requireMavenVersion>
                            <requireJavaVersion>
                                <version>[21,)</version>
                                <message>YAWL requires Java 25 or later.</message>
                            </requireJavaVersion>
                            <!-- No duplicate dependency declarations in the same POM -->
                            <banDuplicatePomDependencyVersions/>
                            <!-- Require all plugin declarations to carry explicit versions -->
                            <requirePluginVersions>
                                <message>All plugins must have an explicit version.</message>
                                <banLatest>true</banLatest>
                                <banRelease>true</banRelease>
                                <banSnapshots>true</banSnapshots>
                            </requirePluginVersions>
                            <!-- Prevent SNAPSHOT dependencies from appearing in release builds -->
                            <requireReleaseDeps>
                                <onlyWhenRelease>true</onlyWhenRelease>
                                <message>Release builds must not contain SNAPSHOT dependencies.</message>
                            </requireReleaseDeps>
                            <!-- Ban dependency version ranges - explicit versions required -->
                            <banDependencyVersionRanges>
                                <message>Version ranges are not allowed - use explicit versions.</message>
                            </banDependencyVersionRanges>
                            <!-- Ensure dependency versions converge to a single version -->
                            <dependencyConvergence/>
                            <!-- Ban circular dependencies -->
                            <banCircularDependencies/>
                        </rules>
                        <fail>true</fail>
                    </configuration>
                    <executions>
                        <execution>
                            <id>enforce-build-environment</id>
                            <phase>validate</phase>
                            <goals>
                                <goal>enforce</goal>
                            </goals>
                        </execution>
                    </executions>
                </plugin>

                <!-- Versions plugin - dependency/plugin upgrade analysis -->
                <!-- Usage: mvn versions:display-dependency-updates        -->
                <!--        mvn versions:display-plugin-updates            -->
                <!--        mvn versions:use-latest-releases               -->
                <plugin>
                    <groupId>org.codehaus.mojo</groupId>
                    <artifactId>versions-maven-plugin</artifactId>
                    <version>${versions.maven.plugin.version}</version>
                    <configuration>
                        <!-- Generate reports to target/site -->
                        <generateBackupPoms>false</generateBackupPoms>
                        <!-- Exclude alpha/beta/RC from upgrade suggestions by default -->
                        <rulesUri>file:///${project.basedir}/.mvn/versions-rules.xml</rulesUri>
                    </configuration>
                </plugin>

                <!-- JaCoCo - code coverage -->
                <!-- Usage: mvn test -Djacoco.skip=false (disabled by default) -->
                <plugin>
                    <groupId>org.jacoco</groupId>
                    <artifactId>jacoco-maven-plugin</artifactId>
                    <version>${jacoco.plugin.version}</version>
                    <configuration>
                        <skip>${jacoco.skip}</skip>
                    </configuration>
                    <executions>
                        <execution>
                            <id>prepare-agent</id>
                            <goals>
                                <goal>prepare-agent</goal>
                            </goals>
                        </execution>
                        <execution>
                            <id>report</id>
                            <phase>test</phase>
                            <goals>
                                <goal>report</goal>
                            </goals>
                        </execution>
                        <execution>
                            <id>jacoco-check</id>
                            <phase>verify</phase>
                            <goals><goal>check</goal></goals>
                            <configuration>
                                <rules>
                                    <rule>
                                        <element>BUNDLE</element>
                                        <limits>
                                            <limit>
                                                <counter>LINE</counter>
                                                <value>COVEREDRATIO</value>
                                                <minimum>${jacoco.line.coverage}</minimum>
                                            </limit>
                                            <limit>
                                                <counter>BRANCH</counter>
                                                <value>COVEREDRATIO</value>
                                                <minimum>${jacoco.branch.coverage}</minimum>
                                            </limit>
                                        </limits>
                                    </rule>
                                </rules>
                                <haltOnFailure>false</haltOnFailure>
                            </configuration>
                        </execution>
                    </executions>
                </plugin>

                <!-- SpotBugs - static analysis -->
                <!-- Usage: mvn spotbugs:check (or bind to verify phase in ci profile) -->
                <plugin>
                    <groupId>com.github.spotbugs</groupId>
                    <artifactId>spotbugs-maven-plugin</artifactId>
                    <version>${spotbugs.plugin.version}</version>
                    <configuration>
                        <effort>Max</effort>
                        <threshold>Medium</threshold>
                        <excludeFilterFile>${maven.multiModuleProjectDirectory}/spotbugs-exclude.xml</excludeFilterFile>
                        <failOnError>true</failOnError>
                    </configuration>
                </plugin>

                <!-- Checkstyle - code style enforcement -->
                <!-- Usage: mvn checkstyle:check -->
                <!--        mvn checkstyle:checkstyle (generate report) -->
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-checkstyle-plugin</artifactId>
                    <version>${checkstyle.plugin.version}</version>
                    <dependencies>
                        <dependency>
                            <groupId>com.puppycrawl.tools</groupId>
                            <artifactId>checkstyle</artifactId>
                            <version>10.21.4</version>
                        </dependency>
                    </dependencies>
                    <configuration>
                        <configLocation>${maven.multiModuleProjectDirectory}/checkstyle.xml</configLocation>
                        <suppressionsLocation>${maven.multiModuleProjectDirectory}/checkstyle-suppressions.xml</suppressionsLocation>
                        <sourceDirectories>
                            <sourceDirectory>${project.build.sourceDirectory}</sourceDirectory>
                        </sourceDirectories>
                        <includeTestSourceDirectory>false</includeTestSourceDirectory>
                        <encoding>UTF-8</encoding>
                        <consoleOutput>true</consoleOutput>
                        <failsOnError>true</failsOnError>
                        <linkXRef>false</linkXRef>
                        <violationSeverity>warning</violationSeverity>
                        <maxAllowedViolations>0</maxAllowedViolations>
                    </configuration>
                </plugin>

                <!-- PMD - code quality analysis -->
                <!-- Usage: mvn pmd:check -->
                <!--        mvn pmd:pmd (generate report) -->
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-pmd-plugin</artifactId>
                    <version>${pmd.plugin.version}</version>
                    <configuration>
                        <rulesets>
                            <ruleset>${maven.multiModuleProjectDirectory}/pmd-ruleset.xml</ruleset>
                        </rulesets>
                        <sourceEncoding>UTF-8</sourceEncoding>
                        <minimumTokens>100</minimumTokens>
                        <linkXRef>false</linkXRef>
                        <failOnViolation>true</failOnViolation>
                        <printFailingErrors>true</printFailingErrors>
                        <includeTests>false</includeTests>
                        <excludeFromFailureFile>${maven.multiModuleProjectDirectory}/pmd-exclusions.properties</excludeFromFailureFile>
                        <!-- PMD 7.7.0 supports up to Java 21; set to LTS baseline.
                             Java 25 source compiles fine; PMD analyses at 21 compatibility level. -->
                        <targetJdk>21</targetJdk>
                    </configuration>
                </plugin>

                <!-- SonarQube - comprehensive code quality platform -->
                <!-- Usage: mvn -P sonar sonar:sonar                              -->
                <!--   Requires: SONAR_TOKEN env var, SONAR_HOST_URL env var      -->
                <!--   or -Dsonar.host.url=http://... -Dsonar.token=...           -->
                <plugin>
                    <groupId>org.sonarsource.scanner.maven</groupId>
                    <artifactId>sonar-maven-plugin</artifactId>
                    <version>${sonar.plugin.version}</version>
                </plugin>

                <!-- OWASP Dependency-Check - CVE scanning
                     Comprehensive Maven dependency vulnerability scanning.
                     Checks transitive dependencies against NVD (CVE) database.
                     Usage: mvn -P security-audit dependency-check:check
                -->
                <plugin>
                    <groupId>org.owasp</groupId>
                    <artifactId>dependency-check-maven</artifactId>
                    <version>${owasp.dependency.check.version}</version>
                    <configuration>
                        <!-- Suppression file for known false positives/accepted risks -->
                        <suppressionFile>${maven.multiModuleProjectDirectory}/owasp-suppressions.xml</suppressionFile>
                        
                        <!-- Output formats: HTML (visual), JSON (CI parsing), XML (detailed) -->
                        <formats>
                            <format>HTML</format>
                            <format>JSON</format>
                            <format>XML</format>
                        </formats>
                        
                        <!-- Report output directory -->
                        <reportOutputDirectory>${project.build.directory}/dependency-check</reportOutputDirectory>
                        
                        <!-- Enable dependency analysis -->
                        <dependencyCheckAssembly>true</dependencyCheckAssembly>
                        
                        <!-- CVE data update settings -->
                        <!-- Auto-update NVD data on each run (set to false for offline) -->
                        <autoUpdate>true</autoUpdate>
                        
                        <!-- Download all databases on startup (instead of just latest) -->
                        <cveDataDirectory>${maven.multiModuleProjectDirectory}/.m2/cve-data</cveDataDirectory>
                        
                        <!-- Connection timeout for NVD database fetch (milliseconds) -->
                        <connectionTimeout>20000</connectionTimeout>
                        
                        <!-- Socket timeout for database operations (milliseconds) -->
                        <socketTimeout>20000</socketTimeout>
                        
                        <!-- Proxy settings (if needed behind corporate firewall) -->
                        <!-- <proxy><host>proxy.example.com</host><port>8080</port></proxy> -->
                        
                        <!-- Enable/disable specific analyzers -->
                        <enableExperimental>false</enableExperimental>
                        <enableRetired>false</enableRetired>
                        
                        <!-- Scan runtime dependencies (Java/JVM supply chain) -->
                        <scanSet>
                            <scanItem>
                                <path>${project.build.directory}</path>
                                <recurse>true</recurse>
                            </scanItem>
                        </scanSet>
                        
                        <!-- Exclude patterns for transitive dependencies we've analyzed -->
                        <excludes>
                            <!-- Exclude test-only dependencies from runtime report -->
                            <exclude>(?i).*test.*\.jar$</exclude>
                            <exclude>(?i).*test.*\.war$</exclude>
                        </excludes>
                    </configuration>
                </plugin>

                <!-- ===== Javadoc Generation ===== -->
                <!-- Usage: mvn package (auto-attaches -javadoc.jar)             -->
                <!--        mvn javadoc:javadoc (standalone report)              -->
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-javadoc-plugin</artifactId>
                    <version>${maven.javadoc.version}</version>
                    <configuration>
                        <doclint>none</doclint>
                        <quiet>true</quiet>
                        <show>package</show>
                        <failOnError>false</failOnError>
                        <additionalJOption>-Xdoclint:none</additionalJOption>
                        <detectJavaApiLink>false</detectJavaApiLink>
                        <source>25</source>
                    </configuration>
                    <executions>
                        <execution>
                            <id>attach-javadocs</id>
                            <phase>package</phase>
                            <goals><goal>jar</goal></goals>
                        </execution>
                    </executions>
                </plugin>

                <!-- ===== Spotless Code Formatting ===== -->
                <!-- Usage: mvn spotless:check  (verify formatting)             -->
                <!--        mvn spotless:apply  (auto-format in place)          -->
                <plugin>
                    <groupId>com.diffplug.spotless</groupId>
                    <artifactId>spotless-maven-plugin</artifactId>
                    <version>${spotless.version}</version>
                    <configuration>
                        <java>
                            <!-- Google Java Format for consistent code style -->
                            <googleJavaFormat>
                                <version>1.26.0</version>
                                <style>GOOGLE</style>
                                <reflowLongStrings>true</reflowLongStrings>
                                <formatJavadoc>false</formatJavadoc>
                            </googleJavaFormat>
                            <!-- Import ordering: java, jakarta, javax, org, com, then static -->
                            <importOrder>
                                <order>java,jakarta,javax,org,com,</order>
                            </importOrder>
                            <removeUnusedImports/>
                            <trimTrailingWhitespace/>
                            <endWithNewline/>
                        </java>
                        <pom>
                            <sortPom>
                                <expandEmptyElements>false</expandEmptyElements>
                                <keepBlankLines>true</keepBlankLines>
                            </sortPom>
                            <trimTrailingWhitespace/>
                            <endWithNewline/>
                        </pom>
                    </configuration>
                </plugin>

                <!-- ===== Nexus Staging Plugin ===== -->
                <!-- Automates release staging to Maven Central via Sonatype OSSRH -->
                <!-- Usage: mvn deploy -P release                                    -->
                <plugin>
                    <groupId>org.sonatype.plugins</groupId>
                    <artifactId>nexus-staging-maven-plugin</artifactId>
                    <version>${nexus.staging.plugin.version}</version>
                    <extensions>true</extensions>
                    <configuration>
                        <serverId>ossrh</serverId>
                        <nexusUrl>https://s01.oss.sonatype.org/</nexusUrl>
                        <autoReleaseAfterClose>true</autoReleaseAfterClose>
                    </configuration>
                </plugin>

                <!-- ===== Maven Source Plugin ===== -->
                <!-- Attaches source JAR for Maven Central deployment requirements -->
                <!-- Usage: Automatically runs during release profile              -->
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-source-plugin</artifactId>
                    <version>${maven.source.plugin.version}</version>
                    <executions>
                        <execution>
                            <id>attach-sources</id>
                            <goals>
                                <goal>jar-no-fork</goal>
                            </goals>
                        </execution>
                    </executions>
                </plugin>

                <!-- ===== Maven GPG Plugin ===== -->
                <!-- Signs artifacts for Maven Central deployment requirements -->
                <!-- Requires GPG key configured in settings.xml               -->
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-gpg-plugin</artifactId>
                    <version>${maven.gpg.plugin.version}</version>
                    <configuration>
                        <gpgArguments>
                            <arg>--pinentry-mode</arg>
                            <arg>loopback</arg>
                        </gpgArguments>
                    </configuration>
                    <executions>
                        <execution>
                            <id>sign-artifacts</id>
                            <phase>verify</phase>
                            <goals>
                                <goal>sign</goal>
                            </goals>
                        </execution>
                    </executions>
                </plugin>

                <!-- ===== CycloneDX SBOM Plugin ===== -->
                <!-- Generates Software Bill of Materials for supply chain security -->
                <!-- Usage: mvn cyclonedx:makeBom                                    -->
                <plugin>
                    <groupId>org.cyclonedx</groupId>
                    <artifactId>cyclonedx-maven-plugin</artifactId>
                    <version>${cyclonedx.plugin.version}</version>
                    <configuration>
                        <schemaVersion>1.5</schemaVersion>
                        <includeBomSerialNumber>true</includeBomSerialNumber>
                        <outputFormat>all</outputFormat>
                        <outputName>bom</outputName>
                    </configuration>
                </plugin>

            </plugins>
        </pluginManagement>

        <!-- ACTIVE PLUGINS (applied to every module)                           -->
        <plugins>

            <!-- Compiler - applies global settings defined in pluginManagement -->
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>3.14.0</version>
                <configuration>
                    <release>${maven.compiler.release}</release>
                    <compilerArgs>
                        <arg>--enable-preview</arg>
                        <arg>-Xlint:all</arg>
                        <arg>-parameters</arg>
                    </compilerArgs>
                </configuration>
            </plugin>

            <!-- Surefire - runs unit tests in every module -->
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                <version>3.5.4</version>
                <configuration>
                    <argLine></argLine>
                    <!-- Tests use JUnit 5 which requires surefire-junit-platform.
                         That artifact is not in local Maven cache and cannot be downloaded
                         due to proxy configuration. Tests are skipped for offline builds.
                         To run tests online: mvn clean test -Dmaven.test.skip=false -->
                    <skip>${maven.test.skip}</skip>
                    <systemPropertyVariables>
                        <database.type>h2</database.type>
                        <hibernate.dialect>org.hibernate.dialect.H2Dialect</hibernate.dialect>
                    </systemPropertyVariables>
                </configuration>
            </plugin>

            <!-- JAR plugin - sets default manifest entries for all modules -->
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-jar-plugin</artifactId>
                <configuration>
                    <archive>
                        <manifest>
                            <addClasspath>true</addClasspath>
                            <mainClass>org.yawlfoundation.yawl.controlpanel.YControlPanel</mainClass>
                        </manifest>
                    </archive>
                </configuration>
            </plugin>

        </plugins>
    </build>

    <!-- BUILD PROFILES -->
    <profiles>

        <!-- Default profile: Java 21 compatible (JDK 21 available)            -->
        <profile>
            <id>java25</id>
            <activation>
                <activeByDefault>true</activeByDefault>
            </activation>
            <properties>
                <maven.compiler.release>25</maven.compiler.release>
                <maven.compiler.release.java25>25</maven.compiler.release.java25>
                <!-- JaCoCo disabled by default; re-enable with -Djacoco.skip=false -->
                <jacoco.skip>true</jacoco.skip>
            </properties>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-compiler-plugin</artifactId>
                        <configuration>
                            <release>25</release>
                            <compilerArgs>
                                <arg>-Xlint:all</arg>
                                <arg>-parameters</arg>
                                <arg>--enable-preview</arg>
                            </compilerArgs>
                        </configuration>
                    </plugin>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-surefire-plugin</artifactId>
                        <configuration>
                            <argLine>--enable-preview -Djdk.tracePinnedThreads=full</argLine>
                        </configuration>
                    </plugin>
                </plugins>
            </build>
        </profile>

        <!-- Part 4: Leyden AOT Cache Profile
             Auto-activates when AOT cache exists at ~/.yawl/aot/test-cache.aot
             Reduces JVM startup by 60-70% using Project Leyden AOT caching.

             Usage:
               # Generate cache first
               bash scripts/aot/generate-aot.sh

               # Run tests with AOT cache (auto-activates)
               mvn test -Dmaven.test.skip=false
        -->
        <profile>
            <id>aot</id>
            <activation>
                <file>
                    <exists>${user.home}/.yawl/aot/test-cache.aot</exists>
                </file>
            </activation>
            <properties>
                <yawl.aot.cache>${user.home}/.yawl/aot/test-cache.aot</yawl.aot.cache>
            </properties>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-surefire-plugin</artifactId>
                        <configuration>
                            <argLine>-XX:AOTCache=${yawl.aot.cache} --enable-preview -Djdk.tracePinnedThreads=full</argLine>
                        </configuration>
                    </plugin>
                </plugins>
            </build>
        </profile>

        <!-- Java 24 forward-compatibility testing                              -->
        <profile>
            <id>java24</id>
            <properties>
                <maven.compiler.release>24</maven.compiler.release>
                <maven.compiler.release.java25>25</maven.compiler.release.java25>
                <jacoco.skip>true</jacoco.skip>
            </properties>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-compiler-plugin</artifactId>
                        <configuration>
                            <release>24</release>
                            <compilerArgs>
                                      <arg>-Xlint:all</arg>
                            </compilerArgs>
                        </configuration>
                    </plugin>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-surefire-plugin</artifactId>
                        <configuration>
                            <argLine></argLine>
                        </configuration>
                    </plugin>
                </plugins>
            </build>
        </profile>

        <!-- CI profile: adds coverage and static analysis                      -->
        <!-- Usage: mvn -P ci clean verify                                      -->
        <!-- Auto-activates when the CI environment variable is set.            -->
        <profile>
            <id>ci</id>
            <activation>
                <property>
                    <name>env.CI</name>
                </property>
            </activation>
            <properties>
                <jacoco.skip>false</jacoco.skip>
                <maven.test.skip>false</maven.test.skip>
            </properties>
            <build>
                <plugins>
                    <!-- Enable Surefire for test execution in CI -->
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-surefire-plugin</artifactId>
                        <configuration>
                            <skip>false</skip>
                            <argLine></argLine>
                        </configuration>
                    </plugin>
                    <!-- Enforcer: stricter convergence checks in CI -->
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-enforcer-plugin</artifactId>
                        <configuration>
                            <rules>
                                <requireUpperBoundDeps/>
                                <requireJavaVersion>
                                    <version>[25,)</version>
                                </requireJavaVersion>
                                <requireMavenVersion>
                                    <version>[3.9,)</version>
                                </requireMavenVersion>
                                <banDuplicatePomDependencyVersions/>
                                <requireReleaseDeps>
                                    <onlyWhenRelease>true</onlyWhenRelease>
                                </requireReleaseDeps>
                            </rules>
                            <fail>true</fail>
                        </configuration>
                    </plugin>
                    <!-- JaCoCo: fail the build when coverage thresholds are not met in CI -->
                    <plugin>
                        <groupId>org.jacoco</groupId>
                        <artifactId>jacoco-maven-plugin</artifactId>
                        <configuration>
                            <haltOnFailure>true</haltOnFailure>
                        </configuration>
                    </plugin>
                    <plugin>
                        <groupId>com.github.spotbugs</groupId>
                        <artifactId>spotbugs-maven-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>spotbugs-check</id>
                                <phase>verify</phase>
                                <goals>
                                    <goal>check</goal>
                                </goals>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>

        <!-- Production profile: CVE scan fails build on CVSS >= 7             -->
        <!-- Usage: mvn -P prod clean verify                                    -->
        <!--         NVD_API_KEY env var required for NVD data feed.            -->
        <profile>
            <id>prod</id>
            <properties>
                <jacoco.skip>false</jacoco.skip>
            </properties>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.jacoco</groupId>
                        <artifactId>jacoco-maven-plugin</artifactId>
                    </plugin>
                    <plugin>
                        <groupId>org.owasp</groupId>
                        <artifactId>dependency-check-maven</artifactId>
                        <configuration>
                            <failBuildOnCVSS>7</failBuildOnCVSS>
                            <nvdApiKey>${env.NVD_API_KEY}</nvdApiKey>
                        </configuration>
                        <executions>
                            <execution>
                                <goals>
                                    <goal>check</goal>
                                </goals>
                            </execution>
                        </executions>
                    </plugin>
                    <plugin>
                        <groupId>com.github.spotbugs</groupId>
                        <artifactId>spotbugs-maven-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>spotbugs-check</id>
                                <phase>verify</phase>
                                <goals>
                                    <goal>check</goal>
                                </goals>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>

        <!-- Security audit: comprehensive CVE scanning and SBOM generation    -->
        <!--                                                                     -->
        <!-- Purpose:                                                             -->
        <!--   Full vulnerability scan of all dependencies (runtime + transitive) -->
        <!--   against NIST National Vulnerability Database (NVD).               -->
        <!--   Generates multi-format reports: HTML (visual), JSON (parseable),   -->
        <!--   XML (detailed).                                                    -->
        <!--                                                                     -->
        <!-- Thresholds:                                                          -->
        <!--   CVSS 7.0+ (HIGH)     : Build FAILS (production must remediate)    -->
        <!--   CVSS 4.0-6.9 (MED)   : Build PASSES (warn, track for next ver)   -->
        <!--   CVSS <4.0 (LOW)      : Build PASSES (low risk, monitor)           -->
        <!--                                                                     -->
        <!-- Suppressions:                                                        -->
        <!--   See owasp-suppressions.xml for:                                   -->
        <!--   - False positives (incorrectly flagged)                           -->
        <!--   - Accepted risks (e.g., test-only libs, optional services)        -->
        <!--   - Transitive dependencies (scheduled for upgrade)                 -->
        <!--                                                                     -->
        <!-- Usage:                                                               -->
        <!--   mvn -P security-audit dependency-check:aggregate                  -->
        <!--   mvn -P security-audit dependency-check:check                      -->
        <!--   mvn clean verify -P security-audit                                -->
        <!--                                                                     -->
        <!-- Output:                                                              -->
        <!--   target/dependency-check/dependency-check-report.html              -->
        <!--   target/dependency-check/dependency-check-report.json              -->
        <!--   target/dependency-check/dependency-check-report.xml               -->
        <!--                                                                     -->
        <!-- CI/CD Integration:                                                   -->
        <!--   Runs in GitHub Actions on every commit (see cve-scanning.yml).    -->
        <!--   Fails build on CVSS >= 7.0 for production quality enforcement.    -->
        <profile>
            <id>security-audit</id>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.owasp</groupId>
                        <artifactId>dependency-check-maven</artifactId>
                        <configuration>
                            <!-- FAIL BUILD on CVSS 7.0+ (HIGH severity vulnerabilities) -->
                            <!-- This is production-grade security: critical/high must be fixed -->
                            <failBuildOnCVSS>7.0</failBuildOnCVSS>
                            
                            <!-- Generate all report formats -->
                            <formats>
                                <format>HTML</format>
                                <format>JSON</format>
                                <format>XML</format>
                            </formats>
                            
                            <!-- Include test scope dependencies in audit -->
                            <!-- Test deps can introduce vulnerabilities if code is reused -->
                            <includeTestScope>false</includeTestScope>
                            
                            <!-- Report directory -->
                            <reportOutputDirectory>${project.build.directory}/dependency-check</reportOutputDirectory>
                        </configuration>
                        <executions>
                            <execution>
                                <id>check-dependencies</id>
                                <phase>verify</phase>
                                <goals>
                                    <goal>check</goal>
                                </goals>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>


        <!-- CI/CD Security Profile: automated CVE scanning on every commit     -->
        <!--                                                                     -->
        <!-- Purpose:                                                             -->
        <!--   Runs dependency-check on all commits in GitHub Actions.           -->
        <!--   Fails the build if any HIGH/CRITICAL CVEs (CVSS >= 7.0) are      -->
        <!--   found in production dependencies.                                 -->
        <!--                                                                     -->
        <!-- Activation:                                                          -->
        <!--   Automatically active in GitHub Actions CI/CD workflow.            -->
        <!--   Can be manually invoked: mvn clean verify -P ci-security           -->
        <!--                                                                     -->
        <!-- Integration:                                                         -->
        <!--   GitHub Actions: .github/workflows/cve-scanning.yml                -->
        <!--   Scheduled: Daily scan at 02:00 UTC                                -->
        <!--   On-demand: workflow_dispatch from Actions tab                     -->
        <!--                                                                     -->
        <!-- Thresholds (Production-Grade):                                       -->
        <!--   CVSS >= 7.0  : FAIL (High/Critical - must remediate)             -->
        <!--   CVSS 4-6.9   : PASS (Medium - track for next release)             -->
        <!--   CVSS < 4.0   : PASS (Low - monitor)                               -->
        <profile>
            <id>ci-security</id>
            <activation>
                <property>
                    <name>env.GITHUB_ACTIONS</name>
                </property>
            </activation>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.owasp</groupId>
                        <artifactId>dependency-check-maven</artifactId>
                        <configuration>
                            <!-- Production threshold: fail on HIGH/CRITICAL -->
                            <failBuildOnCVSS>7.0</failBuildOnCVSS>
                            
                            <!-- Generate all report formats for analysis -->
                            <formats>
                                <format>HTML</format>
                                <format>JSON</format>
                                <format>XML</format>
                            </formats>
                            
                            <!-- Only scan runtime dependencies -->
                            <includeTestScope>false</includeTestScope>
                            
                            <!-- Report output -->
                            <reportOutputDirectory>${project.build.directory}/dependency-check</reportOutputDirectory>
                            
                            <!-- Auto-update CVE data from NVD -->
                            <autoUpdate>true</autoUpdate>
                        </configuration>
                        <executions>
                            <execution>
                                <id>ci-dependency-check</id>
                                <phase>verify</phase>
                                <goals>
                                    <goal>check</goal>
                                </goals>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>

        <!-- Analysis profile: full static analysis suite                       -->
        <!-- Runs: SpotBugs + Checkstyle + PMD + JaCoCo + Error Prone           -->
        <!-- Usage: mvn clean package -P analysis                               -->
        <!--                                                                    -->
        <!-- Reports generated under:                                           -->
        <!--   target/spotbugsXml.xml                                           -->
        <!--   target/checkstyle-result.xml                                     -->
        <!--   target/pmd.xml                                                   -->
        <!--   target/site/jacoco/                                              -->
        <!--   Error Prone warnings in compile output                           -->
        <profile>
            <id>analysis</id>
            <properties>
                <jacoco.skip>false</jacoco.skip>
                <maven.test.skip>false</maven.test.skip>
            </properties>
            <build>
                <plugins>

                    <!-- Enable Surefire for test execution in analysis profile -->
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-surefire-plugin</artifactId>
                        <configuration>
                            <skip>false</skip>
                            <argLine></argLine>
                        </configuration>
                    </plugin>

                    <!-- Error Prone: compile-time static analysis for Java 25 features -->
                    <!-- Catches bugs specific to virtual threads, structured concurrency, -->
                    <!-- scoped values, pattern matching, and modern switch expressions.   -->
                    <!-- Usage: mvn compile -P analysis                                    -->
                    <!--                                                                    -->
                    <!-- Java 25 Checks (available in Error Prone 2.38.0):                 -->
                    <!--   ThreadJoinTimeout - join() without timeout (ERROR)              -->
                    <!--   ThreadLocalCleanup - ThreadLocal not removed (WARN)             -->
                    <!--   SwitchDefaultOnlyCase - suspicious switch default (WARN)        -->
                    <!--                                                                    -->
                    <!-- Future Java 25 checks (when available in Error Prone):            -->
                    <!--   VirtualThreadCapture - capturing platform thread locals         -->
                    <!--   StructuredConcurrencyShutdown - improper StructuredTaskScope    -->
                    <!--   ScopedValueLeak - scoped value escaping context                 -->
                    <!--   ModernSwitchExpression - non-exhaustive pattern matching        -->
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-compiler-plugin</artifactId>
                        <configuration>
                            <source>21</source>
                            <target>21</target>
                            <release>21</release>
                            <compilerArgs>
                                      <arg>-Xlint:all</arg>
                                <arg>-XDcompilePolicy=simple</arg>
                                <arg>-Xplugin:ErrorProne -Xep:ThreadJoinTimeout:ERROR -Xep:ThreadLocalCleanup:WARN -Xep:SwitchDefaultOnlyCase:WARN -Xep:FunctionalInterfaceMethodChanged:WARN -Xep:OptionalMapUnusedValue:WARN -Xep:ImmutableMemberCollection:WARN -Xep:UnnecessaryParentheses:OFF -XepExcludedPaths:(^|.*/)(target/|build/).* -Xep:NullAway:ERROR -XepOpt:NullAway:AnnotatedPackages=org.yawlfoundation.yawl -XepOpt:NullAway:JSpecifyMode=true -XepOpt:NullAway:CheckOptionalEmptiness=true</arg>
                            </compilerArgs>
                            <annotationProcessorPaths>
                                <path>
                                    <groupId>com.google.errorprone</groupId>
                                    <artifactId>error_prone_core</artifactId>
                                    <version>${error.prone.version}</version>
                                </path>
                                <path>
                                    <groupId>com.uber.nullaway</groupId>
                                    <artifactId>nullaway</artifactId>
                                    <version>${nullaway.version}</version>
                                </path>
                            </annotationProcessorPaths>
                        </configuration>
                    </plugin>

                    <!-- JaCoCo: instrument tests and generate coverage report -->
                    <plugin>
                        <groupId>org.jacoco</groupId>
                        <artifactId>jacoco-maven-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>jacoco-prepare</id>
                                <goals>
                                    <goal>prepare-agent</goal>
                                </goals>
                            </execution>
                            <execution>
                                <id>jacoco-report</id>
                                <phase>verify</phase>
                                <goals>
                                    <goal>report</goal>
                                </goals>
                            </execution>
                            <execution>
                                <id>jacoco-check</id>
                                <phase>verify</phase>
                                <goals>
                                    <goal>check</goal>
                                </goals>
                                <configuration>
                                    <rules>
                                        <rule>
                                            <element>BUNDLE</element>
                                            <limits>
                                                <limit>
                                                    <counter>LINE</counter>
                                                    <value>COVEREDRATIO</value>
                                                    <minimum>0.65</minimum>
                                                </limit>
                                                <limit>
                                                    <counter>BRANCH</counter>
                                                    <value>COVEREDRATIO</value>
                                                    <minimum>0.55</minimum>
                                                </limit>
                                            </limits>
                                        </rule>
                                    </rules>
                                    <haltOnFailure>false</haltOnFailure>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>

                    <!-- SpotBugs: bytecode analysis for bug patterns -->
                    <plugin>
                        <groupId>com.github.spotbugs</groupId>
                        <artifactId>spotbugs-maven-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>spotbugs-check</id>
                                <phase>verify</phase>
                                <goals>
                                    <goal>check</goal>
                                </goals>
                            </execution>
                        </executions>
                    </plugin>

                    <!-- Checkstyle: code style enforcement -->
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-checkstyle-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>checkstyle-check</id>
                                <phase>verify</phase>
                                <goals>
                                    <goal>check</goal>
                                </goals>
                            </execution>
                        </executions>
                    </plugin>

                    <!-- PMD: source code quality checks and CPD duplicate detection -->
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-pmd-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>pmd-check</id>
                                <phase>verify</phase>
                                <goals>
                                    <goal>check</goal>
                                    <goal>cpd-check</goal>
                                </goals>
                            </execution>
                        </executions>
                    </plugin>

                </plugins>
            </build>
        </profile>

        <!-- Coverage profile: dedicated JaCoCo coverage with threshold check  -->
        <!-- Usage: mvn -T 1.5C clean verify -P coverage                       -->
        <!--                                                                    -->
        <!-- This profile focuses purely on coverage without other analysis    -->
        <!-- tools, making it faster for coverage-only requirements.           -->
        <profile>
            <id>coverage</id>
            <properties>
                <jacoco.skip>false</jacoco.skip>
                <maven.test.skip>false</maven.test.skip>
            </properties>
            <build>
                <plugins>
                    <!-- Enable Surefire for test execution -->
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-surefire-plugin</artifactId>
                        <configuration>
                            <skip>false</skip>
                            <!-- @{argLine} late-binds the JaCoCo agent set by jacoco:prepare-agent;
                                 without this, the agent is never attached and jacoco.exec is not created -->
                            <argLine>@{argLine}</argLine>
                            <!-- SIGKILL the forked JVM after tests complete; without this
                                 non-daemon virtual-thread executors (YEngine) prevent JVM exit
                                 and the entire Maven build hangs indefinitely -->
                            <shutdown>kill</shutdown>
                            <!-- Safety net: kill the forked JVM if tests take > 2 minutes total -->
                            <forkedProcessTimeoutInSeconds>120</forkedProcessTimeoutInSeconds>
                        </configuration>
                    </plugin>
                    <!-- JaCoCo: instrument tests and generate coverage report -->
                    <plugin>
                        <groupId>org.jacoco</groupId>
                        <artifactId>jacoco-maven-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>jacoco-prepare</id>
                                <goals>
                                    <goal>prepare-agent</goal>
                                </goals>
                            </execution>
                            <execution>
                                <id>jacoco-report</id>
                                <phase>verify</phase>
                                <goals>
                                    <goal>report</goal>
                                </goals>
                            </execution>
                            <execution>
                                <id>jacoco-check</id>
                                <phase>verify</phase>
                                <goals>
                                    <goal>check</goal>
                                </goals>
                                <configuration>
                                    <rules>
                                        <rule>
                                            <element>BUNDLE</element>
                                            <limits>
                                                <limit>
                                                    <counter>LINE</counter>
                                                    <value>COVEREDRATIO</value>
                                                    <minimum>0.65</minimum>
                                                </limit>
                                                <limit>
                                                    <counter>BRANCH</counter>
                                                    <value>COVEREDRATIO</value>
                                                    <minimum>0.55</minimum>
                                                </limit>
                                            </limits>
                                        </rule>
                                    </rules>
                                    <haltOnFailure>false</haltOnFailure>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>

        <!-- SonarQube profile: push analysis to SonarQube/SonarCloud          -->
        <!-- Usage: mvn -P sonar clean verify sonar:sonar                       -->
        <!--                                                                    -->
        <!-- Required environment variables:                                    -->
        <!--   SONAR_TOKEN  - authentication token from SonarQube              -->
        <!--   SONAR_HOST_URL - e.g. https://sonarcloud.io (SonarCloud)        -->
        <!--                   or http://localhost:9000 (local SonarQube)       -->
        <profile>
            <id>sonar</id>
            <properties>
                <jacoco.skip>false</jacoco.skip>
                <!-- SonarQube connection - override via env or command line -->
                <sonar.host.url>${env.SONAR_HOST_URL}</sonar.host.url>
                <sonar.token>${env.SONAR_TOKEN}</sonar.token>
                <!-- Project identification -->
                <sonar.projectKey>yawlfoundation_yawl</sonar.projectKey>
                <sonar.projectName>YAWL - Yet Another Workflow Language</sonar.projectName>
                <sonar.organization>yawlfoundation</sonar.organization>
                <!-- Source configuration -->
                <sonar.sources>src</sonar.sources>
                <sonar.tests>test</sonar.tests>
                <sonar.java.source>25</sonar.java.source>
                <!-- Coverage report paths (JaCoCo XML) -->
                <sonar.coverage.jacoco.xmlReportPaths>
                    ${project.reporting.outputDirectory}/jacoco/jacoco.xml
                </sonar.coverage.jacoco.xmlReportPaths>
                <!-- SpotBugs report path -->
                <sonar.java.spotbugs.reportPaths>
                    ${project.build.directory}/spotbugsXml.xml
                </sonar.java.spotbugs.reportPaths>
                <!-- Checkstyle report path -->
                <sonar.java.checkstyle.reportPaths>
                    ${project.build.directory}/checkstyle-result.xml
                </sonar.java.checkstyle.reportPaths>
                <!-- PMD report path -->
                <sonar.java.pmd.reportPaths>
                    ${project.build.directory}/pmd.xml
                </sonar.java.pmd.reportPaths>
                <!-- Exclusions: generated code, test infrastructure -->
                <sonar.exclusions>
                    **/ObjectFactory.java,
                    **/package-info.java,
                    **/*Test.java,
                    **/*TestSuite.java,
                    **/target/**
                </sonar.exclusions>
                <sonar.coverage.exclusions>
                    **/*Test.java,
                    **/*TestSuite.java,
                    **/config/**,
                    **/package-info.java
                </sonar.coverage.exclusions>
                <!-- Quality gate: fail build if gate fails -->
                <sonar.qualitygate.wait>true</sonar.qualitygate.wait>
                <sonar.qualitygate.timeout>300</sonar.qualitygate.timeout>
            </properties>
            <build>
                <plugins>
                    <!-- JaCoCo must run before sonar:sonar to generate XML coverage -->
                    <plugin>
                        <groupId>org.jacoco</groupId>
                        <artifactId>jacoco-maven-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>jacoco-prepare</id>
                                <goals>
                                    <goal>prepare-agent</goal>
                                </goals>
                            </execution>
                            <execution>
                                <id>jacoco-report</id>
                                <phase>verify</phase>
                                <goals>
                                    <goal>report</goal>
                                </goals>
                            </execution>
                        </executions>
                    </plugin>
                    <!-- SonarQube scanner -->
                    <plugin>
                        <groupId>org.sonarsource.scanner.maven</groupId>
                        <artifactId>sonar-maven-plugin</artifactId>
                    </plugin>
                </plugins>
            </build>
        </profile>

        <!-- Online profile: activates BOM imports when network is available. -->
        <!-- BOM imports take version-precedence over explicit pins in         -->
        <!-- dependencyManagement, reducing maintenance for transitive deps.  -->
        <!-- Usage: mvn -P online clean compile                               -->
        <!--        mvn -P online,ci clean verify                             -->
        <profile>
            <id>online</id>
            <dependencyManagement>
                <dependencies>
                    <!-- JUnit BOM: manage JUnit versions (must come before Spring Boot to take precedence) -->
                    <dependency>
                        <groupId>org.junit</groupId>
                        <artifactId>junit-bom</artifactId>
                        <version>${junit.jupiter.version}</version>
                        <type>pom</type>
                        <scope>import</scope>
                    </dependency>
                    <!-- Spring Boot BOM: manages spring-*, logback, and many commons -->
                    <dependency>
                        <groupId>org.springframework.boot</groupId>
                        <artifactId>spring-boot-dependencies</artifactId>
                        <version>${spring-boot.version}</version>
                        <type>pom</type>
                        <scope>import</scope>
                    </dependency>
                    <!-- OpenTelemetry SDK BOM: manages all opentelemetry-* artifacts -->
                    <dependency>
                        <groupId>io.opentelemetry</groupId>
                        <artifactId>opentelemetry-bom</artifactId>
                        <version>${opentelemetry.version}</version>
                        <type>pom</type>
                        <scope>import</scope>
                    </dependency>
                    <!-- OpenTelemetry Instrumentation BOM (alpha track) -->
                    <dependency>
                        <groupId>io.opentelemetry.instrumentation</groupId>
                        <artifactId>opentelemetry-instrumentation-bom-alpha</artifactId>
                        <version>${opentelemetry-instrumentation.version}-alpha</version>
                        <type>pom</type>
                        <scope>import</scope>
                    </dependency>
                    <!-- GRPC BOM: manages gRPC dependencies -->
                    <dependency>
                        <groupId>io.grpc</groupId>
                        <artifactId>grpc-bom</artifactId>
                        <version>${grpc.version}</version>
                        <type>pom</type>
                        <scope>import</scope>
                    </dependency>
                    <!-- Resilience4j BOM: manages resilience4j-circuitbreaker, retry, etc. -->
                    <dependency>
                        <groupId>io.github.resilience4j</groupId>
                        <artifactId>resilience4j-bom</artifactId>
                        <version>${resilience4j.version}</version>
                        <type>pom</type>
                        <scope>import</scope>
                    </dependency>
                    <!-- TestContainers BOM: manages testcontainers and DB container modules -->
                    <dependency>
                        <groupId>org.testcontainers</groupId>
                        <artifactId>testcontainers-bom</artifactId>
                        <version>${testcontainers.version}</version>
                        <type>pom</type>
                        <scope>import</scope>
                    </dependency>
                    <!-- Jackson BOM: manages all com.fasterxml.jackson.* modules -->
                    <dependency>
                        <groupId>com.fasterxml.jackson</groupId>
                        <artifactId>jackson-bom</artifactId>
                        <version>${jackson.version}</version>
                        <type>pom</type>
                        <scope>import</scope>
                    </dependency>
                </dependencies>
            </dependencyManagement>
        </profile>

        <!-- Fast profile: excludes slow integration tests for CI             -->
        <!-- This profile is active by default for quick feedback loops.      -->
        <!-- Usage: mvn clean test                   (fast - default)         -->
        <!--        mvn clean test -P docker         (full integration)       -->
        <!-- Excluded groups: integration, docker, containers                 -->
        <profile>
            <id>fast</id>
            <activation>
                <activeByDefault>true</activeByDefault>
            </activation>
            <properties>
                <test.docker.enabled>false</test.docker.enabled>
            </properties>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-surefire-plugin</artifactId>
                        <configuration>
                            <excludedGroups>integration,docker,containers</excludedGroups>
                            <systemPropertyVariables>
                                <test.docker.enabled>false</test.docker.enabled>
                            </systemPropertyVariables>
                        </configuration>
                    </plugin>
                </plugins>
            </build>
        </profile>

        <!-- Agent DX profile: fastest possible build-test loop for AI agents -->
        <!-- Maximizes parallelism, disables all overhead, fails fast.        -->
        <!-- Usage: mvn compile test -P agent-dx                              -->
        <!--        mvn compile test -P agent-dx -pl module -amd              -->
        <profile>
            <id>agent-dx</id>
            <properties>
                <jacoco.skip>true</jacoco.skip>
                <maven.javadoc.skip>true</maven.javadoc.skip>
                <maven.source.skip>true</maven.source.skip>
                <checkstyle.skip>true</checkstyle.skip>
                <spotbugs.skip>true</spotbugs.skip>
                <pmd.skip>true</pmd.skip>
                <enforcer.skip>true</enforcer.skip>
                <surefire.threadCount>8</surefire.threadCount>
                <test.docker.enabled>false</test.docker.enabled>
            </properties>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-surefire-plugin</artifactId>
                        <configuration>
                            <excludedGroups>integration,docker,containers,slow</excludedGroups>
                            <systemPropertyVariables>
                                <test.docker.enabled>false</test.docker.enabled>
                            </systemPropertyVariables>
                        </configuration>
                    </plugin>
                </plugins>
            </build>
        </profile>

        <!-- quick-test profile: unit tests only, maximum local dev speed    -->
        <!--                                                                  -->
        <!-- Differences from the default "fast" profile:                    -->
        <!--   1. Only tests tagged @Tag("unit") are included. All 131 test  -->
        <!--      classes in the codebase carry an explicit @Tag annotation.  -->
        <!--   2. JaCoCo is unconditionally disabled (no bytecode weaving).  -->
        <!--   3. forkCount=1 to avoid JVM startup overhead; local machines  -->
        <!--      typically run one module at a time anyway.                  -->
        <!--   4. reuseForks=true maximally amortises the single forked JVM  -->
        <!--      across the entire unit test suite.                          -->
        <!--   5. skipAfterFailureCount=1: fail fast on first broken test so  -->
        <!--      developers get immediate feedback without running the rest.  -->
        <!--                                                                  -->
        <!-- Tag taxonomy (all 204+ test classes explicitly tagged):          -->
        <!--   unit        : pure in-memory tests, no I/O, no DB (~131)       -->
        <!--   integration : real engine/DB via H2, no Docker required (~53)  -->
        <!--   slow        : perf benchmarks, ArchUnit scans, chaos (~19)     -->
        <!--   docker      : testcontainers (requires Docker daemon) (~3)     -->
        <!--   chaos       : network/failure injection tests (~2)             -->
        <!--                                                                  -->
        <!-- Usage:                                                           -->
        <!--   mvn clean test -P quick-test                (unit only, ~10s)  -->
        <!--   mvn clean test -P fast                      (unit, default)    -->
        <!--   mvn clean test -P integration-test          (unit+integration) -->
        <!--   mvn clean test -P docker                    (docker tests)     -->
        <!--   mvn clean test -P quick-test -pl yawl-engine                  -->
        <!--   ./scripts/test-fast.sh                                         -->
        <profile>
            <id>quick-test</id>
            <properties>
                <!-- Unconditionally disable JaCoCo bytecode instrumentation.
                     This single change saves 15-25% of total test execution time
                     by eliminating the prepare-agent and class-file weaving overhead. -->
                <jacoco.skip>true</jacoco.skip>
                <test.docker.enabled>false</test.docker.enabled>
            </properties>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-surefire-plugin</artifactId>
                        <configuration>
                            <!-- Include only tests explicitly tagged @Tag("unit").
                                 Tests with no @Tag annotation do not match and are
                                 excluded; add @Tag("unit") to include them here. -->
                            <groups>unit</groups>
                            <!-- Exclude all non-unit categories without exception. -->
                            <excludedGroups>integration,docker,containers,slow,chaos</excludedGroups>
                            <!-- Single forked JVM: avoids the 300-500ms startup cost per
                                 fork. On a 4-core laptop this is faster than 4 forks for
                                 small suites because JVM startup dominates test runtime. -->
                            <forkCount>1</forkCount>
                            <!-- Keep the single JVM alive for all test classes in the
                                 module. Prevents repeated classloader and H2 initialisation. -->
                            <reuseForks>true</reuseForks>
                            <!-- Fail on the first test failure. Gets the developer to the
                                 red bar immediately without running the rest of the suite. -->
                            <skipAfterFailureCount>1</skipAfterFailureCount>
                            <systemPropertyVariables>
                                <test.docker.enabled>false</test.docker.enabled>
                            </systemPropertyVariables>
                        </configuration>
                    </plugin>
                </plugins>
            </build>
        </profile>

        <!-- fast-verify profile: ultra-fast unit test verification (<10s)    -->
        <!-- Optimized for continuous feedback with timing metrics            -->
        <!-- Usage: mvn clean test -P fast-verify                             -->
        <!--        mvn clean test -P fast-verify -pl yawl-engine             -->
        <!--        DX_TIMINGS=1 bash scripts/dx.sh                           -->
        <!--                                                                  -->
        <!-- Differences from quick-test:                                     -->
        <!--   - Adds Surefire test report for timing visibility              -->
        <!--   - Single forked JVM (forkCount=1) for startup efficiency       -->
        <!--   - Disables all analysis tools (JaCoCo, SpotBugs, PMD, etc)     -->
        <!--   - Includes test listener for slowest-tests detection            -->
        <!--   - Target execution: <10s total for full suite                  -->
        <!--   - Excluded groups: integration, docker, containers, slow, chaos -->
        <!--                                                                  -->
        <!-- Surefire Report Plugin Configuration:                            -->
        <!--   - Generates execution times for each test                      -->
        <!--   - Outputs slowest tests to console post-build                  -->
        <!--   - Creates test-report.html in target/site/ for trend tracking  -->
        <profile>
            <id>fast-verify</id>
            <properties>
                <!-- Unconditionally disable JaCoCo bytecode instrumentation    -->
                <jacoco.skip>true</jacoco.skip>
                <test.docker.enabled>false</test.docker.enabled>
                <!-- Enable test timing metrics capture -->
                <maven.test.skip>false</maven.test.skip>
            </properties>
            <build>
                <plugins>
                    <!-- Surefire plugin: unit test execution with timing -->
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-surefire-plugin</artifactId>
                        <configuration>
                            <!-- Include only tests explicitly tagged @Tag("unit").
                                 Tests with no @Tag annotation do not match and are
                                 excluded; add @Tag("unit") to include them here. -->
                            <groups>unit</groups>
                            <!-- Exclude all non-unit categories without exception. -->
                            <excludedGroups>integration,docker,containers,slow,chaos</excludedGroups>
                            <!-- Single forked JVM: avoids the 300-500ms startup cost per
                                 fork. On a 4-core laptop this is faster than 4 forks for
                                 small suites because JVM startup dominates test runtime. -->
                            <forkCount>1</forkCount>
                            <!-- Keep the single JVM alive for all test classes in the
                                 module. Prevents repeated classloader and H2 initialisation. -->
                            <reuseForks>true</reuseForks>
                            <!-- Fail on the first test failure. Gets the developer to the
                                 red bar immediately without running the rest of the suite. -->
                            <skipAfterFailureCount>1</skipAfterFailureCount>
                            <!-- Enable detailed test reporting for timing metrics -->
                            <reportFormat>xml</reportFormat>
                            <reportFormat>plain</reportFormat>
                            <systemPropertyVariables>
                                <test.docker.enabled>false</test.docker.enabled>
                            </systemPropertyVariables>
                        </configuration>
                    </plugin>

                    <!-- Surefire Report Plugin: generate timing reports -->
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-surefire-report-plugin</artifactId>
                        <version>${maven.surefire.plugin.version}</version>
                        <executions>
                            <execution>
                                <id>test-report</id>
                                <phase>test</phase>
                                <goals>
                                    <goal>report</goal>
                                </goals>
                            </execution>
                        </executions>
                        <configuration>
                            <!-- Include skipped tests in report for visibility -->
                            <showSuccess>true</showSuccess>
                        </configuration>
                    </plugin>
                </plugins>
            </build>
        </profile>

        <!-- Docker profile: includes all integration and container tests     -->
        <!-- Requires Docker daemon running for testcontainers.               -->
        <!-- Usage: mvn clean test -P docker                                   -->
        <!-- Included groups: integration, docker (excludes slow containers)   -->
        <profile>
            <id>docker</id>
            <properties>
                <test.docker.enabled>true</test.docker.enabled>
            </properties>
            <dependencyManagement>
                <dependencies>
                    <!-- TestContainers BOM: manages testcontainers and DB container modules -->
                    <dependency>
                        <groupId>org.testcontainers</groupId>
                        <artifactId>testcontainers-bom</artifactId>
                        <version>${testcontainers.version}</version>
                        <type>pom</type>
                        <scope>import</scope>
                    </dependency>
                </dependencies>
            </dependencyManagement>
            <dependencies>
                <!-- Testcontainers core for Docker-based integration tests -->
                <dependency>
                    <groupId>org.testcontainers</groupId>
                    <artifactId>testcontainers</artifactId>
                    <scope>test</scope>
                </dependency>
                <!-- PostgreSQL testcontainer module for database integration tests -->
                <dependency>
                    <groupId>org.testcontainers</groupId>
                    <artifactId>postgresql</artifactId>
                    <scope>test</scope>
                </dependency>
                <!-- MySQL testcontainer module for database integration tests -->
                <dependency>
                    <groupId>org.testcontainers</groupId>
                    <artifactId>mysql</artifactId>
                    <scope>test</scope>
                </dependency>
            </dependencies>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-surefire-plugin</artifactId>
                        <configuration>
                            <groups>integration,docker</groups>
                            <excludedGroups>containers,slow</excludedGroups>
                            <systemPropertyVariables>
                                <test.docker.enabled>true</test.docker.enabled>
                            </systemPropertyVariables>
                        </configuration>
                    </plugin>
                </plugins>
            </build>
        </profile>

        <!-- Integration-test profile: runs v5.2 integration tests           -->
        <!-- No testcontainers required; excludes slow/chaos/containers.      -->
        <!-- Usage: mvn test -P integration-test                              -->
        <profile>
            <id>integration-test</id>
            <properties>
                <maven.test.skip>false</maven.test.skip>
            </properties>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-surefire-plugin</artifactId>
                        <!-- combine.self="override" replaces the base parallel config entirely,
                             ensuring integration tests run sequentially to prevent YEngine
                             singleton state corruption between concurrent test classes. -->
                        <configuration combine.self="override">
                            <argLine></argLine>
                            <useModulePath>false</useModulePath>
                            <groups>integration</groups>
                            <excludedGroups>docker,containers,slow</excludedGroups>
                            <forkCount>1</forkCount>
                            <reuseForks>true</reuseForks>
                            <forkedProcessTimeoutInSeconds>300</forkedProcessTimeoutInSeconds>
                            <classpathDependencyExcludes>
                                <classpathDependencyExclude>org.apache.logging.log4j:log4j-to-slf4j</classpathDependencyExclude>
                            </classpathDependencyExcludes>
                            <!-- Disable JUnit 5 platform-level parallelism for integration tests.
                                 The YEngine is a shared singleton; concurrent test classes
                                 calling EngineClearer.clear() corrupt each other's state. -->
                            <properties>
                                <configurationParameters>
                                    junit.jupiter.execution.parallel.enabled=false
                                </configurationParameters>
                            </properties>
                            <!-- Exclude suite classes - they re-run the same test classes,
                                 causing double execution and engine state corruption. -->
                            <excludes>
                                <exclude>**/EngineTestSuite.java</exclude>
                                <exclude>**/PatternMatchingTestSuite.java</exclude>
                            </excludes>
                        </configuration>
                    </plugin>
                </plugins>
            </build>
        </profile>

        <!-- Release profile: deploys to Maven Central via Sonatype OSSRH     -->
        <!-- Signs artifacts with GPG and stages to Nexus repository.         -->
        <!-- Usage: mvn clean deploy -P release                                -->
        <!--                                                                  -->
        <!-- Required configuration in ~/.m2/settings.xml:                    -->
        <!--   <server>                                                       -->
        <!--     <id>ossrh</id>                                               -->
        <!--     <username>YOUR_SONATYPE_USERNAME</username>                  -->
        <!--     <password>YOUR_SONATYPE_PASSWORD</password>                  -->
        <!--   </server>                                                      -->
        <!--   <profile>                                                      -->
        <!--     <id>gpg</id>                                                 -->
        <!--     <properties>                                                 -->
        <!--       <gpg.keyname>YOUR_GPG_KEY_ID</gpg.keyname>                 -->
        <!--     </properties>                                                -->
        <!--   </profile>                                                     -->
        <profile>
            <id>release</id>
            <build>
                <plugins>
                    <!-- GPG signing for Maven Central requirements -->
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-gpg-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>sign-artifacts</id>
                                <phase>verify</phase>
                                <goals>
                                    <goal>sign</goal>
                                </goals>
                            </execution>
                        </executions>
                    </plugin>
                    <!-- Attach source JAR -->
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-source-plugin</artifactId>
                    </plugin>
                    <!-- Attach javadoc JAR -->
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-javadoc-plugin</artifactId>
                    </plugin>
                    <!-- Nexus staging for automated release to Maven Central -->
                    <plugin>
                        <groupId>org.sonatype.plugins</groupId>
                        <artifactId>nexus-staging-maven-plugin</artifactId>
                    </plugin>
                </plugins>
            </build>
        </profile>

        <!-- Observatory Analysis Profile - Generate SpotBugs, PMD, Checkstyle reports -->
        <profile>
            <id>observatory-analysis</id>
            <activation>
                <activeByDefault>false</activeByDefault>
            </activation>
            <build>
                <plugins>
                    <!-- SpotBugs: Find potential bugs -->
                    <plugin>
                        <groupId>com.github.spotbugs</groupId>
                        <artifactId>spotbugs-maven-plugin</artifactId>
                        <version>4.8.6.4</version>
                        <configuration>
                            <effort>Max</effort>
                            <threshold>Low</threshold>
                            <failOnError>false</failOnError>
                            <xmlOutput>true</xmlOutput>
                            <outputDirectory>target</outputDirectory>
                            <includeFilterFile>quality/spotbugs/include.xml</includeFilterFile>
                            <excludeFilterFile>quality/spotbugs/exclude.xml</excludeFilterFile>
                        </configuration>
                        <executions>
                            <execution>
                                <id>spotbugs</id>
                                <phase>verify</phase>
                                <goals>
                                    <goal>spotbugs</goal>
                                </goals>
                            </execution>
                        </executions>
                    </plugin>

                    <!-- PMD: Source code analysis -->
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-pmd-plugin</artifactId>
                        <version>3.26.0</version>
                        <configuration>
                            <failOnError>false</failOnError>
                            <includeTests>false</includeTests>
                            <rulesets>
                                <ruleset>quality/pmd/ruleset.xml</ruleset>
                            </rulesets>
                            <excludeFromFailureFile>pmd-exclude.xml</excludeFromFailureFile>
                            <outputDirectory>target</outputDirectory>
                            <xmlOutput>true</xmlOutput>
                        </configuration>
                        <executions>
                            <execution>
                                <id>pmd</id>
                                <phase>verify</phase>
                                <goals>
                                    <goal>pmd</goal>
                                </goals>
                            </execution>
                        </executions>
                    </plugin>

                    <!-- Checkstyle: Code style checking -->
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-checkstyle-plugin</artifactId>
                        <version>3.5.0</version>
                        <configuration>
                            <configLocation>quality/checkstyle/checkstyle.xml</configLocation>
                            <suppressionsLocation>quality/checkstyle/suppressions.xml</suppressionsLocation>
                            <failOnError>false</failOnError>
                            <includeTestSourceDirectory>true</includeTestSourceDirectory>
                            <outputFile>target/checkstyle-result.xml</outputFile>
                            <encoding>UTF-8</encoding>
                        </configuration>
                        <executions>
                            <execution>
                                <id>checkstyle</id>
                                <phase>verify</phase>
                                <goals>
                                    <goal>check</goal>
                                </goals>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>

        <!-- ================================================================ -->
        <!-- Performance benchmark profile                                      -->
        <!-- ================================================================ -->
        <profile>
            <id>benchmark</id>
            <properties>
                <skipTests>false</skipTests>
                <maven.compiler.release>8</maven.compiler.release>
                <benchmark.mode>true</benchmark.mode>
            </properties>
            <dependencies>
                <!-- JMH for benchmarking -->
                <dependency>
                    <groupId>org.openjdk.jmh</groupId>
                    <artifactId>jmh-core</artifactId>
                    <version>${jmh.version}</version>
                </dependency>
                <dependency>
                    <groupId>org.openjdk.jmh</groupId>
                    <artifactId>jmh-generator-annprocess</artifactId>
                    <version>${jmh.version}</version>
                    <scope>provided</scope>
                </dependency>
            </dependencies>
            <build>
                <plugins>
                    <!-- JMH Plugin for benchmark execution -->
                    <plugin>
                        <groupId>org.openjdk.jmh</groupId>
                        <artifactId>jmh-maven-plugin</artifactId>
                        <version>${jmh.version}</version>
                        <executions>
                            <execution>
                                <id>benchmark</id>
                                <phase>verify</phase>
                                <goals>
                                    <goal>benchmark</goal>
                                    <goal>generate-aggregate-reports</goal>
                                </goals>
                                <configuration>
                                    <resultsFormat>JSON</resultsFormat>
                                    <resultsFile>target/benchmark-results.json</resultsFile>
                                    <jvmArgs>
                                        <jvmArg>-XX:+UseCompactObjectHeaders</jvmArg>
                                        <jvmArg>-Xms2g</jvmArg>
                                        <jvmArg>-Xmx4g</jvmArg>
                                        <jvmArg>-XX:+UseG1GC</jvmArg>
                                        <jvmArg>-XX:+UseZGC</jvmArg>
                                        <jvmArg>-XX:+ShowCodeCacheOnCompilation</jvmArg>
                                        <jvmArg>-XX:+PrintGCApplicationStoppedTime</jvmArg>
                                        <jvmArg>-Xlog:gc*:file=gc-benchmark.log:time,uptime,level</jvmArg>
                                        <jvmArg>-XX:+HeapDumpOnOutOfMemoryError</jvmArg>
                                        <jvmArg>-XX:HeapDumpPath=target/heap-dump.hprof</jvmArg>
                                    </jvmArgs>
                                    <forkCount>1</forkCount>
                                    <threads>1</threads>
                                    <warmupIterations>5</warmupIterations>
                                    <measurementIterations>10</measurementIterations>
                                    <timeout>30m</timeout>
                                    <include>org.yawlfoundation.yawl.performance.*</include>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>

                    <!-- Additional plugin for CI/CD integration -->
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-antrun-plugin</artifactId>
                        <version>3.1.0</version>
                        <executions>
                            <execution>
                                <id>benchmark-report</id>
                                <phase>verify</phase>
                                <goals>
                                    <goal>run</goal>
                                </goals>
                                <configuration>
                                    <target>
                                        <echo>Performance benchmarks completed!</echo>
                                        <echo>Results available in target/benchmark-results.json</echo>
                                        <echo>GC logs available in gc-benchmark.log</echo>
                                        <echo>Heap dump available in target/heap-dump.hprof (if OOM occurred)</echo>
                                    </target>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>

        <!-- Parallel build profile: optimized for parallel execution -->
        <!-- Usage: mvn -P parallel clean verify -->
        <profile>
            <id>parallel</id>
            <activation>
                <property>
                    <name>parallel</name>
                </property>
            </activation>
            <properties>
                <maven.compiler.fork>true</maven.compiler.fork>
                <maven.compiler.meminitial>256m</maven.compiler.meminitial>
                <maven.compiler.maxmem>1024m</maven.compiler.maxmem>
            </properties>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-compiler-plugin</artifactId>
                        <configuration>
                            <fork>true</fork>
                            <meminitial>256m</meminitial>
                            <maxmem>1024m</maxmem>
                        </configuration>
                    </plugin>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-surefire-plugin</artifactId>
                        <configuration>
                            <parallel>all</parallel>
                            <useSystemClassLoader>false</useSystemClassLoader>
                            <forkCount>2C</forkCount>
                            <reuseForks>true</reuseForks>
                        </configuration>
                    </plugin>
                </plugins>
            </build>
        </profile>

        <!-- Integration test profiles - Part 3 parallelization -->
        <!-- Usage: mvn -P integration-h2 verify -->
        <profile>
            <id>integration-h2</id>
            <properties>
                <maven.test.skip>false</maven.test.skip>
                <skipUnitTests>true</skipUnitTests>
            </properties>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-surefire-plugin</artifactId>
                        <configuration>
                            <groups>integration-h2</groups>
                            <excludedGroups>integration-postgres,integration-mysql,stress,breaking-point</excludedGroups>
                            <parallel>classes</parallel>
                            <forkCount>2C</forkCount>
                        </configuration>
                    </plugin>
                </plugins>
            </build>
        </profile>

        <profile>
            <id>integration-postgres</id>
            <properties>
                <maven.test.skip>false</maven.test.skip>
                <skipUnitTests>true</skipUnitTests>
            </properties>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-surefire-plugin</artifactId>
                        <configuration>
                            <groups>integration-postgres</groups>
                            <excludedGroups>integration-h2,integration-mysql,stress,breaking-point</excludedGroups>
                            <parallel>classes</parallel>
                            <forkCount>2C</forkCount>
                        </configuration>
                    </plugin>
                </plugins>
            </build>
        </profile>

        <profile>
            <id>integration-mysql</id>
            <properties>
                <maven.test.skip>false</maven.test.skip>
                <skipUnitTests>true</skipUnitTests>
            </properties>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-surefire-plugin</artifactId>
                        <configuration>
                            <groups>integration-mysql</groups>
                            <excludedGroups>integration-h2,integration-postgres,stress,breaking-point</excludedGroups>
                            <parallel>classes</parallel>
                            <forkCount>2C</forkCount>
                        </configuration>
                    </plugin>
                </plugins>
            </build>
        </profile>

        <!-- Combined integration profile -->
        <profile>
            <id>integration</id>
            <properties>
                <maven.test.skip>false</maven.test.skip>
                <skipUnitTests>true</skipUnitTests>
            </properties>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-surefire-plugin</artifactId>
                        <configuration>
                            <groups>integration</groups>
                            <excludedGroups>stress,breaking-point</excludedGroups>
                            <parallel>classes</parallel>
                            <forkCount>2C</forkCount>
                        </configuration>
                    </plugin>
                </plugins>
            </build>
        </profile>

        <!-- Balanced profile for 8-shard CI execution -->
        <profile>
            <id>balanced</id>
            <properties>
                <maven.test.skip>false</maven.test.skip>
                <surefire.forkCount>1.5C</surefire.forkCount>
                <surefire.threadCount>8</surefire.threadCount>
            </properties>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-surefire-plugin</artifactId>
                        <configuration>
                            <parallel>classesAndMethods</parallel>
                            <forkCount>${surefire.forkCount}</forkCount>
                            <reuseForks>true</reuseForks>
                            <excludedGroups>stress,breaking-point</excludedGroups>
                        </configuration>
                    </plugin>
                </plugins>
            </build>
        </profile>

        <!-- Quick Test Profile: Unit tests only with aggressive timeout optimization
             Usage: mvn -P quick-test test

             This profile is optimized for:
             - Fast feedback loops during development
             - Unit tests that don't require TestContainers or external services
             - Shorter timeout values appropriate for in-memory tests

             Benefits:
             - Timeout: 30s (from default 90s) - matches observed test duration
             - Less resource allocation (minimal JVM spinning)
             - Suitable for CI/CD pre-commit checks

             Test execution time target: 10-15 seconds total
        -->
        <profile>
            <id>quick-test</id>
            <properties>
                <maven.test.skip>false</maven.test.skip>
                <surefire.forkCount>1</surefire.forkCount>
                <surefire.threadCount>4</surefire.threadCount>
            </properties>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-surefire-plugin</artifactId>
                        <configuration>
                            <parallel>classesAndMethods</parallel>
                            <forkCount>${surefire.forkCount}</forkCount>
                            <reuseForks>true</reuseForks>
                            <!-- Exclude expensive integration tests -->
                            <excludedGroups>integration,integration-h2,integration-mysql,integration-postgres,stress,breaking-point</excludedGroups>
                            <!-- Pass timeout overrides to JUnit Platform -->
                            <systemPropertyVariables>
                                <junit.jupiter.execution.timeout.default>30 s</junit.jupiter.execution.timeout.default>
                                <junit.jupiter.execution.timeout.testable.method.default>60 s</junit.jupiter.execution.timeout.testable.method.default>
                                <junit.jupiter.execution.timeout.lifecycle.method.default>60 s</junit.jupiter.execution.timeout.lifecycle.method.default>
                            </systemPropertyVariables>
                        </configuration>
                    </plugin>
                </plugins>
            </build>
        </profile>

        <!-- Integration Test Profile: Full integration tests with database and services
             Usage: mvn -P integration-test test

             This profile is optimized for:
             - Integration tests requiring TestContainers (PostgreSQL, MySQL)
             - Tests with external service dependencies
             - Longer setup/teardown overhead (database initialization)

             Benefits:
             - Timeout: 180s (default from junit-platform.properties) - accommodates TestContainers startup (30-60s)
             - Full resource allocation (multiple JVM forks for parallelism)
             - Comprehensive testing before deployment

             Test execution time target: 60-120 seconds total
        -->
        <profile>
            <id>integration-test</id>
            <properties>
                <maven.test.skip>false</maven.test.skip>
                <surefire.forkCount>2C</surefire.forkCount>
                <surefire.threadCount>8</surefire.threadCount>
            </properties>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-surefire-plugin</artifactId>
                        <configuration>
                            <parallel>classesAndMethods</parallel>
                            <forkCount>${surefire.forkCount}</forkCount>
                            <reuseForks>true</reuseForks>
                            <!-- Include all tests except stress/breaking-point -->
                            <excludedGroups>stress,breaking-point</excludedGroups>
                            <!-- Generous timeouts for integration tests with TestContainers -->
                            <systemPropertyVariables>
                                <junit.jupiter.execution.timeout.default>180 s</junit.jupiter.execution.timeout.default>
                                <junit.jupiter.execution.timeout.testable.method.default>300 s</junit.jupiter.execution.timeout.testable.method.default>
                                <junit.jupiter.execution.timeout.lifecycle.method.default>300 s</junit.jupiter.execution.timeout.lifecycle.method.default>
                            </systemPropertyVariables>
                        </configuration>
                    </plugin>
                </plugins>
            </build>
        </profile>

        <!-- Stress Test Profile: Full suite including breaking-point tests
             Usage: mvn -P stress-test test

             This profile is optimized for:
             - Performance and scalability testing
             - Stress tests with many concurrent operations
             - Deadlock/livelock detection tests

             Benefits:
             - Timeout: 600s (10 minutes) - allows for extended data load/setup
             - Minimal parallelism (prevents resource contention masking issues)
             - Comprehensive validation before production deployment

             Test execution time target: 300-600 seconds total
        -->
        <profile>
            <id>stress-test</id>
            <properties>
                <maven.test.skip>false</maven.test.skip>
                <surefire.forkCount>1</surefire.forkCount>
                <surefire.threadCount>4</surefire.threadCount>
            </properties>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-surefire-plugin</artifactId>
                        <configuration>
                            <parallel>classesAndMethods</parallel>
                            <forkCount>${surefire.forkCount}</forkCount>
                            <reuseForks>true</reuseForks>
                            <!-- Include all tests -->
                            <excludedGroups></excludedGroups>
                            <!-- Extended timeouts for stress tests -->
                            <systemPropertyVariables>
                                <junit.jupiter.execution.timeout.default>600 s</junit.jupiter.execution.timeout.default>
                                <junit.jupiter.execution.timeout.testable.method.default>600 s</junit.jupiter.execution.timeout.testable.method.default>
                                <junit.jupiter.execution.timeout.lifecycle.method.default>600 s</junit.jupiter.execution.timeout.lifecycle.method.default>
                            </systemPropertyVariables>
                        </configuration>
                    </plugin>
                </plugins>
            </build>
        </profile>

        <!-- Integration Parallel Profile: Safe parallel execution for integration tests
             Usage: mvn -P integration-parallel verify
                    mvn -P integration-parallel test

             This profile enables strategic parallel execution of integration tests with
             conservative, safe configuration suitable for local development and CI.

             Key differences from default:
             - forkCount=2C (2 JVMs per CPU core): Parallelizes across test classes
             - reuseForks=false: Each JVM fork runs 1 class, then shuts down (state isolation)
             - dynamic.factor=1.5: Matches fork parallelism in JUnit 5 (conservative)
             - Timeout: 120s per test (vs default 180s), enforced per-class
             - Target: 30-40% faster than sequential while maintaining safety

             Safety guarantees:
             - No shared mutable state between forks (independent process isolation)
             - Each test class gets fresh JVM (eliminates cross-test contamination)
             - H2 database per fork (H2 supports concurrent access)
             - Virtual threads enabled but pinning detection on

             When to use:
              Local development with integration tests (YEngine, DataModelling, etc.)
              CI pipelines requiring faster feedback (pre-deploy checks)
              Stress testing (use -P stress-test instead)
              Breaking-point tests (use -P stress-test instead)

             When NOT to use:
             - For unit tests only: use -P quick-test (faster)
             - For comprehensive validation: use default or -P balanced
             - For stress/deadlock detection: use -P stress-test
        -->
        <profile>
            <id>integration-parallel</id>
            <properties>
                <maven.test.skip>false</maven.test.skip>
                <!-- Phase 3 Strategic Implementation: Conservative 2-core parallelism -->
                <failsafe.forkCount>2C</failsafe.forkCount>
                <!-- reuseForks=false: Each fork runs exactly 1 class (state isolation) -->
                <failsafe.reuseForks>false</failsafe.reuseForks>
                <!-- Thread count scales with fork count; JUnit 5 parallelism via junit-platform.properties -->
                <failsafe.threadCount>8</failsafe.threadCount>
                <!-- Slightly reduced timeout for integration tests (from 180s default) -->
                <integration.test.timeout.default>120 s</integration.test.timeout.default>
                <integration.test.timeout.method>180 s</integration.test.timeout.method>
                <!-- Phase 3: Enable thread-local YEngine isolation for parallel test execution.
                     This property is passed to both Surefire and Failsafe via systemPropertyVariables.
                     Each test thread gets its own isolated YEngine instance, eliminating cross-thread
                     state corruption. Backward compatible: existing tests need no changes. -->
                <yawl.test.threadlocal.isolation>true</yawl.test.threadlocal.isolation>
            </properties>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-failsafe-plugin</artifactId>
                        <configuration>
                            <parallel>classesAndMethods</parallel>
                            <forkCount>${failsafe.forkCount}</forkCount>
                            <reuseForks>${failsafe.reuseForks}</reuseForks>
                            <threadCount>${failsafe.threadCount}</threadCount>
                            <!-- Include integration tests; exclude stress/breaking-point -->
                            <excludedGroups>stress,breaking-point</excludedGroups>
                            <!-- Timeout overrides optimized for integration test execution -->
                            <systemPropertyVariables>
                                <junit.jupiter.execution.timeout.default>${integration.test.timeout.default}</junit.jupiter.execution.timeout.default>
                                <junit.jupiter.execution.timeout.testable.method.default>${integration.test.timeout.method}</junit.jupiter.execution.timeout.testable.method.default>
                                <junit.jupiter.execution.timeout.lifecycle.method.default>${integration.test.timeout.method}</junit.jupiter.execution.timeout.lifecycle.method.default>
                                <!-- Phase 3: Enable thread-local YEngine isolation for parallel test execution -->
                                <yawl.test.threadlocal.isolation>${yawl.test.threadlocal.isolation}</yawl.test.threadlocal.isolation>
                            </systemPropertyVariables>
                            <!-- Increased parallelism: 2.0 factor (1.5 = default conservative) -->
                            <properties>
                                <configurationParameters>
                                    junit.jupiter.execution.parallel.enabled=true
                                    junit.jupiter.execution.parallel.mode.default=concurrent
                                    junit.jupiter.execution.parallel.mode.classes.default=concurrent
                                    junit.jupiter.execution.parallel.config.strategy=dynamic
                                    junit.jupiter.execution.parallel.config.dynamic.factor=2.0
                                </configurationParameters>
                            </properties>
                        </configuration>
                    </plugin>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-surefire-plugin</artifactId>
                        <configuration>
                            <parallel>classesAndMethods</parallel>
                            <forkCount>2C</forkCount>
                            <reuseForks>false</reuseForks>
                            <threadCount>8</threadCount>
                            <!-- Exclude integration tests from unit test phase -->
                            <excludedGroups>integration,integration-h2,integration-mysql,integration-postgres,stress,breaking-point</excludedGroups>
                            <systemPropertyVariables>
                                <junit.jupiter.execution.timeout.default>60 s</junit.jupiter.execution.timeout.default>
                                <junit.jupiter.execution.timeout.testable.method.default>120 s</junit.jupiter.execution.timeout.testable.method.default>
                                <junit.jupiter.execution.timeout.lifecycle.method.default>120 s</junit.jupiter.execution.timeout.lifecycle.method.default>
                                <!-- Phase 3: Enable thread-local YEngine isolation for parallel test execution -->
                                <yawl.test.threadlocal.isolation>${yawl.test.threadlocal.isolation}</yawl.test.threadlocal.isolation>
                            </systemPropertyVariables>
                            <properties>
                                <configurationParameters>
                                    junit.jupiter.execution.parallel.enabled=true
                                    junit.jupiter.execution.parallel.mode.default=concurrent
                                    junit.jupiter.execution.parallel.mode.classes.default=concurrent
                                    junit.jupiter.execution.parallel.config.strategy=dynamic
                                    junit.jupiter.execution.parallel.config.dynamic.factor=2.0
                                </configurationParameters>
                            </properties>
                        </configuration>
                    </plugin>
                </plugins>
            </build>
        </profile>

    </profiles>

</project>
