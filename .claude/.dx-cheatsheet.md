# DX Cheatsheet — YAWL Fast Workflow

> Quick reference for common developer tasks. Bookmark this! ⚡

## Build & Test (Fastest Loop)

| Task | Command | Time | Notes |
|------|---------|------|-------|
| **Compile changed** | `bash scripts/dx.sh compile` | ~5s | Only changed modules |
| **Test changed** | `bash scripts/dx.sh test` | ~10s | After compile |
| **Compile + test** | `bash scripts/dx.sh` | ~15s | Default: both phases |
| **Full build** | `bash scripts/dx.sh all` | ~60s | Pre-commit gate |
| **Test one class** | `bash scripts/dx-test-filter.sh TestClass` | ~3s | Pattern matching |

## Common Scenarios

### Scenario: "I just edited one file"
```bash
bash scripts/dx.sh                    # Auto-detects changed files
```
✓ Compile changed + test changed → 15s total

### Scenario: "I want to run one specific test"
```bash
bash scripts/dx-test-filter.sh TestYStatelessMarking
bash scripts/dx-test-filter.sh '*Retry*'           # Wildcards work
```
✓ No Maven syntax needed

### Scenario: "Build is failing, I need details"
```bash
DX_VERBOSE=1 bash scripts/dx.sh              # Show all output
cat /tmp/dx-build-log.txt | tail -50         # Last 50 lines
```
✓ Full diagnostics

### Scenario: "Incremental build is stale"
```bash
DX_CLEAN=1 bash scripts/dx.sh all            # Fresh build
```
✓ Cleans before compile

### Scenario: "I'm offline"
```bash
DX_OFFLINE=1 bash scripts/dx.sh              # Skip network deps
```
✓ Uses local Maven cache

## Status Interpretation

```
✓ SUCCESS | time: 12.3s | modules: 3 | tests: 45
    ↓
    Green checkmark = all tests passed
    time = wall-clock seconds
    modules = modules compiled
    tests = test methods run

✗ FAILED | time: 8.7s (exit 1) | failures: 2
    ↓
    Red X = test/compile failed
    exit code = Maven exit code
    failures = failed tests/modules

Debug:  cat /tmp/dx-build-log.txt | tail -50
```

## Git + Commit Workflow

```bash
# 1. Edit code
vim src/org/yawlfoundation/yawl/...

# 2. Quick verify (10s)
bash scripts/dx.sh

# 3. Commit
git add src/org/yawlfoundation/...
git commit -m "Fix: description"

# 4. Pre-merge final gate (60s)
bash scripts/dx.sh all

# 5. Push
git push -u origin claude/<feature>-<sessionId>
```

## GODSPEED Protocol (Remember!)

| Gate | Check | Command |
|------|-------|---------|
| **Ψ** | Fresh facts? | `bash scripts/observatory/observatory.sh` |
| **Λ** | Compiles? | `bash scripts/dx.sh compile` |
| **H** | No forbidden patterns? | Hook checks automatically |
| **Q** | Real impl? | No TODO, mock, stub, fake |
| **Ω** | Specific files? | `git add <files>` (not `.`) |

## Performance Tips

**Fast compile**
```bash
bash scripts/dx.sh compile          # Skip tests, change detection
```

**Parallel test execution**
```bash
mvn test -T 4                       # Run 4 tests in parallel
```

**Skip code analysis**
```bash
bash scripts/dx.sh                  # Already skips SpotBugs, PMD
```

**Cache Maven artifacts**
```bash
DX_OFFLINE=1 bash scripts/dx.sh     # Use local .m2 cache
```

## Troubleshooting

| Problem | Solution |
|---------|----------|
| "Module not found" | `bash scripts/dx.sh all` (rebuilds all) |
| "Tests hanging" | `Ctrl+C`, then `mvn clean` |
| "Memory error" | Export: `export MAVEN_OPTS="-Xmx4g"` |
| "Can't see output" | `DX_VERBOSE=1 bash scripts/dx.sh` |
| "Cache is stale" | `DX_CLEAN=1 bash scripts/dx.sh all` |

## File Locations

| What | Where |
|------|-------|
| Main source | `src/org/yawlfoundation/...` |
| Tests | `test/org/yawlfoundation/...` |
| Schemas | `schema/**.xsd` |
| Examples | `exampleSpecs/**.yawl` |
| Build log | `/tmp/dx-build-log.txt` |

---

**Pro Tip**: Bookmark this page. Most builds complete before you can read all commands! ⚡

Last updated: 2026-02-20
