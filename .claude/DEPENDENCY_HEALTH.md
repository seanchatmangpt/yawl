# YAWL Dependency Health Report Template

**Purpose:** This template shows the structure of dependency health reports generated by `check-dependencies.sh`.

**Generated:** Auto-generated on each scan
**Location:** `dependency-reports/dependency-health-YYYY-MM-DD_HH-MM-SS.md`

---

## Executive Summary

| Metric | Count |
|--------|-------|
| Critical Vulnerabilities | **0** |
| High Severity Issues | **0** |
| Medium Severity Issues | **0** |
| Low Severity Issues | **0** |
| Outdated Dependencies | 0 |

---

## üö® CRITICAL VULNERABILITIES

**Action Required:** These vulnerabilities must be addressed immediately.

### Example: Log4j Vulnerability

- **log4j-core: 2.17.1 ‚Üí 2.23.1**
  - CVE: CVE-2021-44228 (Log4Shell)
  - CVSS Score: 10.0 (Critical)
  - Description: Remote code execution vulnerability in Log4j logging library
  - Impact: Allows remote attackers to execute arbitrary code
  - Fix: Update to 2.23.1 or later

### Recommended Actions

1. Review OWASP Dependency-Check report for full details
2. Update affected dependencies to patched versions:
   ```bash
   mvn versions:update-properties -DincludeProperties=log4j.version
   ```
3. Run regression tests after updates:
   ```bash
   mvn clean verify
   ant unitTest
   ```
4. Re-scan to verify fixes:
   ```bash
   ./.claude/check-dependencies.sh
   ```

**Report Location:** See `dependency-reports/owasp-dependency-check/`

---

## ‚ö†Ô∏è  HIGH PRIORITY UPDATES

**Recommended:** Address these updates in the next sprint.

### Spring Boot Security Updates

- **spring-boot: 3.2.5 ‚Üí 3.3.0**
  - CVEs Fixed: 3 security vulnerabilities
  - Changes: Security patches, bug fixes
  - Breaking Changes: None expected (minor version bump)
  - Update Command:
    ```bash
    mvn versions:update-properties -DincludeProperties=spring-boot.version
    ```

### Jackson Databind Updates

- **jackson-databind: 2.17.0 ‚Üí 2.18.2**
  - CVEs Fixed: CVE-2024-XXXXX (deserialization vulnerability)
  - CVSS Score: 7.5 (High)
  - Impact: Potential remote code execution through unsafe deserialization
  - Update Command:
    ```bash
    mvn versions:update-properties -DincludeProperties=jackson.version
    ```

### Commons-IO Security Fix

- **commons-io: 2.11.0 ‚Üí 2.15.1**
  - Security: Path traversal vulnerability fixed
  - Recommendation: Update to latest stable version
  - Update Command:
    ```bash
    mvn versions:use-latest-versions -Dincludes=commons-io:commons-io
    ```

---

## üìã MEDIUM PRIORITY UPDATES

**Optional:** Consider for future maintenance windows.

### Hibernate ORM Updates

- **hibernate-core: 6.4.4.Final ‚Üí 6.5.1.Final**
  - Changes: Performance improvements, bug fixes
  - Impact: Non-critical improvements
  - Breaking Changes: Minor API changes (review migration guide)

### PostgreSQL Driver

- **postgresql: 42.7.2 ‚Üí 42.7.4**
  - Changes: Bug fixes, performance improvements
  - Impact: Connection pool stability improvements

### Commons Libraries

- **commons-lang3: 3.14.0 ‚Üí 3.15.0**
- **commons-codec: 1.16.0 ‚Üí 1.17.0**
- **commons-collections4: 4.4 ‚Üí 4.5**

### Test Dependencies

- **junit-jupiter: 5.10.1 ‚Üí 5.11.0**
- **testcontainers: 1.19.7 ‚Üí 1.20.0**

---

## üîß Update Commands

### Update All Properties (Minor Versions Only)
```bash
mvn versions:update-properties -DallowMajorUpdates=false
```

### Update All Dependencies (Interactive)
```bash
mvn versions:use-latest-versions
```

### Update Specific Dependency
```bash
mvn versions:use-latest-versions -Dincludes=groupId:artifactId
```

### Update Log4j (Security Critical)
```bash
mvn versions:update-properties -DincludeProperties=log4j.version
```

### Update Spring Boot
```bash
mvn versions:update-properties -DincludeProperties=spring-boot.version
```

### Update Jackson (Security Sensitive)
```bash
mvn versions:update-properties -DincludeProperties=jackson.version
```

### Update Hibernate
```bash
mvn versions:update-properties -DincludeProperties=hibernate.version
```

### Update All Security-Critical Libraries
```bash
mvn versions:update-properties \
  -DincludeProperties=log4j.version,jackson.version,spring-boot.version
```

### Display Available Updates (Dry Run)
```bash
mvn versions:display-dependency-updates
mvn versions:display-property-updates
mvn versions:display-plugin-updates
```

### Verify After Updates
```bash
# Full Maven build
mvn clean verify

# Ant unit tests
ant unitTest

# Re-scan dependencies
./.claude/check-dependencies.sh
```

---

## üìä Detailed Reports

- **OWASP CVE Report:** `dependency-reports/owasp-dependency-check/dependency-check-report.html`
- **Dependency Tree:** `dependency-reports/.current-dependencies.txt`
- **Property Updates:** `dependency-reports/.property-updates.tmp`

### View OWASP Report
```bash
# Open HTML report in browser
xdg-open dependency-reports/owasp-dependency-check/dependency-check-report.html

# Or view JSON report
cat dependency-reports/owasp-dependency-check/dependency-check-report.json | jq
```

---

## üîç Understanding Severity Levels

### CRITICAL (CVSS 9.0-10.0)
- **Impact:** Immediate exploitation possible, severe consequences
- **Action:** Update immediately, deploy emergency patch
- **Timeline:** Within 24 hours

### HIGH (CVSS 7.0-8.9)
- **Impact:** Likely exploitation, significant consequences
- **Action:** Update within current sprint
- **Timeline:** Within 1 week

### MEDIUM (CVSS 4.0-6.9)
- **Impact:** Possible exploitation, moderate consequences
- **Action:** Plan for next maintenance window
- **Timeline:** Within 1 month

### LOW (CVSS 0.1-3.9)
- **Impact:** Unlikely exploitation, minimal consequences
- **Action:** Update when convenient
- **Timeline:** Next major release

---

## üìñ Resources

### Documentation
- [OWASP Dependency-Check](https://owasp.org/www-project-dependency-check/)
- [Maven Versions Plugin](https://www.mojohaus.org/versions-maven-plugin/)
- [CVE Database](https://nvd.nist.gov/vuln)
- [YAWL Security Guide](../SECURITY_QUICK_REFERENCE.md)

### Security Advisories
- [Spring Security Advisories](https://spring.io/security)
- [Jackson Security](https://github.com/FasterXML/jackson/security/advisories)
- [Hibernate Security](https://hibernate.org/community/security/)

### Dependency Management
- [Maven Dependency Management](https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html)
- [OWASP Dependency-Check Suppressions](https://jeremylong.github.io/DependencyCheck/general/suppression.html)

---

## üõ†Ô∏è Integration with CI/CD

### GitHub Actions Example

Create `.github/workflows/dependency-check.yml`:

```yaml
name: Weekly Dependency Security Scan

on:
  schedule:
    - cron: '0 2 * * 1'  # Every Monday at 2 AM
  workflow_dispatch:

jobs:
  dependency-check:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Set up JDK 21
        uses: actions/setup-java@v4
        with:
          java-version: '21'
          distribution: 'temurin'
          cache: maven

      - name: Run Dependency Health Check
        run: |
          ./.claude/check-dependencies.sh --format=all

      - name: Upload Reports
        uses: actions/upload-artifact@v4
        with:
          name: dependency-reports
          path: dependency-reports/

      - name: Fail on Critical Vulnerabilities
        run: |
          if [ -f dependency-reports/dependency-health-*.md ]; then
            if grep -q "Critical Vulnerabilities | \*\*[1-9]" dependency-reports/dependency-health-*.md; then
              echo "::error::Critical vulnerabilities detected!"
              exit 1
            fi
          fi
```

### Manual Scheduled Scan

Add to crontab:
```bash
# Weekly dependency scan (every Monday at 2 AM)
0 2 * * 1 cd /path/to/yawl && ./.claude/check-dependencies.sh --format=all
```

---

## üîÑ Update Workflow

### 1. Pre-Update Checklist
- [ ] Review current dependency versions in `pom.xml`
- [ ] Read release notes for major version updates
- [ ] Check for breaking changes in migration guides
- [ ] Create feature branch: `git checkout -b deps/update-YYYY-MM-DD`

### 2. Update Dependencies
```bash
# Display available updates
mvn versions:display-dependency-updates

# Update specific libraries
mvn versions:update-properties -DincludeProperties=log4j.version

# Or update all (interactive)
mvn versions:use-latest-versions
```

### 3. Verify Updates
```bash
# Compile
mvn clean compile

# Run tests
mvn test

# Full verification
mvn clean verify

# Ant tests
ant unitTest
```

### 4. Re-Scan
```bash
./.claude/check-dependencies.sh
```

### 5. Commit & Deploy
```bash
git add pom.xml
git commit -m "Update dependencies: [list critical updates]

- Updated log4j to 2.23.1 (CVE-2024-XXXXX)
- Updated spring-boot to 3.3.0 (security patches)
- Updated jackson to 2.18.2 (CVE-2024-YYYYY)

All tests passing.
"

git push origin deps/update-YYYY-MM-DD
```

---

## üìû Support

**Next Scan:** Schedule weekly or before major releases
**Questions:** Open issue in YAWL repository
**Security Issues:** security@yawlfoundation.org

---

**Report Version:** 1.0.0
**Last Updated:** 2026-02-16
