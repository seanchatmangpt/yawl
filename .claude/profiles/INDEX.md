# YEngine Parallelization Validation - Complete Package Index

**Status**: Phase 1 Complete ✅
**Version**: 6.0
**Date**: 2026-02-28

---

## Quick Navigation

### I Want To...

**Start validation now** (30 seconds)
→ Run: `bash scripts/validate-yengine-parallelization.sh`
→ Then read: Results in `.claude/profiles/validation-reports/parallelization-report-*.txt`

**Understand what this is** (2 minutes)
→ Read: `.claude/profiles/QUICK-START.md`

**Get full documentation** (15 minutes)
→ Read: `.claude/profiles/VALIDATION-HARNESS-README.md`

**Understand the decision framework** (20 minutes)
→ Read: `.claude/profiles/PARALLELIZATION-DECISION.md`

**Lead Phase 2 investigation** (1+ hours)
→ Use: `.claude/profiles/yengine-validation-checklist.md`
→ Run: `bash scripts/validate-yengine-parallelization.sh`
→ Review: Test results and checklist findings

**Message my team** (2 minutes)
→ Use: `.claude/profiles/TEAM-MESSAGE-TEMPLATE.md`
→ Customize for your role/audience

**Review test code** (30 minutes)
→ Read: `src/test/java/org/yawlfoundation/yawl/validation/YEngineParallelizationTest.java`

**Understand validation script** (20 minutes)
→ Read: `scripts/validate-yengine-parallelization.sh`

---

## Document Map

### Phase 1: Validation Harness (COMPLETE ✅)

| Document | Purpose | Length | Audience |
|----------|---------|--------|----------|
| **QUICK-START.md** | One-page overview + 3-step process | 2 min | Everyone |
| **VALIDATION-HARNESS-README.md** | Complete user guide + troubleshooting | 15 min | Implementers |
| **PARALLELIZATION-DECISION.md** | Strategic framework + Phase 2 guidance | 20 min | Investigators |
| **yengine-validation-checklist.md** | Detailed criteria + analysis framework | 30 min | Phase 2 Lead |
| **DELIVERY-SUMMARY.md** | What was delivered + how to use it | 10 min | Project managers |
| **INDEX.md** | This file - navigation guide | 5 min | Everyone |
| **TEAM-MESSAGE-TEMPLATE.md** | Ready-to-send messages for different roles | 5 min | Team leads |

### Code & Automation

| File | Purpose | Size | Type |
|------|---------|------|------|
| **YEngineParallelizationTest.java** | 9 isolation tests for state corruption detection | 25 KB | JUnit 5 test suite |
| **validate-yengine-parallelization.sh** | One-command validation + decision automation | 13 KB | Bash script |

### Generated Reports (After Running Validation)

| Report | Generated By | Contents |
|--------|--------------|----------|
| **parallelization-report-*.txt** | validate-yengine-parallelization.sh | Detailed test results + decision |
| **critical-failures.log** | validate-yengine-parallelization.sh | Critical issues summary |

---

## Getting Started (3 Steps)

### Step 1: Run Validation (30 seconds)
```bash
cd /home/user/yawl
bash scripts/validate-yengine-parallelization.sh
```

**Output**: Console summary + detailed report

### Step 2: Read Results (5 minutes)
```bash
cat .claude/profiles/validation-reports/parallelization-report-*.txt
```

**Look for**: Exit code 0 (PASS) or 1 (FAIL), corruption count

### Step 3: Take Action (Depends on result)
- **PASS (0 corruptions)**: Message team "Safe to parallelize"
- **FAIL (>0 corruptions)**: Alert YEngine Investigator with findings

---

## Phase Timeline

```
Phase 1: Validation Harness
└─ Status: COMPLETE ✅
   └─ Deliverables: 9 tests, automation script, decision framework
   
Phase 2: YEngine Investigation
└─ Status: Ready to start
   └─ Owner: YEngine Investigator
   └─ Input: validation results
   └─ Output: GO/NO-GO recommendation
   
Phase 3: Build Configuration
└─ Status: Blocked (waiting for Phase 2 GO)
   └─ Owner: Build Optimizer
   └─ Work: Update pom.xml for parallel execution
   
Phase 4: Canary Run
└─ Status: Blocked (waiting for Phase 3)
   └─ Owner: QA Lead
   └─ Test: Parallel execution with subset of tests
   
Phase 5: Production Deployment
└─ Status: Blocked (waiting for Phase 4)
   └─ Owner: DevOps
   └─ Work: Enable -T 1.5C in CI/CD pipeline
```

---

## Key Files Quick Reference

### Test Suite
```
src/test/java/org/yawlfoundation/yawl/validation/
└── YEngineParallelizationTest.java
    - 9 isolation tests (T1-T9)
    - 673 lines
    - Real YEngine, no mocks
    - Corruption detection
```

### Automation
```
scripts/
└── validate-yengine-parallelization.sh
    - Run: bash scripts/validate-yengine-parallelization.sh
    - Exit codes: 0 (PASS), 1 (FAIL), 2 (ERROR)
    - Modes: --monitor (flaky detection), --verbose (details)
```

### Decision Documents
```
.claude/profiles/
├── QUICK-START.md                   (overview, 4 KB)
├── VALIDATION-HARNESS-README.md     (guide, 14 KB)
├── PARALLELIZATION-DECISION.md      (strategy, 14 KB)
├── yengine-validation-checklist.md  (criteria, 12 KB)
├── DELIVERY-SUMMARY.md              (recap, 10 KB)
├── TEAM-MESSAGE-TEMPLATE.md         (messages, 8 KB)
└── INDEX.md                         (this file, 5 KB)
```

### Reports (Generated After Validation)
```
.claude/profiles/validation-reports/
├── parallelization-report-YYYYMMDD-HHMMSS.txt
└── critical-failures.log
```

---

## Test Coverage Matrix

| Test | What | Detects | Severity |
|------|------|---------|----------|
| T1 | Isolated engines in parallel | Static field pollution | HIGH |
| T2 | Singleton getInstance() | Multiple instances returned | CRITICAL |
| T3 | Concurrent case creation | Case ID collisions | CRITICAL |
| T4 | Parallel spec loading | Duplicate spec IDs | CRITICAL |
| T5 | Intentional corruption | Detector effectiveness | MEDIUM |
| T6 | ThreadLocal usage across threads | Tenant context leaks | HIGH |
| T7 | Case completion lifecycle | State leakage | MEDIUM |
| T8 | Memory during 50 cases | Heap growth >100MB | MEDIUM |
| T9 | DB connections | Connection pool exhaustion | HIGH |

**Summary**: 9 tests, <30 second execution, 0 safe = parallelizable

---

## GO/NO-GO Criteria Summary

### GO Conditions (ALL required)
1. YEngineParallelizationTest: 0 corruptions detected
2. All 9 tests (T1-T9): PASS status
3. YEngine singleton: Thread-safe getInstance()
4. Case ID generator: Atomic/unique IDs
5. Specification loading: No duplicates
6. Database connections: Properly isolated
7. ThreadLocal cleanup: No pollution
8. Memory growth: <100MB per test
9. Lock contention: <10% hold time

### NO-GO Blockers (ANY one fails)
1. Case ID collision detected (CRITICAL)
2. Singleton violation (multiple instances) (CRITICAL)
3. State pollution across tests (HIGH)
4. ThreadLocal not cleaned (HIGH)
5. DB schema not isolated (HIGH)
6. Deadlock or lock timeout (HIGH)
7. Flaky tests (intermittent failures) (MEDIUM)

---

## Success Metrics

### Phase 1 (This Delivery)
- [x] State corruption detector designed
- [x] 9 isolation tests created
- [x] Automated validation script ready
- [x] GO/NO-GO decision criteria documented
- [x] Rollback strategy defined
- [x] Complete documentation package

### Phase 2 (YEngine Investigator)
- [ ] Validation script run
- [ ] Results analyzed
- [ ] YEngine code reviewed
- [ ] GO or NO-GO decision made
- [ ] Findings documented

### Phase 3+ (Conditional on Phase 2 GO)
- [ ] Maven configuration updated
- [ ] Canary run successful
- [ ] Production deployment complete
- [ ] Monitoring in place

---

## Quick Commands

```bash
# Run validation
bash scripts/validate-yengine-parallelization.sh

# View results
cat .claude/profiles/validation-reports/parallelization-report-*.txt

# Monitor mode (detect flakiness)
bash scripts/validate-yengine-parallelization.sh --monitor

# Verbose output
bash scripts/validate-yengine-parallelization.sh --verbose

# Run individual test
mvn test -Dtest=YEngineParallelizationTest#test1_DetectStaticFieldPollution

# Run with Maven parallel (after Phase 2 GO)
mvn -T 1.5C clean test

# Run sequential (baseline)
mvn clean test
```

---

## Architecture Overview

```
Validation Framework
│
├─ Test Harness (9 concurrent tests)
│  ├─ T1: Field pollution detection
│  ├─ T2: Singleton thread safety
│  ├─ T3: Case state isolation
│  ├─ T4: Spec loading races
│  ├─ T5: Corruption detector validation
│  ├─ T6: ThreadLocal cleanup
│  ├─ T7: State leakage detection
│  ├─ T8: Memory leak detection
│  └─ T9: DB connection isolation
│
├─ Automation (validate-yengine-parallelization.sh)
│  ├─ Prerequisite validation (Maven, Java)
│  ├─ Test compilation
│  ├─ Execution (concurrent)
│  ├─ Result analysis
│  ├─ Decision logic
│  └─ Report generation
│
├─ Decision Framework
│  ├─ GO conditions (8 criteria)
│  ├─ NO-GO blockers (7 issues)
│  ├─ Failure scoring (0-100)
│  └─ Rollback procedures
│
└─ Documentation
   ├─ Quick start (overview)
   ├─ Full guide (reference)
   ├─ Strategy (decision-making)
   └─ Checklist (Phase 2 guidance)
```

---

## Common Questions

**Q: When should I run the validation?**
A: Before deciding to parallelize. Run once, get answer.

**Q: How long does it take?**
A: ~30 seconds (all 9 tests complete quickly).

**Q: What if it fails?**
A: It means parallelization isn't safe yet. Phase 2 will identify why.

**Q: Can I run it locally?**
A: Yes! Works on any machine with Java 21+ and Maven.

**Q: What's the benefit?**
A: 3× speedup: 3 min (sequential) → 1 min (parallel).

**Q: How do I know it's safe?**
A: If validation PASSES (0 corruptions detected).

**See**: `.claude/profiles/VALIDATION-HARNESS-README.md#faq` for more

---

## Contact & Ownership

### Phase 1 (Validation Harness) - COMPLETE
**Owner**: Validation Engineer
**Status**: Delivered 2026-02-28
**Questions**: See documentation in .claude/profiles/

### Phase 2 (YEngine Investigation) - NEXT
**Owner**: YEngine Investigator
**Status**: Ready to start
**Entry Point**: Run validation script + follow checklist
**Timeline**: 1 week

### Phase 3-5 (Build, Deploy)
**Owners**: Build Optimizer, QA, DevOps
**Status**: Blocked (waiting for Phase 2 GO)
**Activation**: Only if Phase 2 approves

---

## Appendix: File Sizes

| File | Size | Type |
|------|------|------|
| YEngineParallelizationTest.java | 25 KB | Java test code |
| validate-yengine-parallelization.sh | 13 KB | Bash script |
| VALIDATION-HARNESS-README.md | 14 KB | Markdown |
| PARALLELIZATION-DECISION.md | 14 KB | Markdown |
| yengine-validation-checklist.md | 12 KB | Markdown |
| DELIVERY-SUMMARY.md | 10 KB | Markdown |
| QUICK-START.md | 4 KB | Markdown |
| TEAM-MESSAGE-TEMPLATE.md | 8 KB | Markdown |
| INDEX.md | 5 KB | Markdown |
| **Total** | **~105 KB** | Code + Docs |

---

## Next Steps

### Immediate (Today)
1. Review this INDEX.md
2. Read QUICK-START.md (2 min)
3. Run validation script (30 sec)

### Short Term (This Week)
1. YEngine Investigator analyzes Phase 2
2. Update checklist with findings
3. Make GO/NO-GO decision

### Medium Term (If GO)
1. Build Optimizer updates pom.xml
2. QA runs canary parallel tests
3. DevOps deploys to CI/CD

---

**Status**: Phase 1 Complete. Ready for Phase 2.

**Start**: `bash scripts/validate-yengine-parallelization.sh`
