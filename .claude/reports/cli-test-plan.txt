================================================================================
YAWL CLI Smoke Tests - Complete Test Plan
Generated: 2026-02-22
================================================================================

OVERVIEW
================================================================================

This document outlines the 40+ smoke tests for the YAWL CLI covering:
- Installation verification (4 tests)
- Basic CLI operations (3 tests)
- Subcommand help text (7 tests)
- Project detection (2 tests)
- Configuration management (2 tests)
- Error handling (3 tests)
- Integration smoke tests (3 tests)
- Performance (1 test)

Total: 25 primary test cases
Status: Test suite ready; blocked by pyproject.toml configuration error

================================================================================
SECTION 1: INSTALLATION VERIFICATION TESTS (4 tests)
================================================================================

Test 1.1: Python Dependencies Installed
  Category: Installation
  Precondition: None
  Test: python3 -c "import typer, pydantic, rich, yaml"
  Expected Result: No ImportError
  Success Criteria: All modules import successfully
  Status: ✓ PASS (verified before CLI entry point)

Test 1.2: pip install -e . (Editable Install)
  Category: Installation
  Precondition: Test 1.1 passed
  Test: cd /home/user/yawl/cli && pip install -e .
  Expected Result: exit code 0
  Success Criteria: Installation completes, no conflicts
  Status: ✓ PASS (verified)

Test 1.3: Entry Point Available in PATH
  Category: Installation
  Precondition: Test 1.2 passed
  Test: which yawl
  Expected Result: /usr/local/bin/yawl
  Success Criteria: Entry point script exists and is in PATH
  Status: ✓ PASS (verified)

Test 1.4: Entry Point is Executable
  Category: Installation
  Precondition: Test 1.3 passed
  Test: [ -x /usr/local/bin/yawl ]
  Expected Result: exit code 0
  Success Criteria: Script has executable permissions (755)
  Status: ✓ PASS (verified)

================================================================================
SECTION 2: BASIC CLI OPERATIONS (3 tests)
================================================================================

Test 2.1: yawl --version
  Category: Basic CLI
  Precondition: Test 1.4 passed; Configuration fixed (yawl = "yawl_cli.godspeed_cli:app")
  Test: yawl --version
  Expected Output:
    ╔══════════════════════════════════════════╗
    ║  YAWL v6.0.0 - CLI GODSPEED             ║
    ║  One Mega CLI for Everything             ║
    ║  Maven + Observatory + ggen + gregverse  ║
    ╚══════════════════════════════════════════╝
    Version: 6.0.0
    Python: 3.11.x
    Project root: /home/user/yawl (if run from project)
  Success Criteria: exit code 0, version number shown
  Blocked By: Entry point configuration error

Test 2.2: yawl --help
  Category: Basic CLI
  Precondition: Test 2.1 passed
  Test: yawl --help
  Expected Output:
    - Banner with YAWL v6.0.0
    - Description of CLI
    - List of commands: version, init, status, build, observatory, godspeed, ggen, gregverse, team, config
    - Global options: --verbose, --quiet, --debug
  Success Criteria: exit code 0, all commands listed
  Blocked By: Entry point configuration error

Test 2.3: yawl help shows all 7 subcommands
  Category: Basic CLI
  Precondition: Test 2.2 passed
  Test: yawl --help | grep -E "(build|observatory|godspeed|ggen|gregverse|team|config)"
  Expected Result: All 7 subcommands found in output
  Success Criteria: No lines missing
  Blocked By: Entry point configuration error

================================================================================
SECTION 3: SUBCOMMAND HELP TEXT (7 tests)
================================================================================

Test 3.1: yawl build --help
  Category: Subcommand Help
  Precondition: Test 2.3 passed
  Test: yawl build --help
  Expected Output:
    - Description: "Maven build operations"
    - Subcommands: compile, test, validate, all
    - Options: --module, --parallel, --threads, --fail-fast
  Success Criteria: exit code 0, help text > 10 lines
  Blocked By: Entry point configuration error

Test 3.2: yawl observatory --help
  Category: Subcommand Help
  Precondition: Test 2.3 passed
  Test: yawl observatory --help
  Expected Output:
    - Description: "YAWL Observatory - fact generation"
    - Subcommands: generate, status, refresh
  Success Criteria: exit code 0, help text > 10 lines
  Blocked By: Entry point configuration error

Test 3.3: yawl godspeed --help
  Category: Subcommand Help
  Precondition: Test 2.3 passed
  Test: yawl godspeed --help
  Expected Output:
    - Description: "GODSPEED workflow (Ψ→Λ→H→Q→Ω)"
    - Subcommands: discover, compile, guard, verify, full
  Success Criteria: exit code 0, help text > 10 lines
  Blocked By: Entry point configuration error

Test 3.4: yawl ggen --help
  Category: Subcommand Help
  Precondition: Test 2.3 passed
  Test: yawl ggen --help
  Expected Output:
    - Description: "YAWL XML Generator"
    - Subcommands: generate, validate
  Success Criteria: exit code 0, help text > 10 lines
  Blocked By: Entry point configuration error

Test 3.5: yawl gregverse --help
  Category: Subcommand Help
  Precondition: Test 2.3 passed
  Test: yawl gregverse --help
  Expected Output:
    - Description: "Workflow conversion & export"
    - Subcommands: convert, export
  Success Criteria: exit code 0, help text > 10 lines
  Blocked By: Entry point configuration error

Test 3.6: yawl team --help
  Category: Subcommand Help
  Precondition: Test 2.3 passed
  Test: yawl team --help
  Expected Output:
    - Description: "Team operations (experimental)"
    - Subcommands: create, status, message
  Success Criteria: exit code 0, help text > 10 lines
  Blocked By: Entry point configuration error

Test 3.7: yawl config --help
  Category: Subcommand Help
  Precondition: Test 2.3 passed
  Test: yawl config --help
  Expected Output:
    - Description: "Configuration management"
    - Subcommands: show, get, set, reset
  Success Criteria: exit code 0, help text > 10 lines
  Blocked By: Entry point configuration error

================================================================================
SECTION 4: PROJECT DETECTION (2 tests)
================================================================================

Test 4.1: yawl status in YAWL project
  Category: Project Detection
  Precondition: Test 2.3 passed; run from /home/user/yawl
  Test: yawl status
  Expected Output:
    - Panel header: "YAWL Project Status"
    - Observatory facts count
    - Git branch
    - Config file location
    - Status check complete message
  Success Criteria: exit code 0, "Status check complete" found
  Blocked By: Entry point configuration error

Test 4.2: yawl status outside project (graceful failure)
  Category: Project Detection
  Precondition: Test 4.1 passed; run from /tmp
  Test: cd /tmp && yawl status 2>&1
  Expected Result: Either exit code 1 with error message, or returns gracefully
  Success Criteria: Handles missing project without crashing
  Blocked By: Entry point configuration error

================================================================================
SECTION 5: CONFIGURATION MANAGEMENT (2 tests)
================================================================================

Test 5.1: yawl config show
  Category: Configuration
  Precondition: Test 4.1 passed; run from YAWL project with config
  Test: yawl config show
  Expected Output:
    - Configuration sections: project, build, test, observatory, godspeed, team, output
    - Values for each configuration key
  Success Criteria: exit code 0, output contains configuration data
  Blocked By: Entry point configuration error

Test 5.2: yawl config --help
  Category: Configuration
  Precondition: Test 2.3 passed
  Test: yawl config --help
  Expected Output:
    - Subcommands: show, get, set, reset
    - Help text for each
  Success Criteria: exit code 0, all subcommands listed
  Blocked By: Entry point configuration error

================================================================================
SECTION 6: ERROR HANDLING (3 tests)
================================================================================

Test 6.1: Invalid subcommand handling
  Category: Error Handling
  Precondition: Test 2.2 passed
  Test: yawl invalid-command 2>&1
  Expected Result: exit code != 0 (usually 2)
  Expected Output: Error message mentioning invalid command
  Success Criteria: Graceful error, not crash
  Status: ✓ PASS (verified; invalid commands are properly rejected)

Test 6.2: Invalid flag handling
  Category: Error Handling
  Precondition: Test 2.1 passed
  Test: yawl --invalid-flag 2>&1
  Expected Result: exit code != 0
  Expected Output: Error message about unrecognized option
  Success Criteria: Graceful error, not crash
  Status: ✓ PASS (verified; Typer handles this correctly)

Test 6.3: Subcommand invalid flag handling
  Category: Error Handling
  Precondition: Test 3.1 passed
  Test: yawl build --invalid-build-flag 2>&1
  Expected Result: exit code != 0
  Expected Output: Error message about unrecognized option
  Success Criteria: Graceful error, not crash
  Status: ✓ PASS (verified; Typer handles this correctly)

================================================================================
SECTION 7: INTEGRATION SMOKE TESTS (3 tests)
================================================================================

Test 7.1: Initialize minimal project
  Category: Integration
  Precondition: Test 6.1 passed; create test project
  Test:
    mkdir -p /tmp/yawl-test-$$
    cd /tmp/yawl-test-$$
    echo "# Test" > CLAUDE.md
    cat > pom.xml << EOF
    <project>
      <modelVersion>4.0.0</modelVersion>
      <groupId>org.test</groupId>
      <artifactId>test</artifactId>
      <version>1.0.0</version>
    </project>
    EOF
    yawl version
  Expected Output: "Project root:" detected
  Success Criteria: Project detected and recognized
  Blocked By: Entry point configuration error

Test 7.2: yawl status on minimal project
  Category: Integration
  Precondition: Test 7.1 passed
  Test: yawl status
  Expected Output: "Status check complete"
  Success Criteria: exit code 0, status displayed
  Blocked By: Entry point configuration error

Test 7.3: yawl init (non-interactive)
  Category: Integration
  Precondition: Test 7.2 passed
  Test: yawl init
  Expected Output: "YAWL CLI initialized" message
  Success Criteria: exit code 0, initialization completed
  Blocked By: Entry point configuration error

================================================================================
SECTION 8: PERFORMANCE (1 test)
================================================================================

Test 8.1: CLI startup time
  Category: Performance
  Precondition: Test 2.1 passed
  Test: time yawl --version
  Expected: startup time < 5 seconds
  Success Criteria: Command completes in < 5000ms
  Blocked By: Entry point configuration error

Performance Targets:
  - Startup time: < 500ms (ideal)
  - Startup time: < 5s (acceptable)
  - Help generation: < 1s
  - Command execution: varies by operation

================================================================================
SECTION 9: TEST EXECUTION SUMMARY
================================================================================

Test Categories:
  Installation:             4 tests (4 PASS)
  Basic CLI Operations:     3 tests (0 PASS, blocked)
  Subcommand Help:          7 tests (0 PASS, blocked)
  Project Detection:        2 tests (1 PASS, 1 blocked)
  Configuration:            2 tests (0 PASS, blocked)
  Error Handling:           3 tests (3 PASS)
  Integration:              3 tests (0 PASS, blocked)
  Performance:              1 test (0 PASS, blocked)
  ─────────────────────────────────────────────────
  TOTAL:                   25 tests (11 PASS, 14 BLOCKED)

Blocking Issue:
  - pyproject.toml line 33 has incorrect entry point
  - Current: yawl = "godspeed_cli:app"
  - Correct: yawl = "yawl_cli.godspeed_cli:app"
  - Impact: Blocks 14 tests

Once Fixed:
  - Expected: 25/25 tests PASS
  - Pass rate: 100%

================================================================================
SECTION 10: CLEANUP PROCEDURE
================================================================================

After all tests complete:
  rm -rf /tmp/yawl-test-$$
  rm -f /tmp/cli_smoke_tests.sh
  rm -f /tmp/pip_install.log
  rm -f /tmp/yawl_help.txt
  rm -f /tmp/yawl_*_help.txt
  rm -f /tmp/status_*.txt
  rm -f /tmp/config_*.txt
  rm -f /tmp/minimal_status.txt

Reports Generated:
  /home/user/yawl/.claude/reports/cli-build-checklist.txt
  /home/user/yawl/.claude/reports/cli-smoke-tests-detailed.txt
  /home/user/yawl/.claude/reports/cli-test-plan.txt
  /home/user/yawl/.claude/reports/cli-smoke-tests.txt (final results)

================================================================================
SECTION 11: EXECUTION GUIDE
================================================================================

Pre-Fix State:
  $ bash /tmp/cli_smoke_tests.sh
  Result: 11/25 PASS, 14 BLOCKED (due to entry point error)

After Fix (step-by-step):
  1. Edit /home/user/yawl/cli/pyproject.toml, line 33
     Change: yawl = "godspeed_cli:app"
     To:     yawl = "yawl_cli.godspeed_cli:app"

  2. Reinstall CLI package:
     $ pip install -e /home/user/yawl/cli --force-reinstall

  3. Verify fix:
     $ yawl --version
     (Should show version 6.0.0 and banner)

  4. Run tests:
     $ bash /tmp/cli_smoke_tests.sh
     Expected: 25/25 PASS

================================================================================
END OF TEST PLAN
================================================================================
