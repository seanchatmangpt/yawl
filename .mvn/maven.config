# YAWL v6.0.0-GA - Maven 4 Concurrent Builder Configuration
#
# Part 4 Optimization: Tree-based lifecycle for graph-optimal parallelization
# Maven 4's concurrent builder enables modules to start as soon as dependencies
# reach 'ready' phase, eliminating linear scheduling bottlenecks.
#
# Key changes from Part 3:
# - -b concurrent: Enable tree-based lifecycle (Maven 4 only)
# - Increased artifact threads: 4 -> 8 for parallel dependency resolution
# - Consumer POM flattening: Faster dependency resolution
# - deployAtEnd: Atomic deployment after all modules succeed

# Maven 4 Concurrent Builder (tree-based lifecycle)
# Note: -b concurrent is only available in Maven 4+. Maven 3.x ignores this flag.
-b concurrent

# Parallel builds: 2 threads per CPU core
-T 2C

# Batch mode (non-interactive)
-B

# Parallel artifact resolution (increased from 4 to 8)
-Dmaven.artifact.threads=8

# Maven 4: Consumer POM flattening for faster resolution
-Dmaven.consumer.pom.flatten=true

# Maven 4: Deploy all modules at end (atomic deployment)
-DdeployAtEnd=true

# Build cache (Part 3)
-Dmaven.build.cache.enabled=true
-Dmaven.build.cache.localOnly=false
-Dmaven.build.cache.save.enabled=true

# Java 25 preview features
-Dmaven.compiler.enable-preview=true

# JUnit 5 parallel execution (optimized in Part 4 for virtual threads)
-Djunit.jupiter.execution.parallel.enabled=true
-Djunit.jupiter.execution.parallel.config.strategy=dynamic
-Djunit.jupiter.execution.parallel.config.dynamic.factor=4.0
-Djunit.jupiter.execution.parallel.config.dynamic.max-pool-size=512
-Djunit.jupiter.execution.parallel.config.default=concurrent
-Dsurefire.fail-if-no-specified-tests=false

# Coverage collection
-Djacoco.skip=false
-Djacoco.output.dir=./target/coverage-reports
-Djacoco.output.format=xml
