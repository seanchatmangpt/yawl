/**
 * Generated by ggen from YAWL OWL 2 DL Ontology v6.0.0
 * Source: yawl-ontology.ttl
 * Generated: {{ generated.timestamp }}
 *
 * DO NOT EDIT - Changes will be overwritten on next generation
 */
package {{ java_package }};

import org.yawlfoundation.yawl.generated.YawlElement;
import org.yawlfoundation.yawl.generated.annotation.Generated;
import javax.annotation.Nonnull;
import javax.annotation.Nullable;
import java.io.Serializable;
import java.util.*;

/**
 * {{ class.label | default(value=class.name) }}
 *
 * {% if class.comment -%}
 * <p>
 * {{ class.comment }}
 * </p>
 * {% endif -%}
 *
 * OWL Class: <code>{{ class.uri }}</code>
 *
 * {% if class.parent_classes | length > 0 -%}
 * <p>Inherits from: {% for parent in class.parent_classes %}{{ parent.name }}{% if not loop.last %}, {% endif %}{% endfor %}</p>
 * {% endif -%}
 *
 * {% if class.properties | length > 0 -%}
 * <p>
 * <strong>Properties:</strong>
 * <ul>
 * {% for prop in class.properties -%}
 * <li><code>{{ prop.name }}</code> ({{ prop.property_type }}): {{ prop.comment | default(value="") }}</li>
 * {% endfor -%}
 * </ul>
 * </p>
 * {% endif -%}
 *
 * @author YAWL Foundation
 * @version {{ generated.version }}
 * @since 6.0.0
 */
@Generated(
    value = "org.yawlfoundation.ggen.CodeGenerator",
    date = "{{ generated.timestamp }}",
    comments = "Generated from ontology class: {{ class.uri }}"
)
public record {{ class.name | pascalcase }}(
{% for prop in class.properties -%}
    {% if prop.is_mandatory %}@Nonnull{% else %}@Nullable{% endif %}
    {{ prop.java_type }} {{ prop.name | snakecase }}{{ if not loop.last }},{{ endif }}
{% endfor -%}
) implements YawlElement, Serializable {

    // Serialization version
    private static final long serialVersionUID = 1L;

    // OWL Type URI
    public static final String RDF_TYPE = "{{ class.uri }}";

    /**
     * OWL class identifier
     * @return The RDF type URI for this element
     */
    @Override
    @Nonnull
    public String getRdfType() {
        return RDF_TYPE;
    }

{% for prop in class.properties -%}
    /**
     * Get {{ prop.label | default(value=prop.name) }}
     *
     * {% if prop.comment -%}
     * {{ prop.comment }}
     * {% endif -%}
     *
     * OWL Property: <code>{{ prop.uri }}</code>
     * Range: <code>{{ prop.range }}</code>
     *
     * @return the {{ prop.name | snakecase }} value
     */
    @Override
    {% if prop.is_mandatory %}@Nonnull{% else %}@Nullable{% endif %}
    public {{ prop.java_type }} get{{ prop.name | pascalcase }}() {
        return {{ prop.name | snakecase }};
    }

{% endfor -%}

    /**
     * Validate this element against SHACL shapes
     *
     * @return true if valid according to SHACL constraints
     */
    @Override
    public boolean validate() {
        // Generated from SHACL shapes during ontology validation
        // Constraints are embedded below:
{% for constraint in class.shacl_constraints -%}
        // {{ constraint.message }}
        if ({{ constraint.java_condition }}) {
            throw new IllegalArgumentException("SHACL violation: {{ constraint.message }}");
        }
{% endfor -%}
        return true;
    }

    /**
     * Convert to RDF representation
     *
     * @return RDF string representation
     */
    @Override
    @Nonnull
    public String toRdf() {
        StringBuilder rdf = new StringBuilder();
        rdf.append("<{{ class.uri }}>\n");
        rdf.append("  a <").append(RDF_TYPE).append("> ;\n");
{% for prop in class.properties -%}
        if ({{ prop.name | snakecase }} != null) {
            rdf.append("  <{{ prop.uri }}> ")
               .append(toRdfValue({{ prop.name | snakecase }}))
               .append(" ;\n");
        }
{% endfor -%}
        rdf.setLength(rdf.length() - 3); // Remove trailing comma and newline
        rdf.append(" .\n");
        return rdf.toString();
    }

    /**
     * Helper to convert property values to RDF format
     *
     * @param value the value to convert
     * @return RDF representation
     */
    private static String toRdfValue(Object value) {
        if (value instanceof String) {
            return "\"" + value + "\"";
        } else if (value instanceof Boolean) {
            return "\"" + value + "\"^^<http://www.w3.org/2001/XMLSchema#boolean>";
        } else if (value instanceof Integer) {
            return "\"" + value + "\"^^<http://www.w3.org/2001/XMLSchema#integer>";
        } else if (value instanceof YawlElement) {
            return "<{{ ((YawlElement) value).getRdfType() }}>";
        }
        return "\"" + value + "\"";
    }

    /**
     * Create a builder for fluent construction
     *
     * @return a new builder instance
     */
    public static Builder builder() {
        return new Builder();
    }

    /**
     * Builder for {{ class.name | pascalcase }}
     */
    public static class Builder {
{% for prop in class.properties -%}
        private {% if prop.is_mandatory %}final{% else %}{% endif %} {{ prop.java_type }} {{ prop.name | snakecase }}{% if not prop.is_mandatory %} = null{% endif %};
{% endfor -%}

{% for prop in class.properties -%}
        /**
         * Set {{ prop.label | default(value=prop.name) }}
         *
         * @param {{ prop.name | snakecase }} the value to set
         * @return this builder
         */
        @Nonnull
        public Builder {{ prop.name | snakecase }}({{ prop.java_type }} {{ prop.name | snakecase }}) {
            this.{{ prop.name | snakecase }} = {{ prop.name | snakecase }};
            return this;
        }

{% endfor -%}
        /**
         * Build the {{ class.name | pascalcase }} record
         *
         * @return a new {{ class.name | pascalcase }} instance
         * @throws IllegalArgumentException if required fields are missing
         */
        @Nonnull
        public {{ class.name | pascalcase }} build() {
{% for prop in class.properties -%}
{% if prop.is_mandatory -%}
            if ({{ prop.name | snakecase }} == null) {
                throw new IllegalArgumentException("{{ prop.name | snakecase }} is required");
            }
{% endif -%}
{% endfor -%}
            return new {{ class.name | pascalcase }}(
{% for prop in class.properties -%}
                {{ prop.name | snakecase }}{{ if not loop.last }},{{ endif }}
{% endfor -%}
            );
        }
    }

    @Override
    public String toString() {
        return "{{ class.name | pascalcase }}{" +
{% for prop in class.properties -%}
                "{{ prop.name | snakecase }}=" + {{ prop.name | snakecase }} +
{% endfor -%}
                '}';
    }
}
