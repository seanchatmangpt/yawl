apiVersion: v1
kind: ConfigMap
metadata:
  name: yawl-engine-config
  labels:
    app: yawl-engine
    version: "6.0.0"
data:
  # Java 25 JVM Configuration
  JAVA_OPTS: |-
    -Xms4g
    -Xmx8g
    -XX:+UseShenandoahGC
    -XX:ShenandoahGCHeuristics=compact
    -XX:+UseCompactObjectHeaders
    -XX:+UseStringDeduplication
    -XX:SharedArchiveFile=/opt/yawl/classes.jsa
    -XX:AOTCache=/opt/yawl/aot.cache
    --enable-preview
    -XX:+ExitOnOutOfMemoryError
    -XX:MaxGCPauseMillis=50
    -Djava.util.concurrent.ForkJoinPool.common.parallelism=8
    -Dlogback.configurationFile=/opt/yawl/config/logback.xml

  # YAWL Engine Configuration
  YAWL_ENGINE_MODE: "production"
  YAWL_CASE_LIMIT: "10000"
  YAWL_THREAD_POOL_SIZE: "200"

  # Observability
  OTEL_SERVICE_NAME: "yawl-engine"
  OTEL_EXPORTER_OTLP_ENDPOINT: "http://otel-collector:4317"
  OTEL_TRACES_EXPORTER: "otlp"
  OTEL_METRICS_EXPORTER: "otlp"

  # Health Check
  HEALTH_CHECK_PATH: "/health"
  HEALTH_CHECK_INTERVAL: "30s"
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: yawl-cds-config
  labels:
    app: yawl-engine
    component: cds
data:
  # CDS Archive Configuration
  CDS_ARCHIVE_PATH: "/opt/yawl/classes.jsa"
  CDS_GENERATE_ON_STARTUP: "false"
  CDS_UPDATE_INTERVAL: "24h"

  # AOT Cache Configuration
  AOT_CACHE_PATH: "/opt/yawl/aot.cache"
  AOT_ENABLED: "true"
