# =============================================================================
# Dockerfile.jdk25 â€” Base JDK 25 Builder Image
# =============================================================================
# Optimized for YAWL build with Java 25 features:
# - Compact Object Headers (-4-8 bytes/object)
# - Generational ZGC for low-latency
# - Virtual Threads for concurrent workflow execution
#
# Build:
#   docker build -t yawl-base:jdk25 -f docker/base/Dockerfile.jdk25 docker/base/
# =============================================================================

FROM eclipse-temurin:25-jdk-alpine

LABEL maintainer="YAWL Foundation"
LABEL description="YAWL Base JDK 25 Builder"
LABEL version="1.0.0"

# Install build dependencies
RUN apk add --no-cache \
    maven \
    git \
    bash \
    curl \
    && rm -rf /var/cache/apk/*

# Maven configuration
ENV MAVEN_OPTS="-Xmx2g -XX:+UseContainerSupport -XX:MaxRAMPercentage=75.0"
ENV MAVEN_HOME=/usr/share/java/maven

# Create cache directories
RUN mkdir -p /root/.m2/repository

# Working directory
WORKDIR /work

# Default entrypoint
ENTRYPOINT ["/bin/bash"]
