<?xml version="1.0" encoding="UTF-8"?>
<!-- Cancel Multi-Instance Pattern Test Specification -->
<!-- Cancel specific instances or all instances of a multi-instance task -->
<specificationSet xmlns="http://www.yawlfoundation.org/yawl/schemas/2.2"
                  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                  xsi:schemaLocation="http://www.yawlfoundation.org/yawl/schemas/2.2">
    <specification uri="CancelMultiInstanceSpec">
        <metaData/>
        <rootNet id="CancelMultiInstanceNet">
            <localVariable name="itemList">
                <type>xs:string</type>
                <initialValue>&lt;item&gt;1&lt;/item&gt;&lt;item&gt;2&lt;/item&gt;&lt;item&gt;3&lt;/item&gt;</initialValue>
            </localVariable>
            <processControlElements>
                <inputCondition id="input">
                    <flowsInto>
                        <nextElementRef id="miTask"/>
                    </flowsInto>
                    <flowsInto>
                        <nextElementRef id="cancelTask"/>
                    </flowsInto>
                </inputCondition>
                <task id="miTask" xsi:type="MultipleInstanceExternalTaskFactsType">
                    <flowsInto>
                        <nextElementRef id="output"/>
                    </flowsInto>
                    <join code="and"/>
                    <split code="and"/>
                    <minimum>1</minimum>
                    <maximum>3</maximum>
                    <threshold>3</threshold>
                    <creationMode code="static"/>
                    <miDataInput>
                        <expression query="/data/itemList"/>
                        <splittingExpression query="for $i in /itemList/* return $i"/>
                        <formalInputParam>item</formalInputParam>
                    </miDataInput>
                    <cancelBehaviour>cancel</cancelBehaviour>
                </task>
                <task id="cancelTask">
                    <flowsInto>
                        <nextElementRef id="output"/>
                    </flowsInto>
                    <join code="xor"/>
                    <split code="and"/>
                    <removalSet>
                        <task id="miTask"/>
                    </removalSet>
                </task>
                <outputCondition id="output"/>
            </processControlElements>
        </rootNet>
        <decomposition id="miTask" xsi:type="WebServiceGatewayFactsType">
            <inputParam name="item">
                <type>xs:string</type>
            </inputParam>
        </decomposition>
    </specification>
</specificationSet>
