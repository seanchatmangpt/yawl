# JUnit Platform parallel execution configuration.
#
# Why parallel=true: JUnit 5 does not inherit Maven Surefire's legacy
# parallel/threadCount settings. This file is the authoritative source.
#
# Why dynamic.factor=3.0: The default factor of 1.0 creates one thread per
# available processor, which leaves CPUs idle during I/O waits (H2 setup,
# XML parsing). 3.0 saturates the CPU more effectively for mixed I/O+CPU
# workloads typical in YAWL's engine and elements test suites.
junit.jupiter.execution.parallel.enabled=true
junit.jupiter.execution.parallel.mode.default=concurrent
junit.jupiter.execution.parallel.mode.classes.default=concurrent
junit.jupiter.execution.parallel.config.strategy=dynamic
junit.jupiter.execution.parallel.config.dynamic.factor=3.0
junit.jupiter.execution.parallel.config.dynamic.max-pool-size=32

# Test sharding for CI parallelization - 8 shards for optimal parallelism
junit.jupiter.execution.parallel.config.dynamic.factor=3.0
junit.jupiter.execution.parallel.config.dynamic.max-pool-size=32

# Sharding configuration (used by scripts/run-shard.sh)
yawl.test.shard.count=8
yawl.test.shard.index=${yawl.test.shard.index:0}

# Timeouts prevent runaway tests from blocking the entire test suite.
# Method-level: 90s is generous enough for integration-style unit tests.
# Class-level: 180s covers all @BeforeAll/@AfterAll setup/teardown overhead.
junit.jupiter.execution.timeout.default=90 s
junit.jupiter.execution.timeout.testable.method.default=180 s
junit.jupiter.execution.timeout.lifecycle.method.default=180 s
