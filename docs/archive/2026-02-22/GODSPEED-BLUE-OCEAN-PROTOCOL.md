# GGEN GODSPEED PROTOCOL: 5 Blue Ocean Agents

**Generated by ggen from RDF/Turtle Semantic Definitions**
**Date**: 2026-02-22
**Version**: 1.0
**Status**: Production Ready

---

## Executive Summary

The **GODSPEED PROTOCOL** is a systematic approach to software development with **zero invariant breakage** and **maximum forward velocity**. It defines a **5-phase workflow**:

```
Î¨ (Observatory) â†’ Î› (Build) â†’ H (Guards) â†’ Q (Invariants) â†’ Î© (Git)
```

Each phase is **specialized by an autonomous "Blue Ocean Agent"** that:
- Operates independently in its domain
- Has monopoly over its decision-making authority
- Communicates via A2A protocols and MCP tools
- Reports status and findings to the lead orchestrator
- Cannot be overridden or bypassed by other agents

This document defines the **5 Blue Ocean Agents**, their **protocols**, **tools**, and **integration patterns**.

---

## What is "Blue Ocean"?

In strategy, **Blue Ocean** means creating **uncontested competitive space**. In GODSPEED:

| Agent | Blue Ocean Advantage |
|-------|---------------------|
| **Î¨ Agent** | Only source of truth for facts; others trust its output |
| **Î› Agent** | Only agent that runs builds; deterministic sequencing |
| **H Agent** | Only enforcer of guards; fail-fast, non-negotiable |
| **Q Agent** | Only verifier of invariants; deep semantic analysis |
| **Î© Agent** | Only git custodian; safe, atomic operations |

**Result**: Each agent is **uncontested** in its domain, with **total authority** over its decisions. No competing implementations. No workarounds. **Zero drift.**

---

## 5 Blue Ocean Agents

### 1. **Î¨ Agent (Observatory Scout)** â€” Phase 1/5

**Role**: Discover facts, validate codebase context, generate observability data

**Principle**: *"Read facts before exploring"*
**Authority**: Fact discovery and validation
**Port**: 9011

#### A2A Protocol: **ObservabilityProtocol**
- **Messaging**: Request-Reply (pull-based)
- **Concurrency**: Parallel (32 concurrent discoveries)
- **Ordering**: Unordered facts (discoverable in parallel)
- **Caching**: 300s TTL, compression enabled

#### MCP Tools (3):

| Tool | Input | Output | Response Time |
|------|-------|--------|----------------|
| **psi_observatory_run** | fact_types, parallel, cache_policy | facts_emitted, fact_files, cache_stats | 5000ms |
| **psi_facts_query** | fact_type, query | result (JSON), fact_file | 500ms |
| **psi_facts_validate** | fact_types | stale_facts, fresh_count, must_refresh | 1000ms |

#### Observable Outputs (Facts Generated):
- `modules.json` â€” Module structure and dependencies
- `gates.json` â€” Quality gates and validation rules
- `reactor.json` â€” Build order and parallelism
- `shared-src.json` â€” Shared source code locations
- `deps-conflicts.json` â€” Dependency conflict analysis
- `tests.json` â€” Test coverage and counts
- `coverage.json` â€” Code coverage metrics

#### Decision Gate:
```
Î¨ Status Check (PreToolUse):
  [ ] Stale facts? â†’ RUN: bash scripts/observatory/observatory.sh
  [ ] Fresh facts? â†’ Proceed with task context
  [ ] Unknown state? â†’ STOP: Run observatory first
```

---

### 2. **Î› Agent (Builder)** â€” Phase 2/5

**Role**: Build system orchestration, compile, test, validate

**Principle**: *"compile â‰º test â‰º validate â‰º deploy"*
**Authority**: Build gating and sequencing
**Port**: 9012

#### A2A Protocol: **BuildSystemProtocol**
- **Messaging**: Request-Reply (command execution)
- **Concurrency**: Parallel across modules, sequential per-module
- **Ordering**: Ordered (compile before test, test before validate)
- **Timeout**: 30 min per operation
- **Logging**: Verbose

#### MCP Tools (3):

| Tool | Command | Output | Response Time |
|------|---------|--------|----------------|
| **lambda_compile** | `bash scripts/dx.sh compile` OR `all` | status (GREEN/RED), duration, errors | 30000ms |
| **lambda_test** | `bash scripts/dx.sh -pl <module>` + `mvn test` | tests_run, tests_passed, coverage % | 60000ms |
| **lambda_validate** | `mvn clean verify -P analysis` | violations_found, violations (JSON) | 10000ms |

#### Build Commands:
```bash
bash scripts/dx.sh compile               # Fastest: compile only
bash scripts/dx.sh -pl yawl-engine       # One module
bash scripts/dx.sh all                   # Pre-commit gate (all modules)
mvn clean verify -P analysis             # Static analysis
```

#### Gating Rules:
```
Î› Status Sequence:
  1. Compile MUST be GREEN â†’ proceed
  2. Test MUST be GREEN â†’ proceed
  3. Validate MUST be GREEN â†’ proceed to H phase
  4. ANY RED â†’ STOP, fix locally, retry
```

---

### 3. **H Agent (Guard Enforcer)** â€” Phase 3/5

**Role**: Enforce HYPER_STANDARDS, block forbidden patterns

**Principle**: *"Blocked patterns are non-negotiable"*
**Authority**: Guard enforcement (fail-fast)
**Port**: 9013

#### A2A Protocol: **GuardEnforcementProtocol**
- **Messaging**: Request-Reply (pattern scanning)
- **Concurrency**: Parallel (16 concurrent scans)
- **Failure Mode**: FAIL_FAST â†’ EXIT 2 on any violation
- **Non-negotiable**: true

#### MCP Tools (3):

| Tool | Pattern Check | Violations | Response Time |
|------|---|---|---|
| **eta_scan_guards** | All 14 patterns | JSON array with location | 5000ms |
| **eta_check_patterns** | Specific pattern | Detailed matches | 2000ms |
| **eta_generate_receipt** | All violations | guard-receipt.json | 500ms |

#### Forbidden Patterns (H Set):
```
H = {
  TODO, FIXME, XXX,          // Deferred work
  @mock, @stub, @fake,       // Mock names
  MockClass, StubService,    // Mock classes
  return "";                 // Empty returns
  catch() { return fake; }   // Silent fallback
  // Javadoc claims X, code ignores X  // Lie
  log.warn("not implemented") // Log instead of throw
}
```

#### Gating Rules:
```
H Phase Gate:
  scan_result = psi_scan_guards(path)
  if violations_found > 0:
    generate_receipt(violations)
    EXIT 2  // FAIL_FAST, non-negotiable
  else:
    status = "GREEN"
    proceed to Q phase
```

#### Example Violation Report:
```json
{
  "phase": "guards",
  "violations": [
    {
      "pattern": "TODO",
      "file": "YWorkItem.java",
      "line": 427,
      "content": "// TODO: Add deadlock detection",
      "fix_guidance": "Implement real logic or throw UnsupportedOperationException"
    }
  ],
  "status": "RED",
  "exit_code": 2
}
```

---

### 4. **Q Agent (Quality Inspector)** â€” Phase 4/5

**Role**: Enforce invariants, verify "real impl âˆ¨ throw"

**Principle**: *"Real code or UnsupportedOperationException"*
**Authority**: Invariant verification
**Port**: 9014

#### A2A Protocol: **InvariantProtocol**
- **Messaging**: Request-Reply (semantic analysis)
- **Concurrency**: Parallel (12 concurrent checks)
- **Analysis Depth**: DEEP (120K context tokens)
- **Reporting**: Detailed findings + risk assessment

#### MCP Tools (3):

| Tool | Check Type | Output | Response Time |
|------|---|---|---|
| **theta_check_impl** | real âˆ¨ throw | violations (JSON), methods_checked | 3000ms |
| **theta_verify_invariants** | All invariants | report (JSON), severity | 5000ms |
| **theta_report_compliance** | Gate status | compliance_report, score, gate_status | 1000ms |

#### Invariant Checks (Q Set):
```
Q = {
  real_impl âˆ¨ throw,    // Real implementation or UnsupportedOperationException
  Â¬mock,               // No mock objects
  Â¬stub,               // No stub implementations
  Â¬fallback,           // No silent fallbacks
  code â‰ˆ docs          // Code matches documentation
}
```

#### Gating Rules:
```
Q Phase Gate:
  for each method in codebase:
    if is_real_implementation(method):
      continue  // OK
    elif throws_unsupported_exception(method):
      continue  // OK
    else:
      violations.append(method)

  if violations.count > 0:
    status = "RED"
    EXIT 2
  else:
    status = "GREEN"
    proceed to Î© phase
```

#### Example: Pass vs Fail

**PASS (Real Implementation)**:
```java
public void setState(TaskState newState) {
    this.state = newState;
    notifyListeners();
}
```

**PASS (Exception Throw)**:
```java
public void legacyMethod() {
    throw new UnsupportedOperationException(
        "legacyMethod is deprecated. Use newMethod() instead."
    );
}
```

**FAIL (Stub)**:
```java
public void initialize() {
    // TODO: implement
}
```

**FAIL (Mock)**:
```java
public Data fetchData() {
    return mockData;  // Stubbed, not real
}
```

---

### 5. **Î© Agent (Git Custodian)** â€” Phase 5/5

**Role**: Safe git operations, atomic commits, zero-force discipline

**Principle**: *"Zero force, specific files, one logical change"*
**Authority**: Git custody (irreversible operations)
**Port**: 9015

#### A2A Protocol: **GitProtocol**
- **Messaging**: Request-Reply (ordered)
- **Concurrency**: Sequential (git is single-threaded)
- **Atomicity**: Transactional, rollback on failure
- **Force Protection**: Forbid --force, forbid --amend

#### MCP Tools (3):

| Tool | Git Command | Safety | Response Time |
|------|---|---|---|
| **omega_stage** | `git add <files>` (NOT `.`) | Check status first | 1000ms |
| **omega_commit** | `git commit -m "..."` | Session ID appended | 3000ms |
| **omega_push** | `git push -u origin <branch>` | Retry on network fail | 5000ms |

#### Safety Rules (Î© Set):
```
Î© = {
  NO --force                    // Never force-push
  NO --force-with-lease        // Never conditional force
  NO --amend                   // Create new commits
  git add <files>              // Specific files only
  NO git add .                 // Never bulk add
  one_logical_change_per_commit
  session_id_in_message
}
```

#### Gating Rules:
```
Î© Phase Gate:
  status = git_status()
  if status.clean():
    error("No changes to commit")
    return SKIP

  stage(specific_files)
  if stage.success():
    message_with_session_id = commit_message + "\n\n" + session_url
    commit(message_with_session_id)

    if commit.success():
      push(branch)
      if push.fail():
        retry(exponential_backoff: [2s, 4s, 8s, 16s])
      else:
        status = "GREEN"
```

#### Example Commit Message:
```
feat: Add case monitoring via MCP endpoint

- Extends YStatelessEngine.getCaseMonitor()
- Publishes CaseStateUpdate events
- Integrates with MCP endpoint registration

https://claude.ai/code/session_01KVChXVewnwDVDVwcwdJBZ7
```

#### Git Retry Policy:
```
if push fails (network):
  wait 2s, retry 1
  if fail: wait 4s, retry 2
  if fail: wait 8s, retry 3
  if fail: wait 16s, retry 4
  if fail: return error (user intervention needed)
```

---

## GODSPEED Orchestrator (Lead Agent)

**Role**: Coordinates all 5 agents in strict sequence (Î¨â†’Î›â†’Hâ†’Qâ†’Î©)

**Authority**: Phase gating, workflow enforcement
**Port**: 9010

#### MCP Tools (3):

| Tool | Purpose | Output |
|------|---------|--------|
| **godspeed_phase_gate** | Check prerequisites for next phase | gate_status (GREEN/RED) |
| **godspeed_phase_sequence** | Orchestrate full Î¨â†’Î›â†’Hâ†’Qâ†’Î© sequence | sequence_id, phases |
| **godspeed_report** | Generate execution report | report (JSON), drift_score, invariant_breakage |

#### Workflow Execution:
```
User requests: "Add case monitoring feature"
    â†“
Orchestrator.sequence(request)
    â†“
1. Î¨ Agent: Are facts fresh? (observatory run)
   â”œâ”€ stale â†’ run observatory
   â””â”€ fresh â†’ proceed
    â†“
2. Î› Agent: Does code compile & pass tests?
   â”œâ”€ RED â†’ STOP, developer fixes locally
   â””â”€ GREEN â†’ proceed
    â†“
3. H Agent: Are there forbidden patterns?
   â”œâ”€ violations â†’ EXIT 2, developer fixes
   â””â”€ clean â†’ proceed
    â†“
4. Q Agent: Are invariants satisfied? (real impl âˆ¨ throw)
   â”œâ”€ failures â†’ EXIT 2, developer fixes
   â””â”€ pass â†’ proceed
    â†“
5. Î© Agent: Commit safely to git
   â”œâ”€ success â†’ push to remote
   â””â”€ fail â†’ message developer for intervention
    â†“
COMPLETE: Feature delivered with zero drift
```

---

## Phase Interdependencies

```
Î¨ (Observatory)
  â†“ output: facts (modules.json, gates.json, etc.)
  â†“ used by: all downstream phases for context
  â†“
Î› (Build)
  â†“ output: GREEN/RED status, compiled artifacts
  â†“ BLOCKS: cannot proceed to H if RED
  â†“
H (Guards)
  â†“ output: guard receipt, violation report
  â†“ BLOCKS: cannot proceed to Q if violations found
  â†“
Q (Invariants)
  â†“ output: compliance report, invariant status
  â†“ BLOCKS: cannot proceed to Î© if invariants fail
  â†“
Î© (Git)
  â†“ output: commits pushed to remote
  â†“ FINAL: irreversible operation
```

---

## RDF/Turtle Semantic Definitions

All protocol definitions are expressed in **Turtle (RDF/TTL)** for semantic rigor:

### Files:
- `ontology/godspeed/godspeed-protocol.ttl` (agent definitions)
- `ontology/godspeed/godspeed-mcp-tools.ttl` (tool specifications)

### Key Namespaces:
```turtle
@prefix godspeed: <http://yawl.io/godspeed#> .
@prefix a2a: <http://yawl.io/a2a#> .
@prefix mcp: <http://yawl.io/mcp#> .
```

### Example Definition:
```turtle
godspeed:PsiAgent a godspeed:GodspeedAgent ;
  rdfs:label "Î¨ Agent (Observatory Scout)" ;
  godspeed:phase godspeed:PsiPhase ;
  godspeed:phaseOrder 1 ;
  a2a:hasProtocol godspeed:PsiProtocol ;
  mcp:hasMCPServer mcp:PsiMCPServer ;
  mcp:handlesTools mcp:psi_observatory_run, mcp:psi_facts_query, mcp:psi_facts_validate ;
  godspeed:outputFacts ( "modules.json" "gates.json" ... ) .
```

---

## GODSPEED PreToolUse Decision Tree

**Before any tool call** (Read, Write, Bash, Edit, Glob, Grep):

```
[ ] Î¨ gate:   Stale facts? â†’ run observatory.sh first
[ ] Ï„ detect: N â‰¥ 2 quantums? â†’ check team-recommendation.sh
[ ] Î› context: Which rule file activates? (teams/**, engine/**, etc.)
[ ] H filter:  Will hook block this? (search for H violations)
[ ] Q check:   Real impl âˆ¨ throw? No silent fallback?
[ ] Î© guard:   emit channel? Session ID set? Specific files?
```

**Decision Flow**:
1. **Î¨ STALE?** â†’ `bash scripts/observatory/observatory.sh`
2. **N QUANTUMS?** â†’ `bash .claude/hooks/team-recommendation.sh "task"`
3. **WHICH RULE?** â†’ Load rule file from `.claude/rules/`
4. **H BLOCKS?** â†’ Fix violation for real (don't work around)
5. **Q PASSES?** â†’ Verify real impl or UnsupportedOperationException
6. **Î© READY?** â†’ Check git status, ensure specific files

---

## Integration with Existing Hooks

The GODSPEED protocol leverages existing hook infrastructure:

| Hook | Phase | Purpose |
|------|-------|---------|
| `hyper-validate.sh` | H | Enforces forbidden patterns |
| `q-phase-invariants.sh` | Q | Checks invariants |
| `pre-commit-validation.sh` | Î© | Pre-commit checks |
| `session-start.sh` | Î¨ | Initializes observatory |
| `team-recommendation.sh` | Ï„ | Detects multi-quantum work |

---

## Performance Characteristics

### Agent Concurrency & Throughput

| Agent | Concurrency | Throughput | Mode | Latency |
|-------|---|---|---|---|
| **Î¨** | 32 parallel | 8 fact types/s | Parallel discovery | 5000ms |
| **Î›** | 4 per-module | 1 build/s | Sequential per-module | 30-60s |
| **H** | 16 parallel | 20 scans/s | Parallel scanning | 5000ms |
| **Q** | 12 parallel | 10 checks/s | Parallel analysis | 5000ms |
| **Î©** | 1 (sequential) | 10 commits/s | Sequential git | 3000ms |

### Context Token Allocation

| Agent | Context | Utilization |
|-------|---------|-------------|
| **Î¨** | 100K | 50% (discovery-heavy) |
| **Î›** | 150K | 70% (build output) |
| **H** | 80K | 40% (pattern scanning) |
| **Q** | 120K | 65% (semantic analysis) |
| **Î©** | 50K | 20% (git operations) |

**Total**: 500K context tokens allocated across ecosystem.

---

## Deployment Architecture

### MCP Server Ports
```
9010  â€” GODSPEED Orchestrator (main)
9011  â€” Î¨ Agent (Observatory)
9012  â€” Î› Agent (Build)
9013  â€” H Agent (Guards)
9014  â€” Q Agent (Invariants)
9015  â€” Î© Agent (Git)
```

### Docker Compose Example
```yaml
services:
  godspeed-Ïˆ-agent:
    image: yawl-godspeed-psi:1.0
    ports: ["9011:9011"]
    env: [AGENT_NAME=PsiAgent, MCP_PORT=9011]

  godspeed-Î»-agent:
    image: yawl-godspeed-lambda:1.0
    ports: ["9012:9012"]
    env: [AGENT_NAME=LambdaAgent, MCP_PORT=9012]

  godspeed-h-agent:
    image: yawl-godspeed-eta:1.0
    ports: ["9013:9013"]
    env: [AGENT_NAME=EtaAgent, MCP_PORT=9013]

  godspeed-q-agent:
    image: yawl-godspeed-theta:1.0
    ports: ["9014:9014"]
    env: [AGENT_NAME=ThetaAgent, MCP_PORT=9014]

  godspeed-Ï‰-agent:
    image: yawl-godspeed-omega:1.0
    ports: ["9015:9015"]
    env: [AGENT_NAME=OmegaAgent, MCP_PORT=9015]

  godspeed-orchestrator:
    image: yawl-godspeed-orchestrator:1.0
    ports: ["9010:9010"]
    env: [AGENT_NAME=Orchestrator, MCP_PORT=9010]
    depends_on:
      - godspeed-Ïˆ-agent
      - godspeed-Î»-agent
      - godspeed-h-agent
      - godspeed-q-agent
      - godspeed-Ï‰-agent
```

---

## Invariant Guarantees

### Zero Drift
```
drift(A) = âˆ‘ violations(phase_i)
target: drift(A) â†’ 0
```

### Zero Invariant Breakage
```
invariant_breakage_count = {
  H violations found,
  Q invariant failures,
  Î© force-push attempts
}
target: invariant_breakage_count = 0
```

---

## References

### Files
- `ontology/godspeed/godspeed-protocol.ttl` â€” Agent definitions (RDF)
- `ontology/godspeed/godspeed-mcp-tools.ttl` â€” Tool specs (RDF)
- `CLAUDE.md` â€” GODSPEED principle summary
- `.claude/HYPER_STANDARDS.md` â€” Guard pattern definitions
- `.claude/rules/` â€” Rule files by quantum

### Related Documentation
- Team Decision Framework: `.claude/rules/teams/team-decision-framework.md`
- Error Recovery: `.claude/rules/teams/error-recovery.md`
- Build Workflow: `.claude/rules/build/dx-workflow.md`

---

## Next Steps

1. **Generate Implementation** â€” Use ggen to generate Java agents from Turtle definitions
2. **Deploy MCP Servers** â€” Start 6 MCP servers (orchestrator + 5 agents)
3. **Integration Testing** â€” Test full Î¨â†’Î›â†’Hâ†’Qâ†’Î© workflow
4. **Production Monitoring** â€” Track drift_score and invariant_breakage via metrics

---

**GODSPEED!!! Maximum Forward Velocity. Zero Invariant Breakage. ðŸš€**

---

**Document Status**: Production Ready
**Version**: 1.0
**Last Updated**: 2026-02-22
