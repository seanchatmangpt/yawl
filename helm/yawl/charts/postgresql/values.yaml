# =============================================================================
# YAWL v6.0.0 - PostgreSQL Sub-chart Values
# =============================================================================

auth:
  database: yawl
  postgresPassword: ""          # set via --set or external secret
  existingSecret: ""            # use existing Kubernetes Secret instead

primary:
  replicaCount: 1
  resources:
    requests:
      cpu: 250m
      memory: 512Mi
    limits:
      cpu: 1000m
      memory: 2Gi
  persistence:
    enabled: true
    accessModes:
      - ReadWriteOnce
    size: 20Gi
    storageClass: ""
    annotations: {}
  podSecurityContext:
    enabled: true
    fsGroup: 999
  containerSecurityContext:
    enabled: true
    runAsUser: 999
    runAsNonRoot: true
  livenessProbe:
    enabled: true
    initialDelaySeconds: 30
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 6
  readinessProbe:
    enabled: true
    initialDelaySeconds: 5
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 6

serviceAccount:
  create: true
  name: ""
  annotations: {}

# Prometheus postgres_exporter sidecar
metrics:
  enabled: true
  serviceMonitor:
    enabled: true
    interval: 30s

# Backup configuration
backup:
  enabled: true
  schedule: "0 2 * * *"     # 02:00 UTC daily
  retentionDays: 7
  persistence:
    enabled: false           # set to true with a PVC for durable backup storage
    size: 50Gi
    storageClass: ""
