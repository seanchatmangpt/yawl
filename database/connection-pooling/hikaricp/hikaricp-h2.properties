# HikariCP Configuration for H2 2.2.224
# Production-ready connection pool settings for YAWL with H2

# =============================================================================
# H2 DATASOURCE CONFIGURATION
# =============================================================================

# JDBC URL - File-based with PostgreSQL compatibility mode
jdbcUrl=jdbc:h2:file:./data/yawl;\
  MODE=PostgreSQL;\
  DATABASE_TO_UPPER=FALSE;\
  CASE_INSENSITIVE_IDENTIFIERS=TRUE;\
  AUTO_SERVER=TRUE;\
  DB_CLOSE_DELAY=-1;\
  TRACE_LEVEL_FILE=0;\
  LOG=0;\
  CACHE_SIZE=65536;\
  LOCK_TIMEOUT=10000;\
  LOCK_MODE=3;\
  UNDO_LOG=1;\
  MAX_OPERATION_MEMORY=100000

# In-memory alternative (for testing)
#jdbcUrl=jdbc:h2:mem:yawl;DB_CLOSE_DELAY=-1;MODE=PostgreSQL

# Driver class
driverClassName=org.h2.Driver

# Credentials
username=sa
password=

# Pool name
poolName=YAWL-H2-Pool

# =============================================================================
# POOL SIZE CONFIGURATION
# =============================================================================

# For H2 embedded, smaller pool is sufficient
maximumPoolSize=10

# Minimum idle
minimumIdle=2

# =============================================================================
# TIMEOUT CONFIGURATION
# =============================================================================

# Connection timeout
connectionTimeout=30000

# Idle timeout - H2 doesn't close idle connections
idleTimeout=600000

# Max lifetime
maxLifetime=1800000

# Validation timeout
validationTimeout=5000

# Leak detection
leakDetectionThreshold=60000

# =============================================================================
# CONNECTION TESTING
# =============================================================================

# H2 test query
connectionTestQuery=SELECT 1

# =============================================================================
# PERFORMANCE TUNING
# =============================================================================

# Keepalive
keepaliveTime=120000

# =============================================================================
# MONITORING
# =============================================================================

# Enable JMX
registerMbeans=true

# Allow suspension
allowPoolSuspension=true

# =============================================================================
# H2-SPECIFIC DATA SOURCE PROPERTIES
# =============================================================================

# PostgreSQL compatibility mode
dataSource.MODE=PostgreSQL

# Case sensitivity
dataSource.DATABASE_TO_UPPER=FALSE
dataSource.CASE_INSENSITIVE_IDENTIFIERS=TRUE

# Performance
dataSource.CACHE_SIZE=65536
dataSource.LOCK_MODE=3
dataSource.MAX_OPERATION_MEMORY=100000

# Logging
dataSource.TRACE_LEVEL_FILE=0
dataSource.LOG=0
