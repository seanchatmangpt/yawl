PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX yawl: <http://www.yawlfoundation.org/yawlschema#>

# Extract workflow structure from YAWL ontology
# Returns tasks, flows, and decompositions

SELECT ?taskId ?taskName ?splitType ?joinType ?documentation ?decomposesTo
WHERE {
  ?task a yawl:Task ;
        yawl:id ?taskId ;
        yawl:name ?taskName .

  ?task yawl:hasSplit ?splitElm .
  ?splitElm yawl:code ?splitType .

  ?task yawl:hasJoin ?joinElm .
  ?joinElm yawl:code ?joinType .

  OPTIONAL {
    ?task rdfs:comment ?documentation
  }

  OPTIONAL {
    ?task yawl:decomposesTo ?decomp .
    ?decomp yawl:id ?decomposesTo
  }
}
ORDER BY ?taskId
